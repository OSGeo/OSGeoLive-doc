
<!DOCTYPE html>

<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>actinia Snabbstart &#8212; OSGeoLive 17.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Sök" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="EOxServer" href="../overview/eoxserver_overview.html" />
    <link rel="prev" title="actinia" href="../overview/actinia_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('sv')">Svenska</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://actinia.mundialis.de/"><img alt="../../_images/logo_actinia.png" class="align-right" src="../../_images/logo_actinia.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="admonition note">
<p class="admonition-title">Observera</p>
<p>Detta projekt ingår endast på OSGeoLives virtuella maskindisk (VMDK)</p>
</div>
<section id="actinia-quickstart">
<h1>actinia Snabbstart<a class="headerlink" href="#actinia-quickstart" title="Permalink till denna rubrik">¶</a></h1>
<p>Actinia är ett REST API med öppen källkod för skalbar, distribuerad, högpresterande bearbetning av geografiska data som huvudsakligen använder <a class="reference external" href="https://grass.osgeo.org/">GRASS GIS</a> för beräkningsuppgifter. Actinia tillhandahåller ett REST API för att bearbeta satellitbilder, tidsserier av satellitbilder, raster- och vektordata.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Innehåll</p>
<ul class="simple">
<li><p><a class="reference internal" href="#using-actinia-with-a-jupyter-notebook" id="id2">Använda actinia med en Jupyter-anteckningsbok</a></p></li>
<li><p><a class="reference internal" href="#introduction-to-ace-actinia-command-execution" id="id3">Introduktion till ace - actinia command execution</a></p></li>
<li><p><a class="reference internal" href="#setup-your-environment" id="id4">Konfigurera din miljö</a></p></li>
<li><p><a class="reference internal" href="#access-sample-data" id="id5">Få tillgång till exempeldata</a></p>
<ul>
<li><p><a class="reference internal" href="#access-data-from-external-sources" id="id6">Få tillgång till data från externa källor</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inspect-the-rest-call-prior-to-submission" id="id7">Inspektera REST-anropet före inlämning</a></p></li>
<li><p><a class="reference internal" href="#display-a-map-map-rendering" id="id8">Visa en karta - kartåtergivning</a></p></li>
<li><p><a class="reference internal" href="#script-examples" id="id9">Exempel på skript</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" id="id10">Exempel 1: beräkning av lutning och aspekt samt univariat statistik från en höjdmodell</a></p></li>
<li><p><a class="reference internal" href="#example-2-orthophoto-image-segmentation-with-export" id="id11">Exempel 2: Segmentering av ortofotobilder med export</a></p></li>
<li><p><a class="reference internal" href="#examples-for-persistent-processing" id="id12">Exempel på uthållig bearbetning</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#things-to-try" id="id13">Saker att prova</a></p>
<ul>
<li><p><a class="reference internal" href="#install-on-osgeolive-vm-with-docker-compose" id="id14">Installera på OSGeoLive VM med Docker Compose</a></p></li>
<li><p><a class="reference internal" href="#create-new-locations" id="id15">Skapa nya platser</a></p></li>
<li><p><a class="reference internal" href="#install-grass-gis-addons-extensions" id="id16">Installera GRASS GIS-tillägg (extensions)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-next" id="id17">Hur vill du gå vidare?</a></p></li>
</ul>
</div>
<p>Actinia kan användas på olika sätt:</p>
<ul class="simple">
<li><p><cite>curl</cite> eller liknande kommandoradsverktyg</p></li>
<li><p>genom <a class="reference external" href="https://github.com/actinia-org/actinia-jupyter">Jupyter anteckningsböcker</a></p></li>
<li><p>gränssnittet för Python &lt;<a class="reference external" href="https://github.com/actinia-org/actinia-python-client">https://github.com/actinia-org/actinia-python-client</a>&gt;`__</p></li>
<li><p>tillägget <cite>Postman</cite> eller <cite>RESTman</cite> för webbläsare</p></li>
<li><p>öppna en GRASS GIS-session och använda verktyget <cite>ace</cite> (actinia command execution)</p></li>
<li><p>andra gränssnitt till REST API</p></li>
</ul>
<p>I den här snabbstarten använder vi GRASS GIS för att på ett enkelt sätt starta kommandon från sessionen till actinia-servern (som i sin tur använder GRASS GIS). Tanken är att snabbt utveckla ett arbetsflöde lokalt på små datamängder för att sedan köra det på servern.</p>
<section id="using-actinia-with-a-jupyter-notebook">
<h2><a class="toc-backref" href="#id2">Använda actinia med en Jupyter-anteckningsbok</a><a class="headerlink" href="#using-actinia-with-a-jupyter-notebook" title="Permalink till denna rubrik">¶</a></h2>
<p>Många Jupyter-anteckningsböcker för actinia finns tillgängliga från <a class="reference external" href="https://github.com/actinia-org/actinia-jupyter">https://github.com/actinia-org/actinia-jupyter</a></p>
</section>
<section id="introduction-to-ace-actinia-command-execution">
<h2><a class="toc-backref" href="#id3">Introduktion till ace - actinia command execution</a><a class="headerlink" href="#introduction-to-ace-actinia-command-execution" title="Permalink till denna rubrik">¶</a></h2>
<p>Verktyget <code class="docutils literal notranslate"><span class="pre">ace</span></code> (<a class="reference external" href="https://neteler.gitlab.io/actinia-introduction/#controlling-actinia-from-a-running-grass-gis-session">detaljer</a>) gör det möjligt att köra ett enda GRASS GIS-kommando eller en lista med GRASS GIS-kommandon på en actinia REST-tjänst (<a class="reference external" href="https://actinia.mundialis.de/">https://actinia.mundialis.de/</a>). Dessutom ger det jobbhantering, möjlighet att lista platser, kartuppsättningar och kartlager som användaren har tillgång till samt skapande och borttagning av kartuppsättningar.</p>
<p>Verktyget <code class="docutils literal notranslate"><span class="pre">ace</span></code> måste köras i en aktiv GRASS GIS-session. Det installeras med <code class="docutils literal notranslate"><span class="pre">g.extension</span> <span class="pre">extension=ace</span> <span class="pre">url=https://github.com/actinia-org/ace</span></code>.</p>
<p>Alla kommandon kommer att utföras som standard i en <strong>eephemeral</strong> databas. Därför måste genererad utdata exporteras med hjälp av utökade GRASS-kommandon.</p>
<p>Alternativet <code class="docutils literal notranslate"><span class="pre">mapset=MAPSET_NAME</span></code> gör det möjligt att utföra kommandon i den beständiga användardatabasen. Det kan användas tillsammans med alternativet <code class="docutils literal notranslate"><span class="pre">location=LOCATION_NAME</span></code>.</p>
</section>
<section id="setup-your-environment">
<h2><a class="toc-backref" href="#id4">Konfigurera din miljö</a><a class="headerlink" href="#setup-your-environment" title="Permalink till denna rubrik">¶</a></h2>
<p>Se till att köra följande kommandon under en GRASS GIS-session.</p>
<p>Användaren måste konfigurera följande miljövariabler för att ange actinia-servern och autentiseringsuppgifterna:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># set credentials and REST server URL</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ACTINIA_USER</span><span class="o">=</span><span class="s1">&#39;demouser&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ACTINIA_PASSWORD</span><span class="o">=</span><span class="s1">&#39;gu3st!pa55w0rd&#39;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ACTINIA_URL</span><span class="o">=</span><span class="s1">&#39;https://actinia.mundialis.de/latest&#39;</span>
</pre></div>
</div>
</section>
<section id="access-sample-data">
<h2><a class="toc-backref" href="#id5">Få tillgång till exempeldata</a><a class="headerlink" href="#access-sample-data" title="Permalink till denna rubrik">¶</a></h2>
<p>Utvalda dataset är tillgängliga för demo-användaren. För att lista de platser du har tillgång till kör du</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span>-l
<span class="o">[</span><span class="s1">&#39;latlong_wgs84&#39;</span>,<span class="w"> </span><span class="s1">&#39;ECAD&#39;</span>,<span class="w"> </span><span class="s1">&#39;nc_spm_08&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Följande kommando listar kartset för aktuell plats i den aktiva GRASS GIS-sessionen (nc_spm_08):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># running ace in the &quot;nc_spm_08&quot; location</span>
<span class="c1"># (the current location name is propagated to the server):</span>
ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span>-m
<span class="o">[</span><span class="s1">&#39;PERMANENT&#39;</span>,<span class="w"> </span><span class="s1">&#39;landsat&#39;</span>,<span class="w"> </span><span class="s1">&#39;modis_lst&#39;</span><span class="o">]</span>
</pre></div>
</div>
<section id="access-data-from-external-sources">
<h3><a class="toc-backref" href="#id6">Få tillgång till data från externa källor</a><a class="headerlink" href="#access-data-from-external-sources" title="Permalink till denna rubrik">¶</a></h3>
<p>GRASS GIS-kommandon kan kompletteras med actinia-specifika tillägg. Operatorn <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> kan anges för en inmatningsparameter för att importera en webbaserad resurs och för att ange export av en utmatningsparameter.</p>
<p>Det är viktigt att namnet på den lokala platsen och kartuppsättningen motsvarar namnet på actinia REST-servern.</p>
<p>För närvarande tillgängliga dataset är (organiserade efter projektioner):</p>
<ul class="simple">
<li><p>Provdataset från North Carolina (NC State-Plane metric CRS, EPSG: 3358):</p>
<ul>
<li><p>baskartografi (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/PERMANENT</span></code>; källa: <a class="reference external" href="https://grassbook.org/datasets/datasets-3rd-edition/">https://grassbook.org/datasets/datasets-3rd-edition/</a>)</p></li>
<li><p>Landsat-underscener (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/landsat</span></code>; källa: <a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>)</p></li>
</ul>
</li>
<li><p>Latitud-Longitud (LatLong WGS84, EPSG:4326):</p>
<ul>
<li><p>empty (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/PERMANENT/</span></code>)</p></li>
<li><p>16-dagars NDVI, MOD13C1, V006, CMG 0,05 grader res. (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/modis_ndvi_global/</span></code>; källa: <a class="reference external" href="https://lpdaac.usgs.gov/products/mod13c1v006/">https://lpdaac.usgs.gov/products/mod13c1v006/</a>)</p></li>
<li><p>LST growing degree days asia 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_gdd_2017/</span></code>;
source: <a class="reference external" href="https://www.mundialis.de/en/products/surface-temperature-data/">https://www.mundialis.de/en/products/surface-temperature-data/</a>)</p></li>
<li><p>LST tropiska dagar Asien 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_tropical_2017/</span></code>)</p></li>
<li><p>LST-temperatur dagligen Asien 2017, inklusive min, max och medelvärde (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_lst_daily_2017/</span></code>)</p></li>
</ul>
</li>
<li><p>Europa (EU LAEA CRS, EPSG:3035):</p>
<ul>
<li><p>EU DEM 25m V1.1 (<code class="docutils literal notranslate"><span class="pre">eu_laea/PERMANENT/</span></code>; source:
<a class="reference external" href="https://land.copernicus.eu/en/products/products-that-are-no-longer-disseminated-on-the-clms-website">https://land.copernicus.eu/en/products/products-that-are-no-longer-disseminated-on-the-clms-website</a>)</p></li>
<li><p>CORINE Landcover 2012, g100_clc12_V18_5 (<code class="docutils literal notranslate"><span class="pre">eu_laea/corine_2012/</span></code>;
source:
<a class="reference external" href="https://land.copernicus.eu/en/products/corine-land-cover/clc-2012">https://land.copernicus.eu/en/products/corine-land-cover/clc-2012</a>)</p></li>
</ul>
</li>
<li><p>World Mollweide (EPSG 54009):</p>
<ul>
<li><p>GHS_POP_GPW42015_GLOBE_R2015A_54009_250_v1_0 (<code class="docutils literal notranslate"><span class="pre">world_mollweide/pop_jrc</span></code>; källa: <a class="reference external" href="https://ghsl.jrc.ec.europa.eu/ghs_pop.php">https://ghsl.jrc.ec.europa.eu/ghs_pop.php</a>)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="inspect-the-rest-call-prior-to-submission">
<h2><a class="toc-backref" href="#id7">Inspektera REST-anropet före inlämning</a><a class="headerlink" href="#inspect-the-rest-call-prior-to-submission" title="Permalink till denna rubrik">¶</a></h2>
<p>För att generera en JSON-begäran för actinia-processens kedja behöver du bara lägga till flaggan <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.slope.aspect elevation=elevation slope=myslope&quot;</span><span class="w"> </span>-d
</pre></div>
</div>
</section>
<section id="display-a-map-map-rendering">
<h2><a class="toc-backref" href="#id8">Visa en karta - kartåtergivning</a><a class="headerlink" href="#display-a-map-map-rendering" title="Permalink till denna rubrik">¶</a></h2>
<p>Det är mycket enkelt (och snabbt) att rendera en karta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># check amount of pixels, just FYI</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info globcover@globcover&quot;</span>
<span class="c1"># render the map ... 7 billion pixels</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">render_raster</span><span class="o">=</span><span class="s2">&quot;globcover@globcover&quot;</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<img alt="ESA Globcover-karta visad av actinia" src="../../_images/esa_globcover_rendered_by_ace.png" />
<figcaption>
<p><span class="caption-text">ESA Globcover-karta visad av actinia</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Ephemeral processing är standardmetoden för bearbetning av actinia. Kommandon utförs i en efemär kartuppsättning som tas bort efter bearbetningen. Du kan exportera utdata från GRASS GIS-moduler för att lagra beräkningsresultatet för nedladdning och vidare analys. Följande exportformat stöds för närvarande:</p>
<ul class="simple">
<li><p>raster: <code class="docutils literal notranslate"><span class="pre">COG</span></code>, <code class="docutils literal notranslate"><span class="pre">GTiff</span></code></p></li>
<li><p>vektor: <code class="docutils literal notranslate"><span class="pre">GPKG</span></code>, <code class="docutils literal notranslate"><span class="pre">GML</span></code>, <code class="docutils literal notranslate"><span class="pre">GeoJSON</span></code>, <code class="docutils literal notranslate"><span class="pre">ESRI_Shapefile</span></code></p></li>
<li><p>tabell: <code class="docutils literal notranslate"><span class="pre">CSV</span></code>, <code class="docutils literal notranslate"><span class="pre">TXT</span></code></p></li>
</ul>
</section>
<section id="script-examples">
<h2><a class="toc-backref" href="#id9">Exempel på skript</a><a class="headerlink" href="#script-examples" title="Permalink till denna rubrik">¶</a></h2>
<section id="example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model">
<h3><a class="toc-backref" href="#id10">Exempel 1: beräkning av lutning och aspekt samt univariat statistik från en höjdmodell</a><a class="headerlink" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" title="Permalink till denna rubrik">¶</a></h3>
<p>Följande kommandon (som ska lagras i ett skript och köras med <code class="docutils literal notranslate"><span class="pre">ace</span></code>) importerar ett rasterlager från en internetkälla som rasterkarta <code class="docutils literal notranslate"><span class="pre">elev</span></code>, ställer in beräkningsregionen till kartan och beräknar lutningen. Ytterligare information om rasterlagret begärs med <code class="docutils literal notranslate"><span class="pre">r.info</span></code>.</p>
<p>Spara följande skript som textfil <code class="docutils literal notranslate"><span class="pre">ace_dtm_statistics.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
g.region<span class="w"> </span><span class="nv">raster</span><span class="o">=</span>elev@https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif<span class="w"> </span>-ap
<span class="c1"># Compute univariate statistics</span>
r.univar<span class="w"> </span><span class="nv">map</span><span class="o">=</span>elev
r.info<span class="w"> </span>elev
<span class="c1"># Compute the slope of the imported map and mark it for export as a COG file (Cloud Optimized GeoTIFF)</span>
r.slope.aspect<span class="w"> </span><span class="nv">elevation</span><span class="o">=</span>elev<span class="w"> </span><span class="nv">slope</span><span class="o">=</span>slope_elev+COG
r.info<span class="w"> </span>slope_elev
</pre></div>
</div>
<p>Spara skriptet i textfilen till <code class="docutils literal notranslate"><span class="pre">/tmp/ace_dtm_statistics.sh</span></code> och kör det sparade skriptet som</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span>--location<span class="w"> </span>nc_spm_08<span class="w"> </span>--script<span class="w"> </span>ace_dtm_statistics.sh
</pre></div>
</div>
<p>Resultaten (meddelanden, statistik, filer) tillhandahålls som REST-resurser.</p>
<p>För att generera en JSON-begäran för actinia-processens kedja behöver du bara lägga till flaggan <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span>-d<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>Utmatningen bör se ut så här:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region_1804289383&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;flags&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pa&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;import_descr&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar_1804289383&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;percentile&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;90&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;separator&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pipe&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect_1804289383&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elevation&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;degrees&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;precision&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FCELL&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;min_slope&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;export&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COG&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="example-2-orthophoto-image-segmentation-with-export">
<h3><a class="toc-backref" href="#id11">Exempel 2: Segmentering av ortofotobilder med export</a><a class="headerlink" href="#example-2-orthophoto-image-segmentation-with-export" title="Permalink till denna rubrik">¶</a></h3>
<p>Spara följande skript som textfil <code class="docutils literal notranslate"><span class="pre">/tmp/ace_segmentation.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="c1"># we apply a importer trick for the import of multi-band GeoTIFFs:</span>
<span class="c1"># install with: g.extension importer url=https://github.com/actinia-org/importer</span>
importer<span class="w"> </span><span class="nv">raster</span><span class="o">=</span>ortho2010@https://apps.mundialis.de/workshops/osgeo_ireland2017/north_carolina/ortho2010_t792_subset_20cm.tif
<span class="c1"># The importer has created three new raster maps, one for each band in the geotiff file</span>
<span class="c1"># stored them in an image group</span>
r.info<span class="w"> </span><span class="nv">map</span><span class="o">=</span>ortho2010.1
r.info<span class="w"> </span><span class="nv">map</span><span class="o">=</span>ortho2010.2
r.info<span class="w"> </span><span class="nv">map</span><span class="o">=</span>ortho2010.3
<span class="c1"># Set the region and resolution</span>
g.region<span class="w"> </span><span class="nv">raster</span><span class="o">=</span>ortho2010.1<span class="w"> </span><span class="nv">res</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>-p
<span class="c1"># Note: the RGB bands are organized as a group</span>
<span class="c1"># export as a as COG file (Cloud Optimized GeoTIFF)</span>
i.segment<span class="w"> </span><span class="nv">group</span><span class="o">=</span>ortho2010<span class="w"> </span><span class="nv">threshold</span><span class="o">=</span><span class="m">0</span>.25<span class="w"> </span><span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+COG<span class="w"> </span><span class="nv">goodness</span><span class="o">=</span>ortho2010_seg_25_fit+COG
<span class="c1"># Finally vectorize segments with r.to.vect and export as a GeoJSON file</span>
r.to.vect<span class="w"> </span><span class="nv">input</span><span class="o">=</span>ortho2010_segment_25<span class="w"> </span><span class="nv">type</span><span class="o">=</span>area<span class="w"> </span><span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+GeoJSON
</pre></div>
</div>
<p>Kör skriptet som sparats i en textfil som</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_segmentation.sh&quot;</span>
</pre></div>
</div>
<p>Resultaten (meddelanden, statistik, filer) tillhandahålls som REST-resurser.</p>
</section>
<section id="examples-for-persistent-processing">
<h3><a class="toc-backref" href="#id12">Exempel på uthållig bearbetning</a><a class="headerlink" href="#examples-for-persistent-processing" title="Permalink till denna rubrik">¶</a></h3>
<p>GRASS GIS-kommandon kan köras i en användarspecifik beständig databas. Användaren måste skapa en kartuppsättning på en befintlig plats. Denna kartuppsättning kan nås via <code class="docutils literal notranslate"><span class="pre">ace</span></code>. Alla bearbetningsresultat av kommandon som körs i denna mapset kommer att lagras permanent. Tänk på att bearbetningen kommer att utföras i en kortvarig databas som kommer att flyttas till den permanenta lagringen med rätt namn efter bearbetningen.</p>
<p>För att skapa en ny mapset på <strong>nc_spm_08</strong>-platsen med namnet <strong>test_mapset</strong> måste följande kommando köras</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Kör kommandona från statistikskriptet i den nya beständiga kartuppsättningen</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span><span class="w"> </span><span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>Visa alla rasterkartor som har skapats med skriptet i test_mapset</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span><span class="w"> </span><span class="nv">grass_commmand</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
</pre></div>
</div>
<p>Visa information om rasterkartan elev och slope_elev</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
<p>Ta bort test_mapset (dubbelkolla alltid namn när du tar bort)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">delete_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Om den aktiva GRASS GIS-sessionen har identiska namn på platser och kartor kan ett alias användas för att undvika att använda alternativet persistent i varje enskilt kommandoanrop:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span><span class="w"> </span><span class="nv">acp</span><span class="o">=</span><span class="s2">&quot;ace --persistent `g.mapset -p`&quot;</span>
</pre></div>
</div>
<p>Vi antar att i den aktiva GRASS GIS-sessionen är den aktuella platsen <strong>nc_spm_08</strong> och det aktuella mapsetet är <strong>test_mapset</strong>. Då kan kommandona från ovan utföras på följande sätt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
acp<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
acp<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
acp<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
acp<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id13">Saker att prova</a><a class="headerlink" href="#things-to-try" title="Permalink till denna rubrik">¶</a></h2>
<section id="install-on-osgeolive-vm-with-docker-compose">
<h3><a class="toc-backref" href="#id14">Installera på OSGeoLive VM med Docker Compose</a><a class="headerlink" href="#install-on-osgeolive-vm-with-docker-compose" title="Permalink till denna rubrik">¶</a></h3>
<p>Krav: docker och docker-compose (redan tillgängligt i OSGeoLive VM-versionen)</p>
<p>För att bygga och driftsätta actinia, kör</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/actinia-org/actinia-core.git
<span class="nb">cd</span><span class="w"> </span>actinia_core
docker-compose<span class="w"> </span>-f<span class="w"> </span>docker/docker-compose.yml<span class="w"> </span>up
</pre></div>
</div>
<p>Nu har du en fungerande actinia-instans lokalt! Kontrollera med</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>http://127.0.0.1:8088/api/v3/version
</pre></div>
</div>
</section>
<section id="create-new-locations">
<h3><a class="toc-backref" href="#id15">Skapa nya platser</a><a class="headerlink" href="#create-new-locations" title="Permalink till denna rubrik">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (note: the &quot;demouser&quot; is not enabled for this)</span>
<span class="c1">#</span>
<span class="c1"># create new location</span>
ace<span class="w"> </span><span class="nv">create_location</span><span class="o">=</span><span class="s2">&quot;mylatlon 4326&quot;</span>
<span class="c1"># create new mapset within location</span>
ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;mylatlon&quot;</span><span class="w"> </span><span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;user1&quot;</span>
</pre></div>
</div>
</section>
<section id="install-grass-gis-addons-extensions">
<h3><a class="toc-backref" href="#id16">Installera GRASS GIS-tillägg (extensions)</a><a class="headerlink" href="#install-grass-gis-addons-extensions" title="Permalink till denna rubrik">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (requires elevated user privileges)</span>
<span class="c1">#</span>
<span class="c1"># list existing addons, see also</span>
<span class="c1"># https://grass.osgeo.org/grass-stable/manuals/addons/</span>
ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension -l&quot;</span>

<span class="c1"># install machine learning addon r.learn.ml2</span>
ace<span class="w"> </span><span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span><span class="w"> </span><span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension extension=\&quot;r.learn.ml2\&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id17">Hur vill du gå vidare?</a><a class="headerlink" href="#what-next" title="Permalink till denna rubrik">¶</a></h2>
<ul class="simple">
<li><p>Besök actinias webbplats på <a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a> &lt;<a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a>&gt;`_</p></li>
<li><p>actinia handledning: <a class="reference external" href="https://neteler.gitlab.io/actinia-introduction">https://neteler.gitlab.io/actinia-introduction</a></p></li>
<li><p>Further reading: Neteler, M., Gebbert, S., Tawalika, C., Bettge, A., Benelcadi, H., Löw, F., Adams, T, Paulsen, H. (2019). Actinia: cloud based geoprocessing. In Proc. of the 2019 conference on Big Data from Space (BiDS’2019) (pp. 41-44). EUR 29660 EN, Publications Office of the European Union 5, Luxembourg: P. Soille, S. Loekken, and S. Albani (Eds.). (<a class="reference external" href="https://zenodo.org/records/2631917">DOI</a>)</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('sv')">Svenska</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>