
<!DOCTYPE html>

<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Broschyr Snabbstart &#8212; OSGeoLive 17.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Sök" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="deegree" href="../overview/deegree_overview.html" />
    <link rel="prev" title="Broschyr" href="../overview/leaflet_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('sv')">Svenska</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://leafletjs.com"><img alt="../../_images/logo_leaflet.png" class="align-right" src="../../_images/logo_leaflet.png" /></a>
<section id="leaflet-quickstart">
<h1><a class="toc-backref" href="#id1">Broschyr Snabbstart</a><a class="headerlink" href="#leaflet-quickstart" title="Permalink till denna rubrik">¶</a></h1>
<p>Leaflet är ett JavaScript-bibliotek för webbläsarbaserade, mobilvänliga, interaktiva kartor. Det är lättviktigt, men har ändå alla funktioner som de flesta utvecklare någonsin behöver för onlinekartor. Leaflet är utformat med enkelhet, prestanda och användbarhet i åtanke.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Innehåll</p>
<ul class="simple">
<li><p><a class="reference internal" href="#leaflet-quickstart" id="id1">Broschyr Snabbstart</a></p>
<ul>
<li><p><a class="reference internal" href="#running" id="id2">Kör</a></p></li>
<li><p><a class="reference internal" href="#preparing-your-page" id="id3">Förbereda din sida</a></p></li>
<li><p><a class="reference internal" href="#setting-up-the-map" id="id4">Konfigurera kartan</a></p></li>
<li><p><a class="reference internal" href="#markers-circles-and-polygons" id="id5">Markörer, cirklar och polygoner</a></p></li>
<li><p><a class="reference internal" href="#working-with-popups" id="id6">Arbeta med popup-fönster</a></p></li>
<li><p><a class="reference internal" href="#dealing-with-events" id="id7">Hantering av händelser</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id8">What next?</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="running">
<h2><a class="toc-backref" href="#id2">Kör</a><a class="headerlink" href="#running" title="Permalink till denna rubrik">¶</a></h2>
<p>Innan du kör denna snabbstart bör du starta MapProxy. På OSGeoLive finns detta under <strong>GeospatialWeb Services\MapProxy\Starta MapProxy</strong>. Detta kommer att ge bakgrundsbilder som kommer att användas i denna demo.</p>
<p>Se <a class="reference external" href="http://localhost/leaflet-demo.html">example</a></p>
<div class="admonition tip">
<p class="admonition-title">Tips</p>
<p>Om du läser den här snabbstarten utanför OSGeoLive kanske du föredrar att läsa originaldemonstrationen på: <a class="reference external" href="https://leafletjs.com/examples/quick-start/">https://leafletjs.com/examples/quick-start/</a>, eftersom den här demonstrationen använder tilestache på OSGeoLive.</p>
</div>
</section>
<section id="preparing-your-page">
<h2><a class="toc-backref" href="#id3">Förbereda din sida</a><a class="headerlink" href="#preparing-your-page" title="Permalink till denna rubrik">¶</a></h2>
<p>Innan du skriver någon kod för kartan måste du göra följande förberedande steg på din sida:</p>
<ul class="simple">
<li><p>Inkludera Leaflets CSS-filer i huvudavsnittet i ditt dokument</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.css&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Inkludera Leaflet JavaScript-fil:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>placera ett <strong>div</strong>-element med ett visst <strong>id</strong> där du vill att din karta ska vara:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Se till att kartbehållaren har en definierad höjd, t.ex. genom att ange den i CSS:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Nu är du redo att initiera kartan och göra lite saker med den.</p>
</section>
<section id="setting-up-the-map">
<h2><a class="toc-backref" href="#id4">Konfigurera kartan</a><a class="headerlink" href="#setting-up-the-map" title="Permalink till denna rubrik">¶</a></h2>
<p>Låt oss skapa en karta över Firenze, Italien med en indikation på 2022 FOSS4G-konferensen. Först initialiserar vi kartan och ställer in dess vy till våra valda geografiska koordinater och en zoomnivå:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">],</span><span class="w"> </span><span class="mf">15</span><span class="p">);</span>
</pre></div>
</div>
<p>Som standard (eftersom vi inte angav några alternativ när vi skapade kartinstansen) är alla mus- och pekinteraktioner på kartan aktiverade, och den har zoom- och attributkontroller.</p>
<p>Observera att setView-anropet också returnerar map-objektet - de flesta Leaflet-metoder fungerar på detta sätt när de inte returnerar ett explicit värde, vilket möjliggör bekväm jQuery-liknande metodkedjning.</p>
<p>Därefter lägger vi till ett kakelskikt på vår karta. I det här fallet kommer vi att använda de kakelbilder som tillhandahålls av MapProxy på live-dvd: n. Observera att användning av trevligare bakgrundskartor som openstreetmap kommer att resultera i en mycket bättre användarupplevelse.</p>
<p>När du skapar ett kakelskikt måste du vanligtvis ange URL-mallen för kakelbilderna, attributtexten och den maximala zoomnivån för skiktet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://localhost:8011/wmts/mapnik_tile/GLOBAL_WEBMERCATOR/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,{})</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="nb">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Om du har tillgång till internet kan du använda en snyggare tilemap som bakgrund:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,{</span><span class="n">maxZoom</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span> <span class="n">attribution</span><span class="p">:</span> <span class="s1">&#39;© &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="nb">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Se till att all kod anropas efter inkluderingen av <strong>div</strong> och <strong>leaflet.js</strong>. Nu är det klart! Du har en fungerande Leaflet-karta nu.</p>
<p>Det är värt att notera att Leaflet är leverantörsagnostiskt, vilket innebär att det inte tvingar fram ett visst val av leverantörer för tiles, och det innehåller inte ens en enda leverantörsspecifik kodrad, så det står dig fritt att använda andra leverantörer om du behöver.</p>
</section>
<section id="markers-circles-and-polygons">
<h2><a class="toc-backref" href="#id5">Markörer, cirklar och polygoner</a><a class="headerlink" href="#markers-circles-and-polygons" title="Permalink till denna rubrik">¶</a></h2>
<p>Förutom kakelskikt kan du enkelt lägga till andra saker på din karta, inklusive markörer, polylinjer, polygoner, cirklar och popup-fönster. Låt oss lägga till en markör:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Att lägga till en cirkel går till på samma sätt (förutom att radien anges i meter som ett andra argument), men du kan styra hur den ser ut genom att ange alternativ som sista argument när du skapar objektet:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">circle</span><span class="p">([</span><span class="mf">43.777</span><span class="p">,</span><span class="w"> </span><span class="mf">11.255</span><span class="p">],</span><span class="w"> </span><span class="mf">250</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#f03&#39;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">fillOpacity</span><span class="o">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Det är lika enkelt att lägga till en polygon:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">polygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">polygon</span><span class="p">([</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.775</span><span class="p">,</span><span class="w"> </span><span class="mf">11.247</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.784</span><span class="p">,</span><span class="w"> </span><span class="mf">11.240</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.778</span><span class="p">,</span><span class="w"> </span><span class="mf">11.238</span><span class="p">]</span>
<span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="working-with-popups">
<h2><a class="toc-backref" href="#id6">Arbeta med popup-fönster</a><a class="headerlink" href="#working-with-popups" title="Permalink till denna rubrik">¶</a></h2>
<p>Popup-fönster används vanligtvis när du vill bifoga information till ett visst objekt på en karta. Leaflet har en mycket praktisk genväg för detta:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">()</span>
<span class="w">   </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">])</span>
<span class="w">   </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;FOSS4G is here this year!&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Här använder vi <strong>openOn</strong> i stället för <strong>addTo</strong> eftersom det hanterar automatisk stängning av en tidigare öppnad popup när en ny öppnas, vilket är bra för användbarheten.</p>
</section>
<section id="dealing-with-events">
<h2><a class="toc-backref" href="#id7">Hantering av händelser</a><a class="headerlink" href="#dealing-with-events" title="Permalink till denna rubrik">¶</a></h2>
<p>Varje gång något händer i Leaflet, t.ex. att användaren klickar på en markör eller att kartzoomen ändras, skickar motsvarande objekt en händelse som du kan prenumerera på med en funktion. Det gör att du kan reagera på användarinteraktion:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Varje objekt har sin egen uppsättning händelser - se <a class="reference external" href="https://leafletjs.com/reference.html">dokumentation</a> för detaljer. Det första argumentet i lyssnarfunktionen är ett händelseobjekt - det innehåller användbar information om den händelse som inträffade. Exempelvis har kartans klickhändelseobjekt (e i exemplet ovan) egenskapen latlng som är en plats där klicket inträffade.</p>
<p>Låt oss förbättra vårt exempel genom att använda en popup istället för en alert:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">popup</span>
<span class="w">        </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
<span class="w">         </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Försök att klicka på kartan så visas koordinaterna i en popup. Visa hela <a class="reference external" href="http://localhost/leaflet-demo.html">example</a></p>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id8">What next?</a><a class="headerlink" href="#what-next" title="Permalink till denna rubrik">¶</a></h2>
<p>Nu har du lärt dig grunderna i Leaflet och kan börja bygga kartappar direkt! Glöm inte att ta en titt på den detaljerade <a class="reference external" href="https://leafletjs.com/reference.html">dokumentationen</a> eller andra <a class="reference external" href="https://leafletjs.com/examples.html">exempel</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('sv')">Svenska</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>