
<!DOCTYPE html>

<html lang="fi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Leaflet Quickstart &#8212; OSGeoLive 17.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Sisällysluettelo" href="../genindex.html" />
    <link rel="search" title="Etsi" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="deegree" href="../overview/deegree_overview.html" />
    <link rel="prev" title="Leaflet" href="../overview/leaflet_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://leafletjs.com"><img alt="../../_images/logo_leaflet.png" class="align-right" src="../../_images/logo_leaflet.png" /></a>
<section id="leaflet-quickstart">
<h1><a class="toc-backref" href="#id1">Leaflet Quickstart</a><a class="headerlink" href="#leaflet-quickstart" title="Permalink to this headline">¶</a></h1>
<p>Leaflet on JavaScript-kirjasto selainpohjaisia, mobiiliystävällisiä, interaktiivisia karttoja varten. Se on kevyt, mutta sisältää kuutenkin suurimman osan ominaisuuksista, joita kehittäjä tarvitsee online-karttoihin. Leafletiä suunnitellessa yksinkertaisuus, suorituskyky ja käytettävyys on pidetty mielessä.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Sisältö</p>
<ul class="simple">
<li><p><a class="reference internal" href="#leaflet-quickstart" id="id1">Leaflet Quickstart</a></p>
<ul>
<li><p><a class="reference internal" href="#running" id="id2">Suorittaminen</a></p></li>
<li><p><a class="reference internal" href="#preparing-your-page" id="id3">Sivun valmistelu</a></p></li>
<li><p><a class="reference internal" href="#setting-up-the-map" id="id4">Setting up the Map</a></p></li>
<li><p><a class="reference internal" href="#markers-circles-and-polygons" id="id5">Merkit, ympyrät ja polygonit</a></p></li>
<li><p><a class="reference internal" href="#working-with-popups" id="id6">Työskentely ponnahdusikkunoiden kanssa</a></p></li>
<li><p><a class="reference internal" href="#dealing-with-events" id="id7">Tapahtumien käsittely</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id8">What next?</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="running">
<h2><a class="toc-backref" href="#id2">Suorittaminen</a><a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>Prior to running this quick start you should start MapProxy. On OSGeoLive this can be found under <strong>Geospatial\Web Services\MapProxy\Start MapProxy</strong>.
This will provide background tiles that will be used in this demo.</p>
<p>Katso <a class="reference external" href="http://localhost/leaflet-demo.html">esimerkki</a></p>
<div class="admonition tip">
<p class="admonition-title">Vihje</p>
<p>If you are reading this quickstart outside OSGeoLive you may prefer reading the original demo on: <a class="reference external" href="https://leafletjs.com/examples/quick-start/">https://leafletjs.com/examples/quick-start/</a>, since this demo uses tilestache on OSGeoLive.</p>
</div>
</section>
<section id="preparing-your-page">
<h2><a class="toc-backref" href="#id3">Sivun valmistelu</a><a class="headerlink" href="#preparing-your-page" title="Permalink to this headline">¶</a></h2>
<p>Before writing any code for the map, you need to do the following preparation steps on your page:</p>
<ul class="simple">
<li><p>Include Leaflet CSS files in the head section of your document</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.css&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ota mukaan Leaflet JavaScript-tiedosto:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>aseta <em>div</em> elementti tietyn <em>id</em>:n kanssa kohtaan, jossa haluat kartan sijaitsevan:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Make sure the map container has a defined height, for example by setting it in CSS:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Now you are ready to initialize the map and do some stuff with it.</p>
</section>
<section id="setting-up-the-map">
<h2><a class="toc-backref" href="#id4">Setting up the Map</a><a class="headerlink" href="#setting-up-the-map" title="Permalink to this headline">¶</a></h2>
<p>Let’s create a map of Firenze, Italy with an indication of the 2022 FOSS4G conference. First we’ll initialize the map and set its view to our chosen geographical coordinates and a zoom level:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">],</span><span class="w"> </span><span class="mf">15</span><span class="p">);</span>
</pre></div>
</div>
<p>By default (as we didn’t pass any options when creating the map instance), all mouse and touch interactions on the map are enabled, and it has zoom and attribution controls.</p>
<p>Note that setView call also returns the map object - most Leaflet methods act like this when they don’t return an explicit value, which allows convenient jQuery-like method chaining.</p>
<p>Next we’ll add a tile layer to our map.
In this case we will be using the tile images provided by MapProxy on the live dvd. Note that using nicer background maps such as openstreetmap will result in a much better user experience.</p>
<p>Creating a tile layer usually involves setting the URL template for the tile images, the attribution text and the maximum zoom level of the layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://localhost:8011/wmts/mapnik_tile/GLOBAL_WEBMERCATOR/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,{})</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="nb">map</span><span class="p">);</span>
</pre></div>
</div>
<p>If you have online access you may want to use a nicer tilemap as the background:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,{</span><span class="n">maxZoom</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span> <span class="n">attribution</span><span class="p">:</span> <span class="s1">&#39;© &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="nb">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Make sure all the code is called after the <strong>div</strong> and <strong>leaflet.js</strong> inclusion. That’s it! You have a working Leaflet map now.</p>
<p>It’s worth noting that Leaflet is provider-agnostic, meaning that it doesn’t enforce a particular choice of providers for tiles, and it doesn’t even contain a single provider-specific line of code, so you’re free to use other providers if you need to.</p>
</section>
<section id="markers-circles-and-polygons">
<h2><a class="toc-backref" href="#id5">Merkit, ympyrät ja polygonit</a><a class="headerlink" href="#markers-circles-and-polygons" title="Permalink to this headline">¶</a></h2>
<p>Besides tile layers, you can easily add other things to your map, including markers, polylines, polygons, circles and popups.
Let’s add a marker:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Adding a circle is the same (except for specifying the radius in meters as a second argument), but lets you control how it looks by passing options as the last argument when creating the object:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">circle</span><span class="p">([</span><span class="mf">43.777</span><span class="p">,</span><span class="w"> </span><span class="mf">11.255</span><span class="p">],</span><span class="w"> </span><span class="mf">250</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#f03&#39;</span><span class="p">,</span>
<span class="w">   </span><span class="nx">fillOpacity</span><span class="o">:</span><span class="w"> </span><span class="mf">0.5</span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Polygonin lisääminen on yhtä helppoa:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">polygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">polygon</span><span class="p">([</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.775</span><span class="p">,</span><span class="w"> </span><span class="mf">11.247</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.784</span><span class="p">,</span><span class="w"> </span><span class="mf">11.240</span><span class="p">],</span>
<span class="w">    </span><span class="p">[</span><span class="mf">43.778</span><span class="p">,</span><span class="w"> </span><span class="mf">11.238</span><span class="p">]</span>
<span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="working-with-popups">
<h2><a class="toc-backref" href="#id6">Työskentely ponnahdusikkunoiden kanssa</a><a class="headerlink" href="#working-with-popups" title="Permalink to this headline">¶</a></h2>
<p>Ponnahdusikkunoita käytetään yleensä kun halutaan yhdistää tietoa johonkin kohteeseen kartalla. Leafletissä on todella kätevä oikotie tätä varten:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">()</span>
<span class="w">   </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">([</span><span class="mf">43.77913</span><span class="p">,</span><span class="w"> </span><span class="mf">11.24938</span><span class="p">])</span>
<span class="w">   </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;FOSS4G is here this year!&quot;</span><span class="p">)</span>
<span class="w">   </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Here we use <strong>openOn</strong> instead of <strong>addTo</strong> because it handles automatic closing of a previously opened popup when opening a new one which is good for usability.</p>
</section>
<section id="dealing-with-events">
<h2><a class="toc-backref" href="#id7">Tapahtumien käsittely</a><a class="headerlink" href="#dealing-with-events" title="Permalink to this headline">¶</a></h2>
<p>Every time something happens in Leaflet, e.g. user clicks on a marker or map zoom changes, the corresponding object sends an event which you can subscribe to with a function. It allows you to react to user interaction:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Each object has its own set of events - see <a class="reference external" href="https://leafletjs.com/reference.html">documentation</a> for details. The first argument of the listener function is an event object - it contains useful information about the event that happened. For example, map click event object (e in the example above) has latlng property which is a location at which the click occured.</p>
<p>Let’s improve our example by using a popup instead of an alert:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nx">popup</span>
<span class="w">        </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span>
<span class="w">         </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span>
</pre></div>
</div>
<p>Kokeile klikata karttaa niin näet koordinaatit ponnahdusikkunassa. Katso täydellinen <a class="reference external" href="http://localhost/leaflet-demo.html">esimerkki</a></p>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id8">What next?</a><a class="headerlink" href="#what-next" title="Permalink to this headline">¶</a></h2>
<p>Nyt olet oppinut Leafletin perusteet ja voit aloittaa rakentamaan karttasovelluksia saman tien! Muista katsoa myös yksityiskohtaista <a class="reference external" href="https://leafletjs.com/examples.html">dokumentaatiota</a> ja muita <a class="reference external" href="https://leafletjs.com/reference.html">esimerkkejä</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>