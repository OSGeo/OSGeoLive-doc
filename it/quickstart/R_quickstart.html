
<!DOCTYPE html>

<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guida rapida R &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="XyGrib" href="../overview/xygrib_overview.html" />
    <link rel="prev" title="R" href="../overview/R_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://cran.r-project.org"><img alt="../../_images/logo_R.png" class="align-right" src="../../_images/logo_R.png" /></a>
<section id="r-quickstart">
<h1>Guida rapida R<a class="headerlink" href="#r-quickstart" title="Link a questa intestazione">¶</a></h1>
<p>R è un ambiente di software libero per il calcolo statistico e la grafica.</p>
<p>Questa Guida Rapida descrive come:</p>
<blockquote>
<div><ul class="simple">
<li><p>usa R per l’aritmetica semplice</p></li>
<li><p>carica alcuni dati da uno shapefile e mappali</p></li>
<li><p>fai una trasformazione di coordinate</p></li>
<li><p>traccia alcuni punti di dati su una mappa</p></li>
</ul>
</div></blockquote>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenuti</p>
<ul class="simple">
<li><p><a class="reference internal" href="#start-r" id="id1">Avvia R</a></p></li>
<li><p><a class="reference internal" href="#building-data" id="id2">Dati di costruzione</a></p></li>
<li><p><a class="reference internal" href="#loading-map-data" id="id3">Caricamento dei dati della mappa</a></p></li>
<li><p><a class="reference internal" href="#vignettes" id="id4">Vignette</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id5">E ora?</a></p></li>
</ul>
</div>
<section id="start-r">
<h2><a class="toc-backref" href="#id1">Avvia R</a><a class="headerlink" href="#start-r" title="Link a questa intestazione">¶</a></h2>
<p>R è essenzialmente un programma a riga di comando, anche se sono disponibili interfacce grafiche. Si digita una linea di codice al prompt, si preme invio, e l’interprete R la valuta e restituisce il risultato.</p>
<div class="admonition tip">
<p class="admonition-title">Suggerimento</p>
<p>Non temere la linea di comando - è una fonte di grande potere. Usate le frecce su e giù per richiamare i comandi in modo da poter modificare gli errori. Premi CTRL-C se sei bloccato e dovresti riavere il prompt.</p>
</div>
<p>Scegli <span class="menuselection">Geospatial ‣ Spatial Tools ‣ R Statistics</span>. Si apre una finestra di terminale che esegue R.</p>
<p>Si può iniziare con una semplice aritmetica.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="mi">3</span><span class="o">*</span><span class="mi">2</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mi">6</span>

<span class="o">&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">4</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">2.5</span>

<span class="o">&gt;</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.414214</span>

<span class="o">&gt;</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.155727</span>
</pre></div>
</div>
<p>Una gamma completa di funzioni aritmetiche, trigonometriche e statistiche sono integrate, e altre migliaia sono disponibili da pacchetti nell’archivio <a class="reference external" href="https://cran.r-project.org/">CRAN</a>.</p>
<p>Il prompt principale in R è <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, ma c’è anche il prompt di continuazione <code class="docutils literal notranslate"><span class="pre">+`</span></code>, che appare se R si aspetta più input per fare un’espressione valida. Lo vedrai se dimentichi una parentesi di chiusura o una parentesi.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sqrt</span><span class="p">(</span>
<span class="o">+</span> <span class="mi">2</span>
<span class="o">+</span> <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.414214</span>
</pre></div>
</div>
</section>
<section id="building-data">
<h2><a class="toc-backref" href="#id2">Dati di costruzione</a><a class="headerlink" href="#building-data" title="Link a questa intestazione">¶</a></h2>
<p>Ti starai chiedendo cosa ci faccia il misterioso «uno» tra parentesi quadre nell’output. Questo ti sta dicendo che il risultato è un numero. R può memorizzare cose in vettori unidimensionali, matrici bidimensionali e array multidimensionali. Ci sono molte funzioni che possono generare queste cose. Ecco una semplice sequenza:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">len</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.000000</span> <span class="mf">1.444444</span> <span class="mf">1.888889</span> <span class="mf">2.333333</span> <span class="mf">2.777778</span> <span class="mf">3.222222</span> <span class="mf">3.666667</span> <span class="mf">4.111111</span>
<span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="mf">4.555556</span> <span class="mf">5.000000</span>
</pre></div>
</div>
<p>Ora puoi vedere che il <code class="docutils literal notranslate"><span class="pre">[9]</span></code> ci sta dicendo che 4,555 è il nono valore nel vettore.</p>
<p>Se si costruisce una matrice si ottengono le etichette delle righe e delle colonne:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">m</span>
     <span class="p">[,</span><span class="mi">1</span><span class="p">]</span> <span class="p">[,</span><span class="mi">2</span><span class="p">]</span> <span class="p">[,</span><span class="mi">3</span><span class="p">]</span> <span class="p">[,</span><span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,]</span>    <span class="mi">1</span>    <span class="mi">4</span>    <span class="mi">7</span>   <span class="mi">10</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,]</span>    <span class="mi">2</span>    <span class="mi">5</span>    <span class="mi">8</span>   <span class="mi">11</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,]</span>    <span class="mi">3</span>    <span class="mi">6</span>    <span class="mi">9</span>   <span class="mi">12</span>
</pre></div>
</div>
<p>Gli elementi delle matrici possono essere estratti usando le parentesi quadre, con gli indici di riga e colonna separati da virgole. Lascia vuoto un indice per ottenere un’intera riga come vettore. Usa un indice vettoriale per ottenere più righe o colonne come una matrice più piccola:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mi">11</span>

<span class="o">&gt;</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">,]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">8</span> <span class="mi">11</span>

<span class="o">&gt;</span> <span class="n">m</span><span class="p">[,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
     <span class="p">[,</span><span class="mi">1</span><span class="p">]</span> <span class="p">[,</span><span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,]</span>    <span class="mi">7</span>   <span class="mi">10</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,]</span>    <span class="mi">8</span>   <span class="mi">11</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,]</span>    <span class="mi">9</span>   <span class="mi">12</span>
</pre></div>
</div>
<p>I data frame sono strutture di dati che rispecchiano il tipo di struttura che si trova in un RDBMS come Postgres o MySQL. Ogni riga può essere pensata come un record, con le colonne che sono come i campi in un database. Come in un database, ogni campo deve essere dello stesso tipo per ogni record.</p>
<p>In molti modi funzionano come le matrici, ma puoi anche ottenere e impostare le colonne per nome usando $-notation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; d = data.frame(x=1:10, y=1:10, z=runif(10)) # z is 10 random numbers
&gt; d
        x  y          z
    1   1  1 0.44128080
    2   2  2 0.09394331
    3   3  3 0.51097462
    4   4  4 0.82683828
    5   5  5 0.21826740
    6   6  6 0.65600533
    7   7  7 0.59798278
    8   8  8 0.19003625
    9   9  9 0.24004866
    10 10 10 0.35972749

&gt; d$z
 [1] 0.44128080 0.09394331 0.51097462 0.82683828 0.21826740 0.65600533
 [7] 0.59798278 0.19003625 0.24004866 0.35972749

&gt; d$big = d$z &gt; 0.6  # d$big is now a boolean true/false value
&gt; d[1:5,]
  x y          z   big
1 1 1 0.44128080 FALSE
2 2 2 0.09394331 FALSE
3 3 3 0.51097462 FALSE
4 4 4 0.82683828  TRUE
5 5 5 0.21826740 FALSE

&gt; d$name = letters[1:10] # create a new field of characters
&gt; d[1:5,]
  x y          z   big name
  1 1 1 0.44128080 FALSE    a
  2 2 2 0.09394331 FALSE    b
  3 3 3 0.51097462 FALSE    c
  4 4 4 0.82683828  TRUE    d
  5 5 5 0.21826740 FALSE    e
</pre></div>
</div>
</section>
<section id="loading-map-data">
<h2><a class="toc-backref" href="#id3">Caricamento dei dati della mappa</a><a class="headerlink" href="#loading-map-data" title="Link a questa intestazione">¶</a></h2>
<p>Ci sono molti pacchetti per la manipolazione dei dati spaziali e le statistiche. Alcuni sono inclusi qui e altri possono essere scaricati da CRAN.</p>
<p>Qui caricherai due shapefile - i confini del paese e i luoghi popolati dai dati di Natural Earth. Usa due pacchetti aggiuntivi per ottenere la funzionalità spaziale:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span>           <span class="c1"># Simple Features manipulation Library</span>
<span class="o">&gt;</span> <span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>      <span class="c1"># Plotting library</span>

<span class="o">&gt;</span> <span class="n">countries</span> <span class="o">&lt;-</span> <span class="n">st_read</span><span class="p">(</span><span class="n">dsn</span> <span class="o">=</span> <span class="s2">&quot;~/data/natural_earth2/ne_10m_admin_0_countries.shp&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">places</span> <span class="o">&lt;-</span> <span class="n">st_read</span><span class="p">(</span><span class="n">dsn</span> <span class="o">=</span> <span class="s2">&quot;~/data/natural_earth2/ne_10m_populated_places.shp&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_sf</span><span class="p">()</span>
</pre></div>
</div>
<p>Questo ci dà una semplice mappa del mondo:</p>
<img alt="../../_images/r_plot1.png" src="../../_images/r_plot1.png" />
<p>Quando un set di dati OGR viene letto in R in questo modo, otteniamo un oggetto che si comporta in molti modi come un data frame. Possiamo usare il campo <code class="docutils literal notranslate"><span class="pre">admin`</span></code> per sottoporre i dati del mondo e ottenere solo il Regno Unito:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; uk &lt;- countries[countries$admin == &#39;United Kingdom&#39;,]
&gt; ggplot(uk) + geom_sf()
</pre></div>
</div>
<img alt="../../_images/r_plot2.png" src="../../_images/r_plot2.png" />
<p>Questo sembra un po” schiacciato per chi vive qui, dato che abbiamo più familiarità con un sistema di coordinate centrato sulla nostra latitudine. Attualmente l’oggetto non ha un sistema di coordinate assegnato.</p>
<p>Hai bisogno di assegnare un SR all’oggetto prima di poterlo trasformare con la funzione sf::st_transform del pacchetto sf. Trasforma in EPSG:27700 che è il sistema di griglia Ordnance Survey of Great Britain:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">ukos</span> <span class="o">&lt;-</span> <span class="n">st_transform</span><span class="p">(</span><span class="n">uk</span><span class="p">,</span><span class="mi">27700</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">ukos</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_sf</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../../_images/r_plot2_1.png" src="../../_images/r_plot2_1.png" />
<p>Questo traccia la mappa di base dei dati trasformati. Ora vuoi aggiungere alcuni punti dal set di dati dei luoghi popolati. Anche in questo caso sottoinvesti i punti che vuoi e li trasformi in coordinate Ordnance Survey Grid Reference:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; ukpop &lt;- places[places$SOV0NAME == &#39;United Kingdom&#39;,]
&gt; ukpop &lt;- st_transform(ukpop,27700)
</pre></div>
</div>
<p>Aggiungi questi punti alla mappa di base, scalando la loro dimensione per la radice quadrata della popolazione (perché questo rende un simbolo con area proporzionale alla popolazione), imposta il colore al rosso e il carattere di tracciatura a un blob solido:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; ggplot() +
&gt;   geom_sf(data = ukos) +                                                          # add UK shape to the map
&gt;   geom_sf(data = ukpop,                                                           # add the Populated places
&gt;           aes(size = ukpop$POP_MAX/100000),                       # fix size of points (by area)
&gt;           colour = &#39;red&#39;, alpha = 1/5) +                          # set points colour and transparency
&gt;   coord_sf(crs = 27700, datum= sf::st_crs(27700),         # set a bounding box
&gt;            xlim = st_bbox(ukos[c(1,3)]),                          # for the map
&gt;            ylim = st_bbox(ukos[c(2,4)])
&gt;           ) +
&gt;   ggtitle(&#39;Uk Population centre sizes&#39;) +                         # set the map title
&gt;       theme(legend.position = &#39;bottom&#39;) +                         # Legend position
&gt;           scale_size_area(name = &#39;Population \nin 100K&#39;)  # 0 value means 0 area + legend title
</pre></div>
</div>
<p>e appare la tua immagine finale:</p>
<img alt="../../_images/r_plot3.png" src="../../_images/r_plot3.png" />
<div class="admonition tip">
<p class="admonition-title">Suggerimento</p>
<p>Per uscire da R, digita <code class="docutils literal notranslate"><span class="pre">q()</span></code> e premi invio. R ti chiederà se vuoi salvare il tuo spazio di lavoro come file immagine dei dati di R. Quando riavvii R da una directory con un file <code class="docutils literal notranslate"><span class="pre">.RData</span></code>, esso ripristinerà tutti i suoi dati da lì.</p>
</div>
</section>
<section id="vignettes">
<h2><a class="toc-backref" href="#id4">Vignette</a><a class="headerlink" href="#vignettes" title="Link a questa intestazione">¶</a></h2>
<p>In passato, la documentazione per i pacchetti R tendeva ad essere costituita da pagine di aiuto scritte in modo sommario per ogni funzione. Ora gli autori dei pacchetti sono incoraggiati a scrivere una “vignetta” come amichevole introduzione al pacchetto. Se esegui la funzione <code class="docutils literal notranslate"><span class="pre">vignette()</span></code> senza argomenti otterrai la lista di quelle vignette sul tuo sistema. Prova <code class="docutils literal notranslate"><span class="pre">vignette(&quot;sf1&quot;)</span></code> per un’introduzione leggermente tecnica al pacchetto R spatial.</p>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id5">E ora?</a><a class="headerlink" href="#what-next" title="Link a questa intestazione">¶</a></h2>
<p>Per informazioni generali su R, prova la <a class="reference external" href="https://cran.r-project.org/doc/manuals/R-intro.html">Introduzione a R</a> ufficiale o qualsiasi documentazione della pagina principale del <a class="reference external" href="https://www.r-project.org/">R Project</a>.</p>
<p>Per ulteriori informazioni sugli aspetti spaziali di R, il posto migliore per iniziare è probabilmente il <a class="reference external" href="https://cran.r-project.org/web/views/Spatial.html">R Spatial Task View</a></p>
<p>Potresti anche voler controllare la pagina <a class="reference external" href="https://www.rspatial.org">R-Spatial</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>