
<!DOCTYPE html>

<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guida rapida actinia &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="EOxServer" href="../overview/eoxserver_overview.html" />
    <link rel="prev" title="actinia" href="../overview/actinia_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://actinia.mundialis.de/"><img alt="../../_images/logo_actinia.png" class="align-right" src="../../_images/logo_actinia.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Questo progetto è incluso solo nel disco della macchina virtuale (VMDK) OSGeoLive</p>
</div>
<section id="actinia-quickstart">
<h1>Guida rapida actinia<a class="headerlink" href="#actinia-quickstart" title="Link a questa intestazione">¶</a></h1>
<p>Actinia è un’API REST open source per l’elaborazione scalabile, distribuita e ad alte prestazioni di dati geografici che utilizza principalmente <a class="reference external" href="https://grass.osgeo.org/">GRASS GIS</a> per compiti di calcolo. Actinia fornisce un’API REST per elaborare immagini satellitari, serie temporali di immagini satellitari, dati raster e vettoriali.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenuti</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction-to-ace-actinia-command-execution" id="id2">Introduzione a ace - esecuzione del comando actinia</a></p></li>
<li><p><a class="reference internal" href="#setup-your-environment" id="id3">Imposta il tuo ambiente</a></p></li>
<li><p><a class="reference internal" href="#access-sample-data" id="id4">Accesso ai dati campione</a></p>
<ul>
<li><p><a class="reference internal" href="#access-data-from-external-sources" id="id5">Accesso ai dati da fonti esterne</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inspect-the-rest-call-prior-to-submission" id="id6">Ispeziona la chiamata REST prima della sottomissione</a></p></li>
<li><p><a class="reference internal" href="#display-a-map-map-rendering" id="id7">Visualizza una mappa - rendering della mappa</a></p></li>
<li><p><a class="reference internal" href="#script-examples" id="id8">Script di esempio</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" id="id9">Esempio 1: calcolare la pendenza e l’aspetto e le statistiche univariate da un modello di elevazione</a></p></li>
<li><p><a class="reference internal" href="#example-2-orthophoto-image-segmentation-with-export" id="id10">Esempio 2: Segmentazione dell’immagine ortofoto con esportazione</a></p></li>
<li><p><a class="reference internal" href="#examples-for-persistent-processing" id="id11">Esempi di elaborazione persistente</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#things-to-try" id="id12">Cose da provare</a></p>
<ul>
<li><p><a class="reference internal" href="#install-on-osgeolive-vm-with-docker-compose" id="id13">Install on OSGeoLive VM with Docker Compose</a></p></li>
<li><p><a class="reference internal" href="#create-new-locations" id="id14">Crea nuove location</a></p></li>
<li><p><a class="reference internal" href="#install-grass-gis-addons-extensions" id="id15">Installa GRASS GIS addons (estensioni)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-next" id="id16">E ora?</a></p></li>
</ul>
</div>
<p>L’attinia può essere usata in diversi modi:</p>
<ul class="simple">
<li><p><cite>curl</cite> o strumenti simili a riga di comando</p></li>
<li><p>le estensioni per browser <cite>Postman</cite> o <cite>RESTman</cite></p></li>
<li><p>apri una sessione di GRASS GIS e usa lo strumento <cite>ace</cite> (actinia command execution)</p></li>
<li><p>altre interfacce per API REST</p></li>
</ul>
<p>In questa guida rapida, utilizziamo GRASS GIS per lanciare comodamente i comandi dalla sessione al server actinia (che a sua volta utilizza GRASS GIS). L’idea è quella di sviluppare rapidamente un flusso di lavoro a livello locale su piccole serie di dati per poi eseguirlo sul server.</p>
<section id="introduction-to-ace-actinia-command-execution">
<h2><a class="toc-backref" href="#id2">Introduzione a ace - esecuzione del comando actinia</a><a class="headerlink" href="#introduction-to-ace-actinia-command-execution" title="Link a questa intestazione">¶</a></h2>
<p>Lo strumento <code class="docutils literal notranslate"><span class="pre">ace</span></code> (<a class="reference external" href="https://github.com/mundialis/actinia_core/tree/master/scripts/README.md">dettagli</a>) permette l’esecuzione di un singolo comando GRASS GIS o di una lista di comandi GRASS GIS su un servizio REST actinia (<a class="reference external" href="https://actinia.mundialis.de/">https://actinia.mundialis.de/</a>). Inoltre fornisce la gestione del lavoro, la possibilità di elencare le località, i set di mappe e i layer di mappe a cui l’utente ha accesso, nonché la creazione e la cancellazione dei set di mappe.</p>
<p>Lo strumento <code class="docutils literal notranslate"><span class="pre">ace</span></code> deve essere eseguito in una sessione attiva di GRASS GIS. È installato con <code class="docutils literal notranslate"><span class="pre">g.extension</span> <span class="pre">extension=ace</span> <span class="pre">url=https://github.com/mundialis/ace</span></code>.</p>
<p>Tutti i comandi saranno eseguiti in maniera predefinita in un database <strong>effimero</strong>. Quindi, il risultato deve essere esportato utilizzando i comandi aumentati di GRASS.</p>
<p>L’opzione <code class="docutils literal notranslate"><span class="pre">mapset=MAPSET_NAME</span></code> permette l’esecuzione di comandi nel database utente persistente. Può essere usata con l’opzione <code class="docutils literal notranslate"><span class="pre">location=LOCATION_NAME</span></code>.</p>
</section>
<section id="setup-your-environment">
<h2><a class="toc-backref" href="#id3">Imposta il tuo ambiente</a><a class="headerlink" href="#setup-your-environment" title="Link a questa intestazione">¶</a></h2>
<p>Assicurati di eseguire i seguenti comandi in una sessione di GRASS GIS.</p>
<p>L’utente deve impostare le seguenti variabili ambientali per specificare il server actinia e le credenziali:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># set credentials and REST server URL</span>
<span class="nb">export</span> <span class="nv">ACTINIA_USER</span><span class="o">=</span><span class="s1">&#39;demouser&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_PASSWORD</span><span class="o">=</span><span class="s1">&#39;gu3st!pa55w0rd&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_URL</span><span class="o">=</span><span class="s1">&#39;https://actinia.mundialis.de/latest&#39;</span>
</pre></div>
</div>
</section>
<section id="access-sample-data">
<h2><a class="toc-backref" href="#id4">Accesso ai dati campione</a><a class="headerlink" href="#access-sample-data" title="Link a questa intestazione">¶</a></h2>
<p>Gli insiemi di dati selezionati sono disponibili per l’utente demo. Per elencare le posizioni a cui si ha accesso, eseguire</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -l
<span class="o">[</span><span class="s1">&#39;latlong_wgs84&#39;</span>, <span class="s1">&#39;ECAD&#39;</span>, <span class="s1">&#39;nc_spm_08&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Il seguente comando elenca i set di mappe della posizione corrente nella sessione attiva di GRASS GIS (nc_spm_08):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># running ace in the &quot;nc_spm_08&quot; location</span>
<span class="c1"># (the current location name is propagated to the server):</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> -m
<span class="o">[</span><span class="s1">&#39;PERMANENT&#39;</span>, <span class="s1">&#39;landsat&#39;</span>, <span class="s1">&#39;modis_lst&#39;</span><span class="o">]</span>
</pre></div>
</div>
<section id="access-data-from-external-sources">
<h3><a class="toc-backref" href="#id5">Accesso ai dati da fonti esterne</a><a class="headerlink" href="#access-data-from-external-sources" title="Link a questa intestazione">¶</a></h3>
<p>I comandi di GRASS GIS possono essere aumentati con estensioni specifiche di actinia. L’operatore <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> può essere specificato per un parametro in ingresso per importare una risorsa situata sul web e per specificare l’esportazione di un parametro in uscita.</p>
<p>È importante che il nome della posizione locale e del mapset corrisponda a quello del server REST di actinia.</p>
<p>I set di dati attualmente disponibili sono (organizzati per proiezioni):</p>
<ul class="simple">
<li><p>Serie di dati campione della Carolina del Nord (NC State-Plane metric CRS, EPSG: 3358):</p>
<ul>
<li><p>cartografia di base (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/PERMANENT</span></code>; fonte: <a class="reference external" href="https://grassbook.org/datasets/datasets-3rd-edition/">https://grassbook.org/datasets/datasets-3rd-edition/</a>)</p></li>
<li><p>Landsat subscenes (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/landsat</span></code>; source:
<a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>)</p></li>
</ul>
</li>
<li><p>Posizione latitudine-longitudine (LatLong WGS84, EPSG:4326):</p>
<ul>
<li><p>empty (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/PERMANENT/</span></code>)</p></li>
<li><p>16-days NDVI, MOD13C1, V006, CMG 0.05 deg res.
(<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/modis_ndvi_global/</span></code>; source:
<a class="reference external" href="https://lpdaac.usgs.gov/products/mod13c1v006/">https://lpdaac.usgs.gov/products/mod13c1v006/</a>)</p></li>
<li><p>LST growing degree days asia 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_gdd_2017/</span></code>; fonte: <a class="reference external" href="https://www.mundialis.de/en/temperature-data/">https://www.mundialis.de/en/temperature-data/</a>)</p></li>
<li><p>LST giorni tropicali asia 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_tropical_2017/</span></code>)</p></li>
<li><p>LST temperatura giornaliera asia 2017, incluso min, max e avg (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_lst_daily_2017/</span></code>)</p></li>
</ul>
</li>
<li><p>Europa (EU LAEA CRS, EPSG:3035):</p>
<ul>
<li><p>EU DEM 25m V1.1 (<code class="docutils literal notranslate"><span class="pre">eu_laea/PERMANENT/</span></code>; source:
<a class="reference external" href="https://land.copernicus.eu/imagery-in-situ/eu-dem">https://land.copernicus.eu/imagery-in-situ/eu-dem</a>)</p></li>
<li><p>CORINE Landcover 2012, g100_clc12_V18_5 (<code class="docutils literal notranslate"><span class="pre">eu_laea/corine_2012/</span></code>;
source:
<a class="reference external" href="https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012">https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012</a>)</p></li>
</ul>
</li>
<li><p>World Mollweide (EPSG 54009):</p>
<ul>
<li><p>GHS_POP_GPW42015_GLOBE_R2015A_54009_250_v1_0
(<code class="docutils literal notranslate"><span class="pre">world_mollweide/pop_jrc</span></code>; source:
<a class="reference external" href="https://ghsl.jrc.ec.europa.eu/ghs_pop.php">https://ghsl.jrc.ec.europa.eu/ghs_pop.php</a>)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="inspect-the-rest-call-prior-to-submission">
<h2><a class="toc-backref" href="#id6">Ispeziona la chiamata REST prima della sottomissione</a><a class="headerlink" href="#inspect-the-rest-call-prior-to-submission" title="Link a questa intestazione">¶</a></h2>
<p>Per generare la richiesta JSON della catena di processo di actinia è sufficiente aggiungere il flag <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.slope.aspect elevation=elevation slope=myslope&quot;</span> -d
</pre></div>
</div>
</section>
<section id="display-a-map-map-rendering">
<h2><a class="toc-backref" href="#id7">Visualizza una mappa - rendering della mappa</a><a class="headerlink" href="#display-a-map-map-rendering" title="Link a questa intestazione">¶</a></h2>
<p>È molto facile (e veloce) visualizzare una mappa:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># check amount of pixels, just FYI</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info globcover@globcover&quot;</span>
<span class="c1"># render the map ... 7 billion pixels</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">render_raster</span><span class="o">=</span><span class="s2">&quot;globcover@globcover&quot;</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<img alt="Mappa ESA Globcover mostrata da actinia" src="../../_images/esa_globcover_rendered_by_ace.png" />
<figcaption>
<p><span class="caption-text">Mappa ESA Globcover mostrata da actinia</span><a class="headerlink" href="#id1" title="Link a questa immagine">¶</a></p>
</figcaption>
</figure>
<p>L’elaborazione effimera è l’approccio predefinito di elaborazione di actinia. I comandi vengono eseguiti in un mapset effimero che verrà rimosso dopo l’elaborazione. È possibile esportare l’output dei moduli GIS di GRASS per memorizzare il risultato del calcolo per il download e ulteriori analisi. Attualmente sono supportati i seguenti formati di esportazione:</p>
<ul class="simple">
<li><p>raster: <code class="docutils literal notranslate"><span class="pre">COG</span></code>, <code class="docutils literal notranslate"><span class="pre">GTiff</span></code></p></li>
<li><p>vettore: <code class="docutils literal notranslate"><span class="pre">GPKG</span></code>, <code class="docutils literal notranslate"><span class="pre">GML</span></code>, <code class="docutils literal notranslate"><span class="pre">GeoJSON</span></code>, <code class="docutils literal notranslate"><span class="pre">ESRI_Shapefile</span></code></p></li>
<li><p>tabelle: <code class="docutils literal notranslate"><span class="pre">CSV</span></code>, <code class="docutils literal notranslate"><span class="pre">TXT</span></code></p></li>
</ul>
</section>
<section id="script-examples">
<h2><a class="toc-backref" href="#id8">Script di esempio</a><a class="headerlink" href="#script-examples" title="Link a questa intestazione">¶</a></h2>
<section id="example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model">
<h3><a class="toc-backref" href="#id9">Esempio 1: calcolare la pendenza e l’aspetto e le statistiche univariate da un modello di elevazione</a><a class="headerlink" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" title="Link a questa intestazione">¶</a></h3>
<p>I seguenti comandi (da memorizzare in uno script ed eseguire con <code class="docutils literal notranslate"><span class="pre">ace</span></code>) importano un layer raster da una fonte internet come mappa raster <code class="docutils literal notranslate"><span class="pre">elev</span></code>, impostano la regione di calcolo sulla mappa e calcolano la pendenza. Ulteriori informazioni sul layer sono richieste con <code class="docutils literal notranslate"><span class="pre">r.info</span></code>.</p>
<p>Memorizza il seguente script come file di testo <code class="docutils literal notranslate"><span class="pre">ace_dtm_statistics.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
g.region <span class="nv">raster</span><span class="o">=</span>elev@https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif -ap
<span class="c1"># Compute univariate statistics</span>
r.univar <span class="nv">map</span><span class="o">=</span>elev
r.info elev
<span class="c1"># Compute the slope of the imported map and mark it for export as a COG file (Cloud Optimized GeoTIFF)</span>
r.slope.aspect <span class="nv">elevation</span><span class="o">=</span>elev <span class="nv">slope</span><span class="o">=</span>slope_elev+COG
r.info slope_elev
</pre></div>
</div>
<p>Salava lo script nel file di testo in <code class="docutils literal notranslate"><span class="pre">/tmp/ace_dtm_statistics.sh</span></code> ed esegui lo script salvato come</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace --location nc_spm_08 --script ace_dtm_statistics.sh
</pre></div>
</div>
<p>I risultati (messaggi, statistiche, file) sono forniti come risorse REST.</p>
<p>Per generare la richiesta JSON della catena di processo di actinia è sufficiente aggiungere il flag <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -d <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>L’output dovrebbe essere simile a questo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;flags&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;import_descr&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;percentile&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;90&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;separator&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pipe&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elevation&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;degrees&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;precision&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FCELL&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;min_slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;export&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COG&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="example-2-orthophoto-image-segmentation-with-export">
<h3><a class="toc-backref" href="#id10">Esempio 2: Segmentazione dell’immagine ortofoto con esportazione</a><a class="headerlink" href="#example-2-orthophoto-image-segmentation-with-export" title="Link a questa intestazione">¶</a></h3>
<p>Memorizza il seguente script come file di testo <code class="docutils literal notranslate"><span class="pre">/tmp/ace_segmentation.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="c1"># we apply a importer trick for the import of multi-band GeoTIFFs:</span>
<span class="c1"># install with: g.extension importer url=https://github.com/mundialis/importer</span>
importer <span class="nv">raster</span><span class="o">=</span>ortho2010@https://apps.mundialis.de/workshops/osgeo_ireland2017/north_carolina/ortho2010_t792_subset_20cm.tif
<span class="c1"># The importer has created three new raster maps, one for each band in the geotiff file</span>
<span class="c1"># stored them in an image group</span>
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.1
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.2
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.3
<span class="c1"># Set the region and resolution</span>
g.region <span class="nv">raster</span><span class="o">=</span>ortho2010.1 <span class="nv">res</span><span class="o">=</span><span class="m">1</span> -p
<span class="c1"># Note: the RGB bands are organized as a group</span>
<span class="c1"># export as a as COG file (Cloud Optimized GeoTIFF)</span>
i.segment <span class="nv">group</span><span class="o">=</span>ortho2010 <span class="nv">threshold</span><span class="o">=</span><span class="m">0</span>.25 <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+COG <span class="nv">goodness</span><span class="o">=</span>ortho2010_seg_25_fit+COG
<span class="c1"># Finally vectorize segments with r.to.vect and export as a GeoJSON file</span>
r.to.vect <span class="nv">input</span><span class="o">=</span>ortho2010_segment_25 <span class="nv">type</span><span class="o">=</span>area <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+GeoJSON
</pre></div>
</div>
<p>Esegui lo script salvato in un file di testo come</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_segmentation.sh&quot;</span>
</pre></div>
</div>
<p>I risultati (messaggi, statistiche, file) sono forniti come risorse REST.</p>
</section>
<section id="examples-for-persistent-processing">
<h3><a class="toc-backref" href="#id11">Esempi di elaborazione persistente</a><a class="headerlink" href="#examples-for-persistent-processing" title="Link a questa intestazione">¶</a></h3>
<p>I comandi di GRASS GIS possono essere eseguiti in un database persistente specifico dell’utente. L’utente deve creare un mapset in una posizione esistente. Si può accedere a questo mapset tramite <code class="docutils literal notranslate"><span class="pre">ace</span></code>. Tutti i risultati dell’elaborazione dei comandi eseguiti in questo mapset saranno memorizzati in modo persistente. Siate consapevoli che l’elaborazione verrà eseguita in un database effimero che verrà spostato nella memoria persistente usando il nome corretto dopo l’elaborazione.</p>
<p>Per creare un nuovo mapset nella posizione <strong>nc_spm_08</strong> con il nome <strong>test_mapset</strong> deve essere eseguito il seguente comando</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Esegui i comandi dello script statistico nel nuovo mapset persistente</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>Mostra tutte le mappe raster che sono state create con lo script in test_mapset</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_commmand</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
</pre></div>
</div>
<p>Mostra informazioni sulla mappa raster elev e slope_elev</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
<p>Cancella il test_mapset (controlla sempre due volte i nomi quando si cancella)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">delete_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Se la sessione attiva di GRASS GIS ha nomi di località/mappe identici, allora si può usare un alias per evitare l’opzione persistente in ogni singola chiamata di comando:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">acp</span><span class="o">=</span><span class="s2">&quot;ace --persistent `g.mapset -p`&quot;</span>
</pre></div>
</div>
<p>Assumi che nella sessione attiva di GRASS GIS la località corrente sia <strong>nc_spm_08</strong> e il mapset corrente sia <strong>test_mapset</strong>. Allora i comandi di cui sopra possono essere eseguiti nel modo seguente:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id12">Cose da provare</a><a class="headerlink" href="#things-to-try" title="Link a questa intestazione">¶</a></h2>
<section id="install-on-osgeolive-vm-with-docker-compose">
<h3><a class="toc-backref" href="#id13">Install on OSGeoLive VM with Docker Compose</a><a class="headerlink" href="#install-on-osgeolive-vm-with-docker-compose" title="Link a questa intestazione">¶</a></h3>
<p>Requirements: docker and docker-compose (already available in OSGeoLive VM version)</p>
<p>To build and deploy actinia, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mundialis/actinia_core.git
<span class="nb">cd</span> actinia_core
docker-compose -f docker/docker-compose.yml up
</pre></div>
</div>
<p>Now you have a running actinia instance locally! Check with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl http://127.0.0.1:8088/api/v3/version
</pre></div>
</div>
</section>
<section id="create-new-locations">
<h3><a class="toc-backref" href="#id14">Crea nuove location</a><a class="headerlink" href="#create-new-locations" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (note: the &quot;demouser&quot; is not enabled for this)</span>
<span class="c1">#</span>
<span class="c1"># create new location</span>
ace <span class="nv">create_location</span><span class="o">=</span><span class="s2">&quot;mylatlon 4326&quot;</span>
<span class="c1"># create new mapset within location</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;mylatlon&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;user1&quot;</span>
</pre></div>
</div>
</section>
<section id="install-grass-gis-addons-extensions">
<h3><a class="toc-backref" href="#id15">Installa GRASS GIS addons (estensioni)</a><a class="headerlink" href="#install-grass-gis-addons-extensions" title="Link a questa intestazione">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (requires elevated user privileges)</span>
<span class="c1">#</span>
<span class="c1"># list existing addons, see also</span>
<span class="c1"># https://grass.osgeo.org/grass-stable/manuals/addons/</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension -l&quot;</span>

<span class="c1"># install machine learning addon r.learn.ml2</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension extension=\&quot;r.learn.ml2\&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id16">E ora?</a><a class="headerlink" href="#what-next" title="Link a questa intestazione">¶</a></h2>
<ul class="simple">
<li><p>Visita il sito web di actinia: <a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a></p></li>
<li><p>actinia tutorial: <a class="reference external" href="https://neteler.gitlab.io/actinia-introduction">https://neteler.gitlab.io/actinia-introduction</a></p></li>
<li><p>Ulteriori letture: Neteler, M., Gebbert, S., Tawalika, C., Bettge, A., Benelcadi, H., Löw, F., Adams, T, Paulsen, H. (2019). Actinia: cloud based geoprocessing. In Proc. of the 2019 conference on Big Data from Space (BiDS’2019) (pp. 41-44). EUR 29660 EN, Publications Office of the European Union 5, Luxembourg: P. Soille, S. Loekken, and S. Albani (Eds.). (<a class="reference external" href="https://zenodo.org/record/2631917">DOI</a>)</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>