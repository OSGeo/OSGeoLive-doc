
<!DOCTYPE html>

<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guida rapida pygeoapi &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Zoo Project" href="../overview/zoo-project_overview.html" />
    <link rel="prev" title="pygeoapi" href="../overview/pygeoapi_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://pygeoapi.io/"><img alt="../../_images/logo_pygeoapi.png" class="align-right" src="../../_images/logo_pygeoapi.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<section id="pygeoapi-quickstart">
<h1>Guida rapida pygeoapi<a class="headerlink" href="#pygeoapi-quickstart" title="Link a questa intestazione">¶</a></h1>
<p>pygeoapi è uno strumento per pubblicare in modo veloce e semplice servizi OGC Open API sul web. È costruito sulle potenti librerie open source fornite dalla comunità (geo)python</p>
<p>In questa guida rapida ti guideremo nella configurazione ed uso del software in qualche caso specifico. ungo la strada ci impegneremo con alcuni software correlati, perché pygeoapi è un prodotto che è tipicamente combinato con altre componenti per soddisfare un caso aziendale.</p>
<section id="prior-knowledge">
<h2>Conoscenza preliminare<a class="headerlink" href="#prior-knowledge" title="Link a questa intestazione">¶</a></h2>
<p>pygeoapi è un’applicazione web scritta in Python per il dominio spaziale, quindi è necessario essere a conoscenza dei concetti delle applicazioni web e degli aspetti geospaziali come i formati grid e vettoriali, gli standard OGC e i sistemi di proiezione. La conoscenza di Python è raccomandata, anche se è possibile farne a meno eseguendo l’applicazione da OSGeoLive.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenuti</p>
<ul class="simple">
<li><p><a class="reference internal" href="#configure-and-start-the-service" id="id1">Configura e avvia il servizio</a></p></li>
<li><p><a class="reference internal" href="#configure-new-service" id="id2">Configura un nuovo servizio</a></p></li>
<li><p><a class="reference internal" href="#using-a-web-browser-to-query-the-api" id="id3">Usa un browser web per interrogare l’API</a></p></li>
<li><p><a class="reference internal" href="#using-oapi-features-in-desktop-gis" id="id4">Usa le Funzionalità OAPI nel Desktop GIS</a></p></li>
</ul>
</div>
<section id="configure-and-start-the-service">
<h3><a class="toc-backref" href="#id1">Configura e avvia il servizio</a><a class="headerlink" href="#configure-and-start-the-service" title="Link a questa intestazione">¶</a></h3>
<ol class="arabic">
<li><p>Dal menu di avvio, selezionare <span class="menuselection">Structure ‣ osgeolive ‣ appmenupath ‣ pygeoapi</span>. L’applicazione aprirà una pagina web all’indirizzo <a class="reference external" href="http://localhost:5000">http://localhost:5000</a></p></li>
<li><p>Spostatevi nella cartella <code class="docutils literal notranslate"><span class="pre">/usr/local/share/pygeoapi</span></code> e qui trovate un file <code class="docutils literal notranslate"><span class="pre">pygeoapi-config.yml</span></code>. Questo file contiene la configurazione del servizio.</p></li>
<li><p>Aprire il file con <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">pygeoapi-config.yml</span></code>.</p></li>
<li><p>Aggiorna alcuni parametri nel file, come Titolo e Autore. E salva il file.</p></li>
<li><p>Riavvia il servizio, per esempio chiudendo il terminale e avviando di nuovo il servizio</p>
<a class="reference internal image-reference" href="../../_images/pygeoapi_screenshot.png"><img alt="../../_images/pygeoapi_screenshot.png" src="../../_images/pygeoapi_screenshot.png" style="width: 280.0px; height: 138.6px;" /></a>
</li>
</ol>
</section>
<section id="configure-new-service">
<h3><a class="toc-backref" href="#id2">Configura un nuovo servizio</a><a class="headerlink" href="#configure-new-service" title="Link a questa intestazione">¶</a></h3>
<p>Ora distribuisci un dataset vettoriale in pygeoapi ed esponi gli elementi come OGC API - Features. OGC API - Features è uno standard di OGC per esporre gli elementi vettoriali come webservice. OGC API - Features è l’alternativa OpenAPI a WFS.</p>
<p>pygeoapi supporta una vasta gamma di backend da usare come sorgente vettoriale, ad esempio geopackage, PostGIS, Elasticsearch, WFS, ecc. Tramite il provider GDAL OGR si può aggiungere un insieme quasi illimitato di altre fonti vettoriali.</p>
<p>I set di dati interessanti da esporre come OAPI-Features consistono in dati del mondo reale che hanno attributi multipli e collegamenti ad altre risorse. OSGeoLive contiene un certo numero di set di dati che puoi usare. Un esempio è <code class="docutils literal notranslate"><span class="pre">/var/www/html/openlayers/examples/data/geojson/countries.geojson</span></code>. Puoi configurarlo in pygeoapi usando il provider GeoJSON.</p>
<ol class="arabic simple">
<li><p>Scarica il file GeoJSON e mettilo nella cartella test/data.</p></li>
<li><p>Aggiorna pygeoapi-config.yml per aggiungere <code class="docutils literal notranslate"><span class="pre">paesi</span></code> come nuova collezione a pygeoapi (inserire lo snippet sotto tra le altre collezioni. Attenzione alla nidificazione, la nidificazione è importante nella sintassi YAML).</p></li>
<li><p>Riavvia pygeoapi</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">countries</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span><span class="w"></span>
<span class="w">   </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Countries</span><span class="w"></span>
<span class="w">   </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Countries of the world</span><span class="w"></span>
<span class="w">   </span><span class="nt">keywords</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">industry</span><span class="w"></span>
<span class="w">   </span><span class="nt">links</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span><span class="w"></span>
<span class="w">        </span><span class="nt">rel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canonical</span><span class="w"></span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">information</span><span class="w"></span>
<span class="w">        </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://openlayers.org</span><span class="w"></span>
<span class="w">        </span><span class="nt">hreflang</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en-US</span><span class="w"></span>
<span class="w">   </span><span class="nt">extents</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">spatial</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-180</span><span class="p p-Indicator">,</span><span class="nv">-90</span><span class="p p-Indicator">,</span><span class="nv">180</span><span class="p p-Indicator">,</span><span class="nv">90</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">   </span><span class="nt">providers</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoJSON</span><span class="w"></span>
<span class="w">        </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/www/html/openlayers/examples/data/geojson/countries.geojson</span><span class="w"></span>
<span class="w">        </span><span class="nt">id_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="w"></span>
</pre></div>
</div>
<p>Verifica che la collezione sia disponibile tramite il tuo browser all’indirizzo <a class="reference external" href="http://localhost:5000/collections/countries">http://localhost:5000/collections/countries</a></p>
</section>
<section id="using-a-web-browser-to-query-the-api">
<h3><a class="toc-backref" href="#id3">Usa un browser web per interrogare l’API</a><a class="headerlink" href="#using-a-web-browser-to-query-the-api" title="Link a questa intestazione">¶</a></h3>
<p>Ora che hai il servizio disponibile puoi interrogarlo usando vari strumenti client. Ogni elemento della collezione è disponibile in formati comuni, come HTML, GeoJSON e GML. Per iniziare puoi usare un browser web per navigare attraverso il servizio. Dal sito <a class="reference external" href="http://localhost:5000/collections/countries">http://localhost:5000/collections/countries</a>, si può scendere fino ai singoli elementi. Il servizio rileverà automaticamente (accetta l’intestazione) che stai usando un browser web e restituirà la rappresentazione HTML degli elementi. Nota nell’angolo in alto a destra i link espliciti per sovrascrivere l’intestazione di accettazione e richiedere rappresentazioni specifiche dell’elemento (?f=geojson).</p>
<p>Ogni Open API ha una pagina di documentazione interattiva su <a class="reference external" href="http://localhost:5000/openapi">http://localhost:5000/openapi</a>. In questa pagina web interattiva puoi leggere i vari metodi del servizio, ma anche interagire direttamente con essi tramite moduli web.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/openapidoc.png"><img alt="../../_images/openapidoc.png" src="../../_images/openapidoc.png" style="width: 1009.4px; height: 368.2px;" /></a>
</div></blockquote>
<p>Le API OGC sono state sviluppate tenendo conto delle «best practices dei dati spaziali sul web &lt;<a class="reference external" href="https://w3c.github.io/sdw/bp/#bp-summary">https://w3c.github.io/sdw/bp/#bp-summary</a>&gt;`_. Un aspetto importante di queste best practice è l’ottimizzazione per i motori di ricerca. Pygeoapi aggiunge alcune ottimizzazioni di crawl oltre ai requisiti degli standard Open API; i metadati delle collezioni possono essere scansionati dai motori di ricerca in modo strutturato, con l’obiettivo di rendere le collezioni scopribili in strumenti come Google Dataset Search. Per valutare le capacità dei dati strutturati è possibile utilizzare gli strumenti Structured Data Testing di Yandex o Google. Copia il sorgente html della pagina di raccolta dei paesi (o l’url di una pagina di raccolta di un’istanza pygeoapi online) in uno strumento di test dei dati strutturati e valuta quali dati strutturati lo strumento è in grado di estrarre da esso. Il motore di ricerca userà queste informazioni nel suo indice dei set di dati.</p>
</section>
<section id="using-oapi-features-in-desktop-gis">
<h3><a class="toc-backref" href="#id4">Usa le Funzionalità OAPI nel Desktop GIS</a><a class="headerlink" href="#using-oapi-features-in-desktop-gis" title="Link a questa intestazione">¶</a></h3>
<p>In questa guida rapida usa QGIS per interrogare il servizio, ma un flusso di lavoro simile è possibile in altri strumenti GIS, per esempio ArcGIS, FME, OpenLayers.</p>
<p>A partire da QGIS 3.14 è possibile aggiungere un layer OAPI-Features come layer vettoriale. Dal menu <code class="docutils literal notranslate"><span class="pre">aggiungi</span> <span class="pre">layer</span></code> seleziona <code class="docutils literal notranslate"><span class="pre">Aggiungi</span> <span class="pre">layer</span> <span class="pre">WFS</span> <span class="pre">/</span> <span class="pre">OAPI-Features</span></code>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/qgis-wfs.png"><img alt="../../_images/qgis-wfs.png" src="../../_images/qgis-wfs.png" style="width: 277.9px; height: 243.6px;" /></a>
</div></blockquote>
<p>Nella finestra che si apre crea una nuova connessione, inserisci l’url del servizio <a class="reference external" href="http://localhost:5000">http://localhost:5000</a>.</p>
<p>Fai clic su Ok, e poi <code class="docutils literal notranslate"><span class="pre">connetti</span></code> per caricare le collezioni disponibili nel servizio.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/qgis-layers.png"><img alt="../../_images/qgis-layers.png" src="../../_images/qgis-layers.png" style="width: 280.0px; height: 139.29999999999998px;" /></a>
</div></blockquote>
<p>Seleziona la collezione <code class="docutils literal notranslate"><span class="pre">Paesi</span></code> e clicca su “Aggiungi” per aggiungere il layer nella mappa QGIS.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>