
<!DOCTYPE html>

<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guida rapida Leaflet &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Indice" href="../genindex.html" />
    <link rel="search" title="Cerca" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="deegree" href="../overview/deegree_overview.html" />
    <link rel="prev" title="Leaflet" href="../overview/leaflet_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://leafletjs.com"><img alt="../../_images/logo_leaflet.png" class="align-right" src="../../_images/logo_leaflet.png" /></a>
<section id="leaflet-quickstart">
<h1><a class="toc-backref" href="#id1">Guida rapida Leaflet</a><a class="headerlink" href="#leaflet-quickstart" title="Link a questa intestazione">¶</a></h1>
<p>Leaflet è una libreria JavaScript per mappe interattive basate su browser e mobile-friendly. È leggera, ma ha tutte le caratteristiche di cui la maggior parte degli sviluppatori ha bisogno per le mappe online. Leaflet è progettata con semplicità, prestazioni e usabilità in mente.</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contenuti</p>
<ul class="simple">
<li><p><a class="reference internal" href="#leaflet-quickstart" id="id1">Guida rapida Leaflet</a></p>
<ul>
<li><p><a class="reference internal" href="#running" id="id2">In esecuzione</a></p></li>
<li><p><a class="reference internal" href="#preparing-your-page" id="id3">Prepara la tua pagina</a></p></li>
<li><p><a class="reference internal" href="#setting-up-the-map" id="id4">Impostazione della Mappa</a></p></li>
<li><p><a class="reference internal" href="#markers-circles-and-polygons" id="id5">Simboli, cerchi e poligoni</a></p></li>
<li><p><a class="reference internal" href="#working-with-popups" id="id6">Lavorare con i popup</a></p></li>
<li><p><a class="reference internal" href="#dealing-with-events" id="id7">Gestire gli eventi</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id8">E ora?</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="running">
<h2><a class="toc-backref" href="#id2">In esecuzione</a><a class="headerlink" href="#running" title="Link a questa intestazione">¶</a></h2>
<p>Prima di eseguire questa guida rapida è necessario avviare TileStache. Su OSGeoLive è possibile trovarlo in <strong>GeospatialSpatial ToolsStart Mapnik &amp; TileStache</strong>. Questo fornirà i tasselli di sfondo che verranno utilizzati in questa demo.</p>
<p>Vedi l”<a class="reference external" href="http://localhost/leaflet-demo.html">esempio</a></p>
<div class="admonition tip">
<p class="admonition-title">Suggerimento</p>
<p>Se stai leggendo questa guida rapida al di fuori di OSGeoLive potresti preferire leggere la demo originale su: <a class="reference external" href="https://leafletjs.com/examples/quick-start/">https://leafletjs.com/examples/quick-start/</a>, poiché questa demo usa tilestache su OSGeoLive.</p>
</div>
</section>
<section id="preparing-your-page">
<h2><a class="toc-backref" href="#id3">Prepara la tua pagina</a><a class="headerlink" href="#preparing-your-page" title="Link a questa intestazione">¶</a></h2>
<p>Prima di scrivere qualsiasi codice per la mappa, devi fare i seguenti passi di preparazione nella tua pagina:</p>
<ul class="simple">
<li><p>Includi i file CSS di Leaflet nella sezione di testa del tuo documento</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.css&quot;</span> <span class="p">/&gt;</span>
<span class="cm">&lt;!--[if lte IE 8]&gt;</span>
<span class="cm">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/leaflet/leaflet.ie.css&quot; /&gt;</span>
<span class="cm">&lt;![endif]--&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Includi il file JavaScript di Leaflet:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/leaflet/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>metti un elemento <strong>div</strong> con un certo <strong>id</strong> dove vuoi che sia la tua mappa:</p></li>
</ul>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Assicurati che il contenitore della mappa abbia un’altezza definita, per esempio impostandola nei CSS:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">#</span><span class="nn">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="kt">px</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Ora sei pronto per inizializzare la mappa e fare qualcosa con essa.</p>
</section>
<section id="setting-up-the-map">
<h2><a class="toc-backref" href="#id4">Impostazione della Mappa</a><a class="headerlink" href="#setting-up-the-map" title="Link a questa intestazione">¶</a></h2>
<p>Crea una mappa dell’Africa orientale con l’indicazione della conferenza FOSS4G 2018. Per prima cosa inizializza la mappa e imposta la sua vista sulle coordinate geografiche che hai scelto e su un livello di zoom:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">44.43743</span><span class="p">,</span><span class="w"> </span><span class="mf">26.104</span><span class="p">],</span><span class="w"> </span><span class="mf">15</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Per impostazione predefinita (dato che non hai passato alcuna opzione durante la creazione dell’istanza della mappa), tutte le interazioni con il mouse e il tocco sulla mappa sono abilitate, e ha controlli di zoom e attribuzione.</p>
<p>Nota che la chiamata setView restituisce anche l’oggetto map - la maggior parte dei metodi Leaflet si comportano in questo modo quando non restituiscono un valore esplicito, il che permette una comoda concatenazione di metodi simili a jQuery.</p>
<p>Poi aggiungerai un layer di tasselli alla tua mappa. In questo caso userai le immagini dei tasselli fornite da TileStache sul dvd live. Nota che l’uso di mappe di sfondo più belle come openstreetmap risulterà in un’esperienza utente molto migliore.</p>
<p>La creazione di un layer di tasselli di solito comporta l’impostazione del modello URL per le immagini del tassello, il testo di attribuzione e il livello massimo di zoom del layer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://localhost:8012/example/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png,</span><span class="si">{}</span><span class="s1">).addTo(map);</span>
</pre></div>
</div>
<p>Se hai un accesso online potresti voler usare una tilemap più bella come sfondo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,{</span><span class="n">maxZoom</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span> <span class="n">attribution</span><span class="p">:</span> <span class="s1">&#39;© &lt;a href=&quot;https://www.openstreetmap.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="nb">map</span><span class="p">);</span>
</pre></div>
</div>
<p>Assicurati che tutto il codice sia chiamato dopo l’inclusione di <strong>div</strong> e <strong>leaflet.js</strong>. Ecco fatto! Ora hai una mappa Leaflet funzionante.</p>
<p>Vale la pena notare che Leaflet è «provider-agnostic», il che significa che non impone una particolare scelta di provider per i tasselli, e non contiene nemmeno una singola linea di codice specifica per il provider, quindi sei libero di usare altri provider se ne hai bisogno.</p>
</section>
<section id="markers-circles-and-polygons">
<h2><a class="toc-backref" href="#id5">Simboli, cerchi e poligoni</a><a class="headerlink" href="#markers-circles-and-polygons" title="Link a questa intestazione">¶</a></h2>
<p>Oltre ai layer dei tasselli, puoi facilmente aggiungere altre cose alla tua mappa, inclusi segni, polilinee, poligoni, cerchi e popup. Aggiungi un segno:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([</span><span class="mf">44.437</span><span class="w"> </span><span class="p">,</span><span class="mf">26.104</span><span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Aggiungere un cerchio è la stessa cosa (tranne che per specificare il raggio in metri come secondo argomento), ma permette di controllare come appare passando le opzioni come ultimo argomento quando si crea l’oggetto:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">circle</span><span class="p">([</span><span class="mf">44.435</span><span class="p">,</span><span class="w"> </span><span class="mf">26.11</span><span class="p">],</span><span class="w"> </span><span class="mf">250</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nx">fillColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;#f03&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nx">fillOpacity</span><span class="o">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w"></span>
<span class="p">}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Aggiungere un poligono è altrettanto facile:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">polygon</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">polygon</span><span class="p">([</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="mf">44.433</span><span class="p">,</span><span class="w"> </span><span class="mf">26.102</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="mf">44.442</span><span class="p">,</span><span class="w"> </span><span class="mf">26.095</span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="mf">44.436</span><span class="p">,</span><span class="w"> </span><span class="mf">26.093</span><span class="p">]</span><span class="w"></span>
<span class="p">]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="working-with-popups">
<h2><a class="toc-backref" href="#id6">Lavorare con i popup</a><a class="headerlink" href="#working-with-popups" title="Link a questa intestazione">¶</a></h2>
<p>I popup sono di solito usati quando si desidera allegare alcune informazioni ad un particolare oggetto su una mappa. Leaflet ha una scorciatoia molto comoda per questo:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">()</span><span class="w"></span>
<span class="w">   </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">([</span><span class="mf">44.437</span><span class="p">,</span><span class="w"> </span><span class="mf">26.104</span><span class="p">])</span><span class="w"></span>
<span class="w">   </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;I am a standalone popup.&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Qui usa <strong>openOn</strong> invece di <strong>addTo</strong> perché gestisce la chiusura automatica di un popup precedentemente aperto quando se ne apre uno nuovo, il che è buono per l’usabilità.</p>
</section>
<section id="dealing-with-events">
<h2><a class="toc-backref" href="#id7">Gestire gli eventi</a><a class="headerlink" href="#dealing-with-events" title="Link a questa intestazione">¶</a></h2>
<p>Ogni volta che succede qualcosa in Leaflet, per esempio l’utente clicca su un segno o lo zoom della mappa cambia, l’oggetto corrispondente invia un evento che puoi sottoscrivere con una funzione. Questo ti permette di reagire all’interazione dell’utente:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Ogni oggetto ha il proprio insieme di eventi - vedi <a class="reference external" href="https://leafletjs.com/reference.html">documentazione</a> per i dettagli. Il primo parametro della funzione listener è un oggetto evento, che contiene informazioni utili sull’evento accaduto. Per esempio, l’oggetto evento map click (e nell’esempio sopra) ha la proprietà latlng che è una posizione in cui il click è avvenuto.</p>
<p>Migliora il tuo esempio usando un popup invece di un avviso:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">popup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">popup</span><span class="p">();</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">popup</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="nx">setLatLng</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="nx">setContent</span><span class="p">(</span><span class="s2">&quot;You clicked the map at &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">latlng</span><span class="p">.</span><span class="nx">toString</span><span class="p">())</span><span class="w"></span>
<span class="w">         </span><span class="p">.</span><span class="nx">openOn</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">onMapClick</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Prova a cliccare sulla mappa e vedrai le coordinate in un popup. Visualizza l’esempio <a class="reference external" href="http://localhost/leaflet-demo.html">completo</a></p>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id8">E ora?</a><a class="headerlink" href="#what-next" title="Link a questa intestazione">¶</a></h2>
<p>Ora hai imparato le basi di Leaflet e puoi iniziare subito a costruire applicazioni per le mappe! Non dimenticare di dare un’occhiata alla documentazione <a class="reference external" href="https://leafletjs.com/examples.html">dettagliata</a> o ad altri <a class="reference external" href="https://leafletjs.com/reference.html">esempi</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>