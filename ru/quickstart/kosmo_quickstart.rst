:Author: Sergio Baños Calvo
:Version: osgeo-live5.0
:License: Creative Commons Attribution-ShareAlike 3.0 Unported  (CC BY-SA 3.0)

.. image:: /images/project_logos/logo-Kosmo.png
  :scale: 100 %
  :alt: project logo
  :align: right
  :target: http://www.opengis.es/index.php?lang=en

********************************************************************************
Введение в Kosmo
********************************************************************************

Kosmo Desktop — это ГИС-приложение с понятным пользователю интерфейсом, которое позволяет
просматривать и редактировать пространственные данные в различных форматах (базы данных, 
векторные, растровые), а также проводить их анализ. 

В данном "введении" описано, как:

* запустить приложение;
* загрузить слои из файла, базы данных и OGC-сервисов;
* перемещаться по карте;
* менять оформление слоёв.


Запуск Kosmo Desktop
================================================================================

Чтобы запустить приложение, необходимо выполнить следующие шаги:

#. В меню Пуск выберите опцию :menuselection:`Geospatial --> Desktop GIS --> Kosmo`

#. Приложению потребуется несколько секунд, чтобы запуститься (во время загрузки появится экран-заставка).

   .. image:: /images/screenshots/800x600/kosmo_splash_screen.png
     :scale: 70 %

#. В диалоговом окне "Приветствие" выберите опцию :menuselection:`Create a new project --> With a new view` (**1**) и нажмите кнопку *Ok* (**2**)

   .. image:: /images/screenshots/1024x768/kosmo_welcome_dialog.png
   
#. В диалоговом окне "Пространственная система координат" нажмите кнопку *...*.

   .. image:: /images/screenshots/800x600/kosmo_select_srs.png

#. Выберите опцию *EPSG*  в поле-списке "Пространственная система координат" (**1**), введите текст `4326` в текстовое поле, затем нажмите кнопку *Search* (**2**).

#. Выберите систему координат EPSG:4326, WSG4  (**3**) и нажмите кнопку *Ok* (**4**)

   .. image:: /images/screenshots/800x600/kosmo_select_srs_epsg_4326.png

#. Нажмите кнопку *Ok* еще раз, чтобы выбрать подгруженную систему координат. Окно вида будет использовать при запуске проекцию EPSG:4326  как базовую.
    
  
.. tip::
  В заголовке окна Вид возле имени вы сможете увидеть выбранную для данного Вида проекцию.  
  
  

Kosmo Desktop — основное окно
================================================================================

Основное окно Kosmo состоит из следующих частей:

  .. image:: /images/screenshots/1024x768/kosmo_main_window.jpg
    :scale: 70 %

* Основное меню

* Панель инструментов

* Дерево слоёв

  Дерево, содержащее категории и слои, подгруженные в данном Виде

* Карта  

* Строка состояния

  Показывает пользователю сообщения программы.
  
* Координаты текущего положения курсора    



Подгрузка слоёв
================================================================================

Файлы
--------------------------------------------------------------------------------

Для начала подгрузим несколько слоёв из пробных данных, входящих в OSGeo-Live DVD:

#. Выберите опцию *View > Load Dataset...* или нажмите кнопку в виде зелёного плюса, находящуюся на основной панели инструментов.

#. В списке *Format* выберите *Shapefile* (**1**).

#. Выберите :file:`10m_admin_0_countries.shp`, находящийся в каталоге :file:`/usr/local/share/data/natural_earth` (**2**).

#. Нажмите кнопку *Ok* для загрузки шейпфайла (**3**).

   .. image:: /images/screenshots/800x600/kosmo_select_shape_file.png

#. В дереве слоёв поставьте флажок, чтобы сделать слой видимым, при необходимости щёлкнув правой кнопкой мыши (ПКМ) на папке *Working*.

#. Ещё раз выберите опцию *View > Load Dataset...*  или нажмите кнопку в виде зеленого плюса, находящуюся на основной панели инструментов.

#. В списке *Format* выберите *Image file* (**1**).

#. Выберите :file:`HYP_50M_SR_W.tif`, который расположен в каталоге :file:`/usr/local/share/data/natural_earth/HYP_50M_SR_W` (**2**)

#. Нажмите кнопку *Ok* для загрузки файла изображения (**3**).

   .. image:: /images/screenshots/800x600/kosmo_select_raster_file.png

#. В дереве слоёв поставьте флажок, чтобы сделать слой видимым.

#. Вы можете увидеть, что порядок отрисовки слоёв начинается от нижнего слоя к верхнему. Перетаскивая слои, измените их порядок для удобного отображения данных.

   .. image:: /images/screenshots/1024x768/kosmo_load_file_example.jpg

.. note::
   OSGeo-Live содержит примеры данных, которые находятся в следующих директориях:
  
  * :file:`~/data` ( ярлык :file:`/usr/local/share/data` или :file:`/home/user/data`)
  * :file:`/usr/local/share/openjump/data`
      
  Вы можете попробовать подгрузить больше данных из этих директорий. Помните, что при выборе данных необходимо указать их правильный формат в списке *Format*.

.. tip:: 
 Чтобы добавить все изображения в директории как уникальный слой, выберите нужную директорию в диалоговом окне *Load Dataset...*. Kosmo подгрузит все изображения в виде мозаики.


Базы данных
--------------------------------------------------------------------------------
Ниже показано, как подключить базу данных.

#. Выберите опцию *View > Load Dataset...* или нажмите кнопку в виде зеленого плюса, которая находится на основной панели инструментов

#. В списке *Format*,  выберите *Database* (**1**)

#. Заполните поля "Хост", "Порт", "Имя базы данных", "Имя пользователя" и "Пароль" следующим образом:

   * Хост: localhost
     
   * Порт: 5432
    
   * Имя базы данных: natural_earth
    
   * Имя пользователя: user
    
   * Пароль: user        

#. Нажмите кнопку *Connect*, чтобы подгрузить таблицы базы данных *natural_earth* (**2**).

#. Выберите таблицу *10m_populated_places_simple* (**3**).

#. Нажмите кнопку *Ok* , чтобы загрузить выбранную таблицу (**4**).

   .. image:: /images/screenshots/800x600/kosmo_database_connection.png
  
#. В дереве слоёв поставьте флажок, чтобы сделать слой видимым.

   .. image:: /images/screenshots/1024x768/kosmo_load_database_example.jpg
     :scale: 70 %


Сервисы OGC 
--------------------------------------------------------------------------------

#. Запустите :doc:`GeoServer <../overview/geoserver_overview>` WMS , входящий в состав OSGeo-Live DVD, выбрав опцию |osgeolive-appmenupath-geoserver| (либо зайдите в папку  *Web Services*  и дважды кликните иконку "Запустить Геосервер").

#. Нажмите кнопку *Load SDI Service* (IDE) на панели инструментов, чтобы открыть мастер настройки.

#. На панели *Select SDI service type* выберите опцию *WMS Service* (**1**) и нажмите кнопку *Next* (**2**).

   .. image:: /images/screenshots/800x600/kosmo_wms_1.png

#. В текстовое поле *Select Uniform Resource Locator (URL)*, введите URL http://localhost:8082/geoserver/ows?VERSION=1.1.1 (**1**), а затем нажмите кнопку *Connect* (**2**).

#. Если соединение прошло успешно, то нажмите кнопку *Next* (**3**).

   .. image:: /images/screenshots/800x600/kosmo_wms_2.png

#. Выберите слой `North America Sample Imagery` (**1**); нажмите кнопку *>*  (**2**), чтобы переместить изображение в правую часть списка, затем нажмите кнопку *Next* (**3**).

   .. image:: /images/screenshots/800x600/kosmo_wms_3.png

#. Не изменяйте значения в появившемся окне, нажмите кнопку *Finish*  (**1**) для загрузки слоя.

   .. image:: /images/screenshots/800x600/kosmo_wms_4.png

#. В списке слоёв поставьте флажок, чтобы сделать слой видимым.

#. Выделите слой в списке слоёв, нажмите кнопку *Zoom To Layer*,чтобы отцентрировать карту со слоем WMS.

#. Поменяйте порядок подгруженных слоёв, перетаскивая их так, чтобы растровый слой *HYP_50M_SR_W* оказался внизу. 

   .. image:: /images/screenshots/1024x768/kosmo_load_wms_results.jpg


.. note::
   Kosmo по умолчанию содержит список серверов WMS  (большая часть из них испанские). 
   Если вы подключены к сети Интернет, то вы сможете использовать их, как описано в примере, используя локальный сервер.


Инструменты навигации по карте
================================================================================

Вы можете контролировать положение карты, используя инструменты навигации, расположенные на основной панели интрументов.

1. |ZOOM| Инструменты масштабирования

  .. |ZOOM| image:: /images/screenshots/800x600/kosmo_zoom.png
  
  * Когда вы начинаете новую сессию, этот инструмент будет выбран по умолчанию.
  * Используйте левую кнопку мыши (ЛКМ), чтобы приблизиться до необходимого уровня к выбранной точке на карте.
  * Используйте правую кнопку мыши (ПКМ), чтобы отдалиться до необходимого уровня от выбранной точки на карте.
  * Чтобы увеличить какую-либо территорию на карте, выделите прямоугольную область, удерживая нажатой ЛКМ.
  
2. |PAN| Перемещение
  
  .. |PAN| image:: /images/screenshots/800x600/kosmo_pan.png

  * Позволяет перемещаться по карте без изменения её масштаба.
  * Зажмите ЛКМ, затем переместите мышь в желаемое место и отпустите клавишу.
  
3. |ZOOM_PREV| Вернуться к предыдущему виду

  .. |ZOOM_PREV| image:: /images/screenshots/800x600/kosmo_zoom_prev.png
  
  * Возвращает к предыдущему виду, хранящемуся в истории (при его наличии).
  
4. |ZOOM_NEXT| Вернуться к следующему виду

  .. |ZOOM_NEXT| image:: /images/screenshots/800x600/kosmo_zoom_next.png
  
  * Возвращает к следующему виду, хранящемуся в истории (при его наличии).
    
5. |ZOOM_FULL_EXTENT| Перейти к просмотру всех объектов

  .. |ZOOM_FULL_EXTENT| image:: /images/screenshots/800x600/kosmo_zoom_to_full_extent.png
  
  * Изменяет вид карты таким образом, что все объекты видимых слоёв отображаются на карте.
  
6. |ZOOM_TO_LAYER| Перейти к выбранному слою

  .. |ZOOM_TO_LAYER| image:: /images/screenshots/800x600/kosmo_zoom_to_layer.png
  
  * Изменяет вид карты таким образом, что все объекты выбранного слоя отображаются на карте.
    
7. |ZOOM_TO_SELECTED_ITEMS| Перейти к выбранным объектам

  .. |ZOOM_TO_SELECTED_ITEMS| image:: /images/screenshots/800x600/kosmo_zoom_to_selected_items.png
  
  * Изменяет вид карты, отображая на ней все выбранные объекты 
    
8. |PAN_TO_CLICK| Переместить по щелчку

  .. |PAN_TO_CLICK| image:: /images/screenshots/800x600/kosmo_pan_to_click.png
  
  * Центрирует карту в точке щелчка ЛКМ без изменения масштаба
  
9. |COORDINATE_LOCALIZATION| Координатная локализация

  .. |COORDINATE_LOCALIZATION| image:: /images/screenshots/800x600/kosmo_coordinate_localization.png
  
  * Центрирует карту по ввёденным координатам X и Y (широта/долгота)

Кроме указанных инструментов, можно использовать колесо мыши для плавного приближения/отдаления от точки указателя.

.. note::
  Если какой-либо инструмент или опция меню недоступны, можно поместить курсор на кнопку/опцию, чтобы увидеть всплывающую подсказку.



Оформление
================================================================================

В этом разделе описано, как изменить оформление слоя, используя ранжирование, на основе поля *country population*:

#. В дереве слоёв выберите  `10m_admin_0_countries`.

#. Щелкните по нему ПКМ и выберите опцию *Simbology > Change Styles...*.

#. Выберите `Colour theming`.

#. Сделайте активными опции *Enable colour theming* и *by range* (**1**).

#. Выберите `POP_EST` как *Attribute* (**2**), "8" как *Range count* (**3**) и RYG (Color Brewer) как *Color schema* (**4**).

#. Нажмите кнопку *Ok* , чтобы применить изменения (**5**).

   .. image:: /images/screenshots/800x600/kosmo_basic_style_classification.png

#. Слой поменяет своё оформление:

   .. image:: /images/screenshots/1024x768/kosmo_styled_layer_by_range.jpg
     :scale: 70 %


Что стоит попробовать?
================================================================================

* Используйте продвинутый редактор стилей (`Symbology > Advanced style editor...`) для создания сложных стилей.

* Используйте редактор запросов `Query wizard` для выбора объектов, удовлетворяющих заданному условию.

* Активируйте режим редактирования и используйте доступные инструменты редактирования.

* Сгенерируйте набор правил топологии для слоя и попробуйте его отредактировать.

* Активируйте расширения, которые являются частью приложения, обратите внимание на новые доступные инструменты.


Что дальше?
================================================================================

Документация и видео-материалы доступны на сайте Kosmo: http://www.opengis.es/index.php?lang=en
