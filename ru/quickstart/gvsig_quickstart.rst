:Author: Simon Cropper
:Version: osgeo-live5.0
:License: Creative Commons Attribution-ShareAlike 3.0 Unported  (CC BY-SA 3.0)

.. image:: ../../images/project_logos/logo-gvSIG.png
   :scale: 50 
   :align: right

********************************************************************************
Начало работы с gvSIG 
********************************************************************************

Описание проекта
================================================================================

gvSIG — настольная географическая информационная система (ГИС), предназначенная 
для сбора, хранения, обработки, анализа и развёртывания любой географически 
привязанной информации для решения комплексных проблем управления и 
планирования. gvSIG известна дружественным к пользователю интерфейсом, дающим 
возможность доступа к наиболее распространенным форматам данных, как векторным, 
так и растровым. gvSIG имеет обширный набор средств для работы с географической 
информацией (инструменты запросов, создание макетов, геообработка, сетевой анализ 
и т.д.), которые делают её идеальным инструментом для пользователей, работающих 
в сфере ГИС.
`gvSIG <http://www.gvsig.org/web/projects/gvsig-desktop/description2/view?set_language=en>`__ 2011

Это руководство описывает, как:
=================================== 

* Запускать gvSIG и создавать Вид (View);
* выбирать проекцию для Вида;
* добавлять растровые и векторные данные в окно Вида;
* выполнять навигацию по окну Виду;
* изменять представление слоёв в Виде;
* делать выборку определённых объектов в векторном файле и экспортировать их в другой файл;
* создавать карту с сеткой;
* сохранять текущий проект.

Запуск gvSIG и создание Вида
================================================================================

Выберите gvSIG из меню приложений. Запуск программы занимает обычно около минуты.

#. По умолчанию gvSIG откроется с пустым файлом проекта с документом 'View'. 
#. Нажмите на кнопку [New] для создания Вида.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_001.png
   :scale: 55 

Выбор проекции для Вида
================================================================================

Открытие окна свойств Вида
--------------------------------------------------------------------------------

#. Выберите новый созданный Вид. По умолчанию он называется ``Untitled - 0``, но может иметь название ``Untitled - 1``, если вы прежде его создали и удалили. 
#. Нажмите кнопку [Properties] для открытия диалогового окна **View properties**.
#. Нажмите кнопку [...] после 'Current projection'. Откроется диалоговое окно **New CRS**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_002.png
   :scale: 55 

Выбор системы координат
--------------------------------------------------------------------------------

#. Используя выпадающий список для 'Type', выберите EPSG-код.
#. Введите код EPSG для выбора необходимой системы координат. Для этого примера мы используем код EPSG:4326, который соответствует системе координат WGS84. Затем нажмите на кнопку [Search]. В списке выберите систему координат в таблице ниже окна поиска.
#. Нажмите [OK] для возврата в окно **View Properties**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_003.png
   :scale: 55 

Сохранение свойств Вида
--------------------------------------------------------------------------------

#. Обратите внимание, что Вид теперь имеет систему координат EPSG:4326 и что единицы карты изменились на градусы.
#. Нажмите [OK], чтобы вернуться в **Project Manager**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_004.png
   :scale: 55 

Открытие Вида
--------------------------------------------------------------------------------
   
#. Выберите созданный новый Вид.
#. Нажмите кнопку [Open] для открытия *Вида*.
#. Окно Вида состоит из трёх частей.
#. В верхнем левом окне содержится список векторных или растровых слоёв, используемых в Виде (т.н. TOC).
#. В нижнем левом окне отображается расположение текущего фрагмента по отношению ко всей рабочей области (обзор).
#. Окно справа — главная область, где отображаются растровые и векторные данные.
#. Нажмите на иконку 'Maximise window' для отображения окна во весь экран.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_005.png
   :scale: 55 

Добавление растровых и векторных данных в текущий Вид
================================================================================

Открытие диалогового окна добавления слоя
--------------------------------------------------------------------------------
   
#. Нажмите кнопку 'Add layer' на главной панели инструментов для открытия диалогового окна **Add layer**.
#. Выберите [Add] в диалоговом окне **Add layer**. Первая закладка *File*, далее появится диалоговое окно **Open** для открытия файла.
#. Перейдите в каталог ``/usr/local/share/data/natural_earth/HYP_50M_SR_W``.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_006.png
   :scale: 55 

Выбор растрового слоя
--------------------------------------------------------------------------------
   
#. Выберите *gvSIG Raster Driver* из выпадающего меню типа файлов. По умолчанию
   используется драйвер shape-файлов и каталог может показаться пустым. 
#. Выберите ``HYP_50M_SR_W.tif``.
#. Нажмите кнопку [OK] для возвращения в диалоговое окно **Add layer**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_007.png
   :scale: 55 

Выбор векторных файлов
--------------------------------------------------------------------------------
  
#. В список диалогового окна **Add layer** уже добавлен растровый слой.
#. Нажмите кнопку [Add] для добавления нескольких векторных слоёв. Появится диалоговое окно **Open**.
#. Нажмите кнопку [Up one level] в меню для изменения пути к каталогу ``/usr/local/share/data/natural_earth``.
#. Выберите *gvSIG shp driver* из выпадающего меню типов файлов.
#. Выберите ``10m_admin_1_states_provinces.shp``, ``10m_populated_places_simple.shp`` и ``10m_rivers_lake_centerlines.shp`` слои из списка. Удерживайте нажатой клавишу Ctrl для выбора нескольких файлов.
#. Нажмите кнопку [OK] для возврата в диалоговое окно **Add layer**.
#. Нажмите кнопку [OK] в диалоговом окне **Add layer** перехода в окно Вида.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_008.png
   :scale: 55 

Вид — базовая навигация
================================================================================

Увеличение до выбранного региона
--------------------------------------------------------------------------------

Перейдя назад в главное окно, вы увидите, что векторные слои накладываются на 
растровый слой. Цвета, показанные на рисунке ниже, могут отличаться от цветов 
у вас на экране.
       
#. По умолчанию выбран инструмент *Zoom in* (увеличение) на главной панели инструментов. 
#. Используйте указатель мыши для рисования прямоугольной области вокруг юго-восточной Австралии. Для этого выберите верхний левый угол ограничительной рамки, удерживая нажатой левую кнопку мыши, перетащите правый нижний угол ограничивающего прямоугольника над выбранной областью. Отпустите левую кнопку мыши — теперь у вас определена приблизительная область навигации.
   
.. image:: ../../images/screenshots/1024x768/gvsig_qs_009.png
   :scale: 55 

Мелкомасштабная навигация
--------------------------------------------------------------------------------
   
Вид будет автоматически меняться для отображения области с выбранным масштабом.

#. Ширину панели со списком слоёв можно изменять с помощью мыши, чтобы увидеть полные имена файлов.
#. Используя выделенные инструменты сделайте, чтобы штат Виктория был в центре области отображения. 

.. image:: ../../images/screenshots/1024x768/gvsig_qs_010.png
   :scale: 55 

Вид — изменения отображения слоёв
================================================================================

Создание полигона без "заливки"
--------------------------------------------------------------------------------
   
#. Выберите слой ``10m_admin_1_states_provinces.shp``, используя левую кнопку мыши и нажмите правую кнопку мыши.
#. Выберите подменю *Properties*.
#. Появится диалоговое окно **Layer properties**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_011.png
   :scale: 55 

Изменение символики векторного слоя
--------------------------------------------------------------------------------
   
#. Выберите закладку *Symbols* в верхней части диалогового окна **Layers properties**.
#. Нажмите кнопку [Choose symbol] для открытия диалогового окна **Symbol selector**.
#. Снимите опцию *Fill color* для отображения полигонов без "заливки".
#. Нажмите кнопку [OK] для возвращения в диалоговое окно **Layers properties**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_012.png
   :scale: 55 

Изменение подписей для векторного слоя
--------------------------------------------------------------------------------
   
#. Выберите закладку *Labelling* в верхней части диалогового окна **Layers properties**.
#. Измените атрибуты текста как показано на рисунке, затем нажмите на кнопку [Accept].

.. image:: ../../images/screenshots/1024x768/gvsig_qs_013.png
   :scale: 55 

Результат
--------------------------------------------------------------------------------
   
Заметим, что мы получили очень простой Вид, показывающий точечный, линейный и полигональный 
векторные слои, наложенные поверх растрового слоя. Это также просто отобразить 
аэрофотосъемку или цифровую модель рельефа как фоновый слой для векторных данных 
или показать другие векторные данные разных форматов.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_014.png
   :scale: 55 

Упражнение: изменить символику и подпись для точечного и линейного слоя
---------------------------------------------------------------------------------
   
По типу предыдущих нескольких шагов измените символ, цвет и подпись рек и городов 
в соответствии с рисунком, показанным ниже.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_015.png
   :scale: 55 

Простой анализ: выбор городов в регионе
================================================================================

Выбор региона
--------------------------------------------------------------------------------
   
#. Выберите слой ``10m_admin_1_states_provinces.shp``, используя левую кнопку мыши.
#. Нажмите кнопку 'Select by point' на главной панели инструментов.
#. Выберите полигон, который соответствует штату Виктория. Полигон окрасится в жёлтый цвет (по умолчанию), или другой цвет в зависимости от пользовательских настроек.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_016.png
   :scale: 55 

Выбор городов, находящихся в регионе
--------------------------------------------------------------------------------
   
#. Выберите слой ``10m_populated_places_simple.shp``, используя левую кнопку мыши.
#. Выберите ``View > Selection > Selection by layer`` для открытия диалогового окна **Selection by Layer**
#. Измените критерий выбора в выпадающем списке в левой стороне диалогового окна **Selection by Layer**. Нажмите кнопку [New set] для выбора городов в выбранном полигоне. 
#. Нажмите кнопку [Cancel] в диалоговом окне **Selection by Layer** для возвращения в окно Вида. 

.. image:: ../../images/screenshots/1024x768/gvsig_qs_017.png
   :scale: 55 

Снятие выделения с полигона
--------------------------------------------------------------------------------
   
#. Выберите слой ``10m_admin_1_states_provinces.shp``, используя левую кнопку мыши.
#. Нажмите кнопку 'Clear selection' на главной панели инструментов.
#. Вы увидите, что выбраны только города в штате Виктория.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_018.png
   :scale: 55 

Экспорт выбранных городов в новый шейп-файл
--------------------------------------------------------------------------------
   
#. Выберите слой ``10m_populated_places_simple.shp``, используя левую кнопку мыши.
#. Выберите ``Layer > Export to... > SHP``.
#. Появится диалоговое окно **Export to...**. gvSIG сообщит, что только выбранные 26 объектов будут экспортированы в шейп-файл. Нажмите кнопку [Yes].
#. Появится диалоговое окно **Save**. Напишите имя файла и выберите каталог для сохранения файла. Нажмите кнопку [Save]. Заметьте: если у вас уже есть файл с таким именем, то появится предупреждение. 
#. Появится диалоговое окно **Add layer**. Нажмите кнопку [Yes] для добавления нового шейп-файла в список слоёв.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_019.png
   :scale: 55 

Отображение одних городов в регионе
--------------------------------------------------------------------------------

#. Как только вернётесь в окно Вида, сделайте неактивным слой ``10m_populated_places_simple.shp`` в списке слоёв.
#. Измените символику и подписи для слоя ``test.shp``, как показано на рисунке ниже. 
#. Теперь в окне Вида отображаются только города, которые находятся в штате Виктория.
#. Нажмите кнопку 'Close window', чтобы вернуться в **Project manager** . Теперь мы можем создать карту, используя этот Вид.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_020.png
   :scale: 55 
   
Как создать карту
================================================================================

Создание новой карты
--------------------------------------------------------------------------------

#. Выберите тип документа *Map* в диалоговом окне **Project Manager**.
#. Нажмите кнопку [New] для создания карты.
#. Выберите вновь созданную карту. По умолчанию она будет называться ``Untitled - 0``.
#. Нажмите кнопку [Open].
#. Пустая карта появится в отдельном окне с названием ``Map: Untitled - 0``. Обратите внимание на ряд особенностей на рисунке. Вы можете заметить сетку и специальные линии ("направляющие") — всё это используется для привязки элементов во время редактирования карты.
#. Нажмите кнопку 'Maximise window' для отображения карты во всей части экрана. 

.. image:: ../../images/screenshots/1024x768/gvsig_qs_021.png
   :scale: 55 

Вставка сетки в View
----------------------------------- 
   
#. Нажмите кнопку 'Insert view' в главном меню.
#. Создайте область просмотра, представляющую собой охват карты на странице. Для этого нажмите на пустую карту и, удерживая левую кнопку мыши, протяните немного в пределах области просмотра, затем отпустите левую кнопку мыши для завершения. Это откроет диалоговое окно **Properties of view framework**.
#. Выберите *Вид*, созданный ранее.
#. Нажмите опцию *Show Grid* (это создаст сетку).
#. Нажмите кнопку [Configure] для открытия диалогового окна **Grid settings**.
#. В диалоговом окне **Grid settings** измените интервал сетки до 1.0 (т.е. 1 градус между параллелями и меридианами).
#. Выберите формат сетки (используйте линии, а не точки для удобства просмотра).
#. Увеличьте размер шрифта до 14 пунктов.
#. Нажмите кнопку [Ok] для возвращения в диалоговое окно **Properties of view framework**, затем нажмите кнопку [Accept] для выхода и возврата в окно карты.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_022.png
   :scale: 55 

Что ещё можно сделать для карты?
--------------------------------------------------------------------------------
   
#. Выберите ``Map > Properties`` в главном меню для открытия диалогового окна 
   **Map Properties**. Деактивируйте флажок *Visualise Grid*, затем нажмите кнопку [OK]. 
   Направляющие линии и сетка используются во время редактирования карты 
   и сейчас должны быть удалены со страницы, так что изображение карты должно
   соответствовать тому, что показано на рисунке ниже.  
#. Дополнительные элементы, такие, как масштабная линейка и указатель на север, 
   могут быть добалены в карту, используя кнопки на главной панели инструментов 
   или в меню ``Map``.
#. Карта может быть напечатана или экспортирована в форматы PDF или Postscript.
#. Нажмите кнопку 'Close window' для возвращения в окно **Project manager**.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_023.png
   :scale: 55 

Сохранение проекта и закрытие gvSIG
================================================================================
   
#. Проект может быть сохранён для дальнейшего использования через 
   меню ``File > Save as...``.
#. Из проекта можно выйти или закрыть его, используя меню ``File > Exit``.

.. image:: ../../images/screenshots/1024x768/gvsig_qs_024.png
   :scale: 55 

Что дальше?
================================================================================

Справка на английском и обучающие материалы доступны на сайте 
`gvSIG <http://www.gvsig.org/web/docusr/learning/>`__. 

