
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guía de Inicio Rápido de Actinia &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="EOxServer" href="../overview/eoxserver_overview.html" />
    <link rel="prev" title="actinia" href="../overview/actinia_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://actinia.mundialis.de/"><img alt="../../_images/logo_actinia.png" class="align-right" src="../../_images/logo_actinia.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Este proyecto solo se incluye en el disco de máquina virtual OSGeoLive (VMDK)</p>
</div>
<section id="actinia-quickstart">
<h1>Guía de Inicio Rápido de Actinia<a class="headerlink" href="#actinia-quickstart" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Actinia es una API REST de código abierto para el procesamiento escalable, distribuido y de alto rendimiento de datos geográficos que utiliza <a class="reference external" href="https://grass.osgeo.org/">GRASS GIS</a> para tareas computacionales. Actinia proporciona una API REST para procesar imágenes satelitales, series temporales de imágenes satelitales, datos ráster y vectoriales.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenidos</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction-to-ace-actinia-command-execution" id="id2">Introducción a ace - ejecución del comando actinia</a></p></li>
<li><p><a class="reference internal" href="#setup-your-environment" id="id3">Configurar su entorno</a></p></li>
<li><p><a class="reference internal" href="#access-sample-data" id="id4">Acceder a datos de muestra</a></p>
<ul>
<li><p><a class="reference internal" href="#access-data-from-external-sources" id="id5">Acceso a datos de fuentes externas</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inspect-the-rest-call-prior-to-submission" id="id6">Inspeccione la llamada REST antes del envío</a></p></li>
<li><p><a class="reference internal" href="#display-a-map-map-rendering" id="id7">Mostrar un mapa - representación del mapa</a></p></li>
<li><p><a class="reference internal" href="#script-examples" id="id8">Ejemplos de script</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" id="id9">Ejemplo 1: cálculo de pendiente y aspecto y estadísticas univariadas de un modelo de elevación</a></p></li>
<li><p><a class="reference internal" href="#example-2-orthophoto-image-segmentation-with-export" id="id10">Ejemplo 2: Segmentación de imagen de ortofoto con exportación</a></p></li>
<li><p><a class="reference internal" href="#examples-for-persistent-processing" id="id11">Ejemplos de procesamiento persistente</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#things-to-try" id="id12">Cosas para probar</a></p>
<ul>
<li><p><a class="reference internal" href="#install-on-osgeolive-vm-with-docker-compose" id="id13">Install on OSGeoLive VM with Docker Compose</a></p></li>
<li><p><a class="reference internal" href="#create-new-locations" id="id14">Crear nuevas ubicaciones</a></p></li>
<li><p><a class="reference internal" href="#install-grass-gis-addons-extensions" id="id15">Instalar complementos GRASS GIS (extensiones)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-next" id="id16">¿Qué sigue?</a></p></li>
</ul>
</div>
<p>Actinia se puede utilizar de diferentes maneras:</p>
<ul class="simple">
<li><p><cite>curl</cite> o herramientas de línea de comando similares</p></li>
<li><p>la extensión <cite>Postman</cite> o <cite>RESTman</cite> para navegadores</p></li>
<li><p>abrir una sesión GRASS GIS y usar la herramienta <cite>ace</cite> (ejecución de comando actinia)</p></li>
<li><p>otras interfaces para la API REST</p></li>
</ul>
<p>En este inicio rápido, hacemos uso de GRASS GIS para iniciar convenientemente comandos desde la sesión al servidor actinia (que a su vez usa GRASS GIS). La idea es desarrollar rápidamente un flujo de trabajo localmente en pequeños conjuntos de datos para luego ejecutarlo en el servidor.</p>
<section id="introduction-to-ace-actinia-command-execution">
<h2><a class="toc-backref" href="#id2">Introducción a ace - ejecución del comando actinia</a><a class="headerlink" href="#introduction-to-ace-actinia-command-execution" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La herramienta <code class="docutils literal notranslate"><span class="pre">ace</span></code> (<a class="reference external" href="https://neteler.gitlab.io/actinia-introduction/#controlling-actinia-from-a-running-grass-gis-session">detalles</a>) permite la ejecución de un solo comando GRASS GIS o una lista de comandos GRASS GIS en un servicio REST actinia (<a class="reference external" href="https://actinia.mundialis.de/">https://actinia.mundialis.de/</a>). Además, proporciona gestión de trabajos, la capacidad de enumerar ubicaciones, conjuntos de mapas y capas de mapas a los que el usuario tiene acceso, así como la creación y eliminación de conjuntos de mapas.</p>
<p>La herramienta “”ace”” debe ejecutarse en una sesión activa de GRASS GIS. Se instala con <code class="docutils literal notranslate"><span class="pre">g.extension</span> <span class="pre">extension=ace</span> <span class="pre">url=https://github.com/mundialis/ace</span></code>.</p>
<p>odos los comandos se ejecutarán por defecto en una base de datos <strong>efímera</strong> . Por lo tanto, la salida generada debe exportarse utilizando comandos GRASS aumentados.</p>
<p>La opción  <code class="docutils literal notranslate"><span class="pre">mapset=MAPSET_NAME</span></code> permite la ejecución de comandos en la base de datos de usuario <strong>persistente</strong>. Se puede usar con la opción <code class="docutils literal notranslate"><span class="pre">location=LOCATION_NAME</span></code>.</p>
</section>
<section id="setup-your-environment">
<h2><a class="toc-backref" href="#id3">Configurar su entorno</a><a class="headerlink" href="#setup-your-environment" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Asegúrese de ejecutar los siguientes comandos en una sesión de GRASS SIG .</p>
<p>El usuario debe configurar las siguientes variables de entorno para especificar el servidor actinia y las credenciales:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># set credentials and REST server URL</span>
<span class="nb">export</span> <span class="nv">ACTINIA_USER</span><span class="o">=</span><span class="s1">&#39;demouser&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_PASSWORD</span><span class="o">=</span><span class="s1">&#39;gu3st!pa55w0rd&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_URL</span><span class="o">=</span><span class="s1">&#39;https://actinia.mundialis.de/latest&#39;</span>
</pre></div>
</div>
</section>
<section id="access-sample-data">
<h2><a class="toc-backref" href="#id4">Acceder a datos de muestra</a><a class="headerlink" href="#access-sample-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los conjuntos de datos seleccionados están disponibles para el usuario de demostración. Para enumerar las ubicaciones a las que tiene acceso, ejecute</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -l
<span class="o">[</span><span class="s1">&#39;latlong_wgs84&#39;</span>, <span class="s1">&#39;ECAD&#39;</span>, <span class="s1">&#39;nc_spm_08&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>El siguiente comando enlista los conjuntos de mapas de la ubicación actual en la sesión activa de GRASS GIS (nc_spm_08):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># running ace in the &quot;nc_spm_08&quot; location</span>
<span class="c1"># (the current location name is propagated to the server):</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> -m
<span class="o">[</span><span class="s1">&#39;PERMANENT&#39;</span>, <span class="s1">&#39;landsat&#39;</span>, <span class="s1">&#39;modis_lst&#39;</span><span class="o">]</span>
</pre></div>
</div>
<section id="access-data-from-external-sources">
<h3><a class="toc-backref" href="#id5">Acceso a datos de fuentes externas</a><a class="headerlink" href="#access-data-from-external-sources" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los comandos GRASS GIS  se pueden aumentar con extensiones específicas de actinia. El operador <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> se puede especificar para un parámetro de entrada para importar un recurso ubicado en la web y para especificar la exportación de un parámetro de salida.</p>
<p>Es importante destacar que el nombre de la ubicación local y el conjunto de mapas deben corresponder con el del servidor REST de actinia.</p>
<p>Los conjuntos de datos disponibles actualmente son (organizados por proyecciones):</p>
<ul class="simple">
<li><p>Conjunto de datos de muestra de Carolina del Norte  (NC State-Plane metric CRS, EPSG: 3358):</p>
<ul>
<li><p>cartografía base (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/PERMANENT</span></code>; fuente: <a class="reference external" href="https://grassbook.org/datasets/datasets-3rd-edition/">https://grassbook.org/datasets/datasets-3rd-edition/</a>)</p></li>
<li><p>Subescenas Landsat (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/landsat</span></code>; source: <a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>)</p></li>
</ul>
</li>
<li><p>Ubicación de Latitud-Longitud (LatLong WGS84, EPSG:4326):</p>
<ul>
<li><p>vacío (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/PERMANENTE/</span></code>)</p></li>
<li><p>16-days NDVI, MOD13C1, V006, CMG 0.05 deg res. (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/modis_ndvi_global/</span></code>; fuente:  <a class="reference external" href="https://lpdaac.usgs.gov/products/mod13c1v006/">https://lpdaac.usgs.gov/products/mod13c1v006/</a>)</p></li>
<li><p>LST growing degree days asia 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_gdd_2017/</span></code>; fuente: <a class="reference external" href="https://www.mundialis.de/en/temperature-data/">https://www.mundialis.de/en/temperature-data/</a>)</p></li>
<li><p>LST tropical days asia 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_tropical_2017/</span></code>)</p></li>
<li><p>Temperatura LST diaria asia 2017, incluyendo min, max y avg (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_lst_daily_2017/</span></code>)</p></li>
</ul>
</li>
<li><p>Europa (EU LAEA CRS, EPSG:3035):</p>
<ul>
<li><p>EU DEM 25m V1.1 (<code class="docutils literal notranslate"><span class="pre">eu_laea/PERMANENT/</span></code>; fuente: <a class="reference external" href="https://land.copernicus.eu/imagery-in-situ/eu-dem">https://land.copernicus.eu/imagery-in-situ/eu-dem</a>)</p></li>
<li><p>CORINE Landcover 2012, g100_clc12_V18_5 (<code class="docutils literal notranslate"><span class="pre">eu_laea/corine_2012/</span></code>; fuente: <a class="reference external" href="https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012">https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012</a>)</p></li>
</ul>
</li>
<li><p>Mundo Mollweide (EPSG 54009):</p>
<ul>
<li><p>GHS_POP_GPW42015_GLOBE_R2015A_54009_250_v1_0 (<code class="docutils literal notranslate"><span class="pre">world_mollweide/pop_jrc</span></code>; fuente: <a class="reference external" href="https://ghsl.jrc.ec.europa.eu/ghs_pop.php">https://ghsl.jrc.ec.europa.eu/ghs_pop.php</a>)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="inspect-the-rest-call-prior-to-submission">
<h2><a class="toc-backref" href="#id6">Inspeccione la llamada REST antes del envío</a><a class="headerlink" href="#inspect-the-rest-call-prior-to-submission" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para generar la solicitud JSON de cadena de proceso actinia, simplemente agregue la bandera <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.slope.aspect elevation=elevation slope=myslope&quot;</span> -d
</pre></div>
</div>
</section>
<section id="display-a-map-map-rendering">
<h2><a class="toc-backref" href="#id7">Mostrar un mapa - representación del mapa</a><a class="headerlink" href="#display-a-map-map-rendering" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Es muy fácil (y rápido) renderizar un mapa:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># check amount of pixels, just FYI</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info globcover@globcover&quot;</span>
<span class="c1"># render the map ... 7 billion pixels</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">render_raster</span><span class="o">=</span><span class="s2">&quot;globcover@globcover&quot;</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<img alt="Mapa de ESA Globcover mostrado por actinia" src="../../_images/esa_globcover_rendered_by_ace.png" />
<figcaption>
<p><span class="caption-text">Mapa de ESA Globcover mostrado por actinia</span><a class="headerlink" href="#id1" title="Enlace permanente a esta imagen">¶</a></p>
</figcaption>
</figure>
<p>El procesamiento efímero es el enfoque de procesamiento predeterminado de actinia. Los comandos se ejecutan en un conjunto de mapas efímero que se eliminará después del procesamiento. Puede exportar la salida de los módulos GRASS GIS para almacenar el resultado computacional para su descarga y análisis posterior. Actualmente se admiten los siguientes formatos de exportación:</p>
<ul class="simple">
<li><p>ráster: <code class="docutils literal notranslate"><span class="pre">COG</span></code>, <code class="docutils literal notranslate"><span class="pre">GTiff</span></code></p></li>
<li><p>vector: <code class="docutils literal notranslate"><span class="pre">GPKG</span></code>, <code class="docutils literal notranslate"><span class="pre">GML</span></code>, <code class="docutils literal notranslate"><span class="pre">GeoJSON</span></code>, <code class="docutils literal notranslate"><span class="pre">ESRI_Shapefile</span></code></p></li>
<li><p>tabla: <code class="docutils literal notranslate"><span class="pre">CSV</span></code>, <code class="docutils literal notranslate"><span class="pre">TXT</span></code></p></li>
</ul>
</section>
<section id="script-examples">
<h2><a class="toc-backref" href="#id8">Ejemplos de script</a><a class="headerlink" href="#script-examples" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model">
<h3><a class="toc-backref" href="#id9">Ejemplo 1: cálculo de pendiente y aspecto y estadísticas univariadas de un modelo de elevación</a><a class="headerlink" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los siguientes comandos (que se almacenarán en un script y se ejecutarán con <code class="docutils literal notranslate"><span class="pre">ace</span></code>) importarán una capa ráster desde una fuente de Internet como mapa ráster <code class="docutils literal notranslate"><span class="pre">elev</span></code>, establece la región de cálculo en el mapa y calcula la pendiente. Se solicita información adicional sobre la capa ráster con <code class="docutils literal notranslate"><span class="pre">r.info</span></code>.</p>
<p>Almacene el siguiente script como archivo de texto <code class="docutils literal notranslate"><span class="pre">ace_dtm_statistics.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
g.region <span class="nv">raster</span><span class="o">=</span>elev@https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif -ap
<span class="c1"># Compute univariate statistics</span>
r.univar <span class="nv">map</span><span class="o">=</span>elev
r.info elev
<span class="c1"># Compute the slope of the imported map and mark it for export as a COG file (Cloud Optimized GeoTIFF)</span>
r.slope.aspect <span class="nv">elevation</span><span class="o">=</span>elev <span class="nv">slope</span><span class="o">=</span>slope_elev+COG
r.info slope_elev
</pre></div>
</div>
<p>Guarde el script en el archivo de texto en <code class="docutils literal notranslate"><span class="pre">/tmp/ace_dtm_statistics.sh</span></code> y ejecute el script guardado como</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace --location nc_spm_08 --script ace_dtm_statistics.sh
</pre></div>
</div>
<p>Los resultados (mensajes, estadísticas, archivos) se proporcionan como recursos REST.</p>
<p>Para generar la solicitud JSON de cadena de proceso actinia, simplemente agregue la bandera <code class="docutils literal notranslate"><span class="pre">-d</span></code> (dry-run):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -d <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>La salida debería verse así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;flags&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;import_descr&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;percentile&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;90&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;separator&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pipe&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elevation&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;degrees&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;precision&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FCELL&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;min_slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;export&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COG&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="example-2-orthophoto-image-segmentation-with-export">
<h3><a class="toc-backref" href="#id10">Ejemplo 2: Segmentación de imagen de ortofoto con exportación</a><a class="headerlink" href="#example-2-orthophoto-image-segmentation-with-export" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Almacene el siguiente script como archivo de texto <code class="docutils literal notranslate"><span class="pre">/tmp/ace_segmentation.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="c1"># we apply a importer trick for the import of multi-band GeoTIFFs:</span>
<span class="c1"># install with: g.extension importer url=https://github.com/mundialis/importer</span>
importer <span class="nv">raster</span><span class="o">=</span>ortho2010@https://apps.mundialis.de/workshops/osgeo_ireland2017/north_carolina/ortho2010_t792_subset_20cm.tif
<span class="c1"># The importer has created three new raster maps, one for each band in the geotiff file</span>
<span class="c1"># stored them in an image group</span>
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.1
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.2
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.3
<span class="c1"># Set the region and resolution</span>
g.region <span class="nv">raster</span><span class="o">=</span>ortho2010.1 <span class="nv">res</span><span class="o">=</span><span class="m">1</span> -p
<span class="c1"># Note: the RGB bands are organized as a group</span>
<span class="c1"># export as a as COG file (Cloud Optimized GeoTIFF)</span>
i.segment <span class="nv">group</span><span class="o">=</span>ortho2010 <span class="nv">threshold</span><span class="o">=</span><span class="m">0</span>.25 <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+COG <span class="nv">goodness</span><span class="o">=</span>ortho2010_seg_25_fit+COG
<span class="c1"># Finally vectorize segments with r.to.vect and export as a GeoJSON file</span>
r.to.vect <span class="nv">input</span><span class="o">=</span>ortho2010_segment_25 <span class="nv">type</span><span class="o">=</span>area <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+GeoJSON
</pre></div>
</div>
<p>Ejecute el script guardado en un archivo de texto como</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_segmentation.sh&quot;</span>
</pre></div>
</div>
<p>Los resultados (mensajes, estadísticas, archivos) se proporcionan como recursos REST.</p>
</section>
<section id="examples-for-persistent-processing">
<h3><a class="toc-backref" href="#id11">Ejemplos de procesamiento persistente</a><a class="headerlink" href="#examples-for-persistent-processing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los comandos GRASS GIS se pueden ejecutar en una base de datos persistente específica del usuario. El usuario debe crear un conjunto de mapas en una ubicación existente. Se puede acceder a estos conjuntos de mapas a través de <code class="docutils literal notranslate"><span class="pre">ace</span></code>. Todos los resultados de procesamiento de los comandos ejecutados en este conjunto de mapas se almacenarán de forma persistente. Tenga en cuenta que el procesamiento se realizará en una base de datos efímera que se moverá al almacenamiento persistente usando el nombre correcto después del procesamiento.</p>
<p>Para crear un nuevo conjunto de mapas en la ubicación <strong>nc_spm_08</strong> con el nombre <strong>test_mapset</strong>, se debe ejecutar el siguiente comando</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Ejecute los comandos desde el script de estadísticas en el nuevo conjunto de mapas persistente</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>Mostrar todos los mapas ráster que se han creado con el script en test_mapset</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_commmand</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
</pre></div>
</div>
<p>Mostrar información sobre el mapa ráster elev y slope_elev</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
<p>Eliminar el test_mapset (siempre compruebe los nombres al eliminar)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">delete_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>Si la sesión SIG GRASS activa tiene nombres de ubicación/conjunto de mapas idénticos, se puede utilizar un alias para evitar la opción persistente en cada llamada de comando único:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">acp</span><span class="o">=</span><span class="s2">&quot;ace --persistent `g.mapset -p`&quot;</span>
</pre></div>
</div>
<p>Suponemos que en la sesión activa de GRASS GIS la ubicación actual es <strong>nc_spm_08</strong> y el conjunto de mapas actual es <strong>test_mapset</strong>. Luego, los comandos de arriba se pueden ejecutar de la siguiente manera:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id12">Cosas para probar</a><a class="headerlink" href="#things-to-try" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="install-on-osgeolive-vm-with-docker-compose">
<h3><a class="toc-backref" href="#id13">Install on OSGeoLive VM with Docker Compose</a><a class="headerlink" href="#install-on-osgeolive-vm-with-docker-compose" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Requirements: docker and docker-compose (already available in OSGeoLive VM version)</p>
<p>To build and deploy actinia, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mundialis/actinia_core.git
<span class="nb">cd</span> actinia_core
docker-compose -f docker/docker-compose.yml up
</pre></div>
</div>
<p>Now you have a running actinia instance locally! Check with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl http://127.0.0.1:8088/api/v3/version
</pre></div>
</div>
</section>
<section id="create-new-locations">
<h3><a class="toc-backref" href="#id14">Crear nuevas ubicaciones</a><a class="headerlink" href="#create-new-locations" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (note: the &quot;demouser&quot; is not enabled for this)</span>
<span class="c1">#</span>
<span class="c1"># create new location</span>
ace <span class="nv">create_location</span><span class="o">=</span><span class="s2">&quot;mylatlon 4326&quot;</span>
<span class="c1"># create new mapset within location</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;mylatlon&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;user1&quot;</span>
</pre></div>
</div>
</section>
<section id="install-grass-gis-addons-extensions">
<h3><a class="toc-backref" href="#id15">Instalar complementos GRASS GIS (extensiones)</a><a class="headerlink" href="#install-grass-gis-addons-extensions" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (requires elevated user privileges)</span>
<span class="c1">#</span>
<span class="c1"># list existing addons, see also</span>
<span class="c1"># https://grass.osgeo.org/grass-stable/manuals/addons/</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension -l&quot;</span>

<span class="c1"># install machine learning addon r.learn.ml2</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension extension=\&quot;r.learn.ml2\&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id16">¿Qué sigue?</a><a class="headerlink" href="#what-next" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Visite el sitio web de actinia en <a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a></p></li>
<li><p>Tutorial de actinia: <a class="reference external" href="https://neteler.gitlab.io/actinia-introduction">https://neteler.gitlab.io/actinia-introduction</a></p></li>
<li><p>Otras lecturas: Neteler, M., Gebbert, S., Tawalika, C., Bettge, A., Benelcadi, H., Löw, F., Adams, T, Paulsen, H. (2019). Actinia: cloud based geoprocessing. In Proc. of the 2019 conference on Big Data from Space (BiDS’2019) (pp. 41-44). EUR 29660 EN, Publications Office of the European Union 5, Luxembourg: P. Soille, S. Loekken, and S. Albani (Eds.). (<a class="reference external" href="https://zenodo.org/record/2631917">DOI</a>)</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>