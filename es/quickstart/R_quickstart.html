
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Inicio rápido de R &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="XyGrib" href="../overview/xygrib_overview.html" />
    <link rel="prev" title="R" href="../overview/R_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://cran.r-project.org"><img alt="../../_images/logo_R.png" class="align-right" src="../../_images/logo_R.png" /></a>
<section id="r-quickstart">
<h1>Inicio rápido de R<a class="headerlink" href="#r-quickstart" title="Enlazar permanentemente con este título">¶</a></h1>
<p>R es un entorno y lenguaje de programación para análisis estadístico y gráficos.</p>
<p>Esta Guía de Inicio Rápido describe cómo:</p>
<blockquote>
<div><ul class="simple">
<li><p>usar R para aritmética simple</p></li>
<li><p>cargar datos desde un shapefile y mapearlos</p></li>
<li><p>hacer una transformación de coordenadas</p></li>
<li><p>dibujar algunos datos puntuales en un mapa</p></li>
</ul>
</div></blockquote>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenidos</p>
<ul class="simple">
<li><p><a class="reference internal" href="#start-r" id="id1">Iniciar R</a></p></li>
<li><p><a class="reference internal" href="#building-data" id="id2">Construyendo datos</a></p></li>
<li><p><a class="reference internal" href="#loading-map-data" id="id3">Cargando datos de mapas</a></p></li>
<li><p><a class="reference internal" href="#vignettes" id="id4">Viñetas</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id5">¿Qué sigue?</a></p></li>
</ul>
</div>
<section id="start-r">
<h2><a class="toc-backref" href="#id1">Iniciar R</a><a class="headerlink" href="#start-r" title="Enlazar permanentemente con este título">¶</a></h2>
<p>R es esencialmente un programa de línea de comando, aunque tiene disponibles también interfaces de usuario. Se escribe una línea de código en el prompt, se presiona return y el intérprete de R evalúa y muestra el resultado.</p>
<div class="admonition tip">
<p class="admonition-title">Truco</p>
<p>No teman la línea de comando - es una fuente de gran poder. Usando las flechas arriba y abajo para recuperar comandos para que pueda editar errores. Presione CTRL-C si se atasca y debe obtener el mensaje de nuevo.</p>
</div>
<p>Elija <span class="menuselection">Geoespacial ‣ Herramientas Espaciales ‣ R Estadística</span>. Se abre una ventana de terminal que ejecuta R.</p>
<p>Puede comenzar con la aritmética simple.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="mi">3</span><span class="o">*</span><span class="mi">2</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mi">6</span>

<span class="o">&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">4</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">2.5</span>

<span class="o">&gt;</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.414214</span>

<span class="o">&gt;</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.155727</span>
</pre></div>
</div>
<p>Una gama completa de funciones aritméticas, trigonométricas y estadísticas están integradas, y miles más están disponibles en los paquetes del archivo <a class="reference external" href="https://cran.r-project.org/">CRAN</a>.</p>
<p>El mensaje principal en R es <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, pero también está el indicador de continuación <code class="docutils literal notranslate"><span class="pre">+</span></code>, que aparece si R espera más entrada para hacer una expresión válida. Verás esto si olvidas un corchete de cierre o paréntesis.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sqrt</span><span class="p">(</span>
<span class="o">+</span> <span class="mi">2</span>
<span class="o">+</span> <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.414214</span>
</pre></div>
</div>
</section>
<section id="building-data">
<h2><a class="toc-backref" href="#id2">Construyendo datos</a><a class="headerlink" href="#building-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Uno se puede preguntar por qué aparece un misterioso “uno” entre corchetes en la salida. Esto nos dice que el resultado es un número. R puede almacenar contenido en vectores unidimensionales, matrices bidimensionales y arrays multidimesionales. Hay muchas funciones que pueden crear estos objetos. Aquí está una secuencia simple:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">seq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">len</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mf">1.000000</span> <span class="mf">1.444444</span> <span class="mf">1.888889</span> <span class="mf">2.333333</span> <span class="mf">2.777778</span> <span class="mf">3.222222</span> <span class="mf">3.666667</span> <span class="mf">4.111111</span>
<span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="mf">4.555556</span> <span class="mf">5.000000</span>
</pre></div>
</div>
<p>Ahora se puede ver que <code class="docutils literal notranslate"><span class="pre">[9]</span></code> nos está diciendo que 4.555 es el noveno valor del vector.</p>
<p>Si se construye una matriz, se obtienen etiquetas de fila y columna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">m</span>
     <span class="p">[,</span><span class="mi">1</span><span class="p">]</span> <span class="p">[,</span><span class="mi">2</span><span class="p">]</span> <span class="p">[,</span><span class="mi">3</span><span class="p">]</span> <span class="p">[,</span><span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,]</span>    <span class="mi">1</span>    <span class="mi">4</span>    <span class="mi">7</span>   <span class="mi">10</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,]</span>    <span class="mi">2</span>    <span class="mi">5</span>    <span class="mi">8</span>   <span class="mi">11</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,]</span>    <span class="mi">3</span>    <span class="mi">6</span>    <span class="mi">9</span>   <span class="mi">12</span>
</pre></div>
</div>
<p>Los elementos de las matrices se pueden extraer usando corchetes, con los índices de fila y columna separados por comas. Si se deja uno de los índices en blanco se obtiene la fila entera como un vector. Se puede usar como índice un vector para obtener múltiples filas y columnas como una matriz más pequeña:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="mi">11</span>

<span class="o">&gt;</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">,]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="mi">2</span>  <span class="mi">5</span>  <span class="mi">8</span> <span class="mi">11</span>

<span class="o">&gt;</span> <span class="n">m</span><span class="p">[,</span><span class="mi">3</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
     <span class="p">[,</span><span class="mi">1</span><span class="p">]</span> <span class="p">[,</span><span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,]</span>    <span class="mi">7</span>   <span class="mi">10</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,]</span>    <span class="mi">8</span>   <span class="mi">11</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,]</span>    <span class="mi">9</span>   <span class="mi">12</span>
</pre></div>
</div>
<p>Los data frames son estructuras de datos que imitan el tipo de estructura que nos encontramos en un SGBDR como Postgres o MySQL. Se puede pensar en cada fila como un registro y cada columna como un campo en la base de datos. Como en una base de datos, cada campo debe de ser del mismo tipo para todos los registros.</p>
<p>En general funcionan mucho como las matrices, pero además se pueden seleccionar un conjunto de columnas por nombre usando la notación $:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; d = data.frame(x=1:10, y=1:10, z=runif(10)) # z is 10 random numbers
&gt; d
        x  y          z
    1   1  1 0.44128080
    2   2  2 0.09394331
    3   3  3 0.51097462
    4   4  4 0.82683828
    5   5  5 0.21826740
    6   6  6 0.65600533
    7   7  7 0.59798278
    8   8  8 0.19003625
    9   9  9 0.24004866
    10 10 10 0.35972749

&gt; d$z
 [1] 0.44128080 0.09394331 0.51097462 0.82683828 0.21826740 0.65600533
 [7] 0.59798278 0.19003625 0.24004866 0.35972749

&gt; d$big = d$z &gt; 0.6  # d$big is now a boolean true/false value
&gt; d[1:5,]
  x y          z   big
1 1 1 0.44128080 FALSE
2 2 2 0.09394331 FALSE
3 3 3 0.51097462 FALSE
4 4 4 0.82683828  TRUE
5 5 5 0.21826740 FALSE

&gt; d$name = letters[1:10] # create a new field of characters
&gt; d[1:5,]
  x y          z   big name
  1 1 1 0.44128080 FALSE    a
  2 2 2 0.09394331 FALSE    b
  3 3 3 0.51097462 FALSE    c
  4 4 4 0.82683828  TRUE    d
  5 5 5 0.21826740 FALSE    e
</pre></div>
</div>
</section>
<section id="loading-map-data">
<h2><a class="toc-backref" href="#id3">Cargando datos de mapas</a><a class="headerlink" href="#loading-map-data" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Hay muchos paquetes para la manipulación y estadística de datos espaciales. Algunos vienen incluidos aquí y otros tienen que ser descargados desde CRAN.</p>
<p>Aquí cargaremos dos shapefiles - las fronteras de paises y las áreas pobladas de la base de datos Natural Earth. Usaremos dos paquetes para conseguir la funcionalidad espacial:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">library</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span>           <span class="c1"># Simple Features manipulation Library</span>
<span class="o">&gt;</span> <span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>      <span class="c1"># Plotting library</span>

<span class="o">&gt;</span> <span class="n">countries</span> <span class="o">&lt;-</span> <span class="n">st_read</span><span class="p">(</span><span class="n">dsn</span> <span class="o">=</span> <span class="s2">&quot;~/data/natural_earth2/ne_10m_admin_0_countries.shp&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">places</span> <span class="o">&lt;-</span> <span class="n">st_read</span><span class="p">(</span><span class="n">dsn</span> <span class="o">=</span> <span class="s2">&quot;~/data/natural_earth2/ne_10m_populated_places.shp&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">countries</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_sf</span><span class="p">()</span>
</pre></div>
</div>
<p>Con esto obtenemos un sencillo mapa del mundo:</p>
<img alt="../../_images/r_plot1.png" src="../../_images/r_plot1.png" />
<p>Cuando se lee un conjunto de datos OGR en R de esta forma, obtenemos un objeto que se comporta bastante como un data frame. Podemos usar el campo <code class="docutils literal notranslate"><span class="pre">admin</span></code> para seleccionar de entre los datos mundiales sólo el Reino Unido:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; uk &lt;- countries[countries$admin == &#39;United Kingdom&#39;,]
&gt; ggplot(uk) + geom_sf()
</pre></div>
</div>
<img alt="../../_images/r_plot2.png" src="../../_images/r_plot2.png" />
<p>Esto puede parecer un poco aplastado a cualquiera que viva allí, ya que estarán más acostumbrados a un sistema de coordenadas centrado en su latitud. Actualmente el objeto no tiene un sistema de coordenadas asignado.</p>
<p>Necesitamos asignar un CRS al objeto antes de poder transformarlo con la función sf::st_transform del paquete sf. Lo transformamos a EPSG:27700, que es  sistema de referencia de coordenadas del Servicio Cartográfico de Reino Unido</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">ukos</span> <span class="o">&lt;-</span> <span class="n">st_transform</span><span class="p">(</span><span class="n">uk</span><span class="p">,</span><span class="mi">27700</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">ukos</span><span class="p">)</span> <span class="o">+</span> <span class="n">geom_sf</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../../_images/r_plot2_1.png" src="../../_images/r_plot2_1.png" />
<p>Esto dibuja el mapa básico de los datos transformados. Ahora queremos añadir algunos puntos del conjunto de datos de áreas pobladas. De nuevo, hacemos un subconjutno de los puntos y los transformamos al sistema de referencia de coordenadas del Servicio Cartográfico:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; ukpop &lt;- places[places$SOV0NAME == &#39;United Kingdom&#39;,]
&gt; ukpop &lt;- st_transform(ukpop,27700)
</pre></div>
</div>
<p>Agregamos estos puntos al mapa base, escalando su tamaño por la raíz cuadrada escalada de la población (porque eso hace un símbolo con área proporcional a la población), establecemos el color en rojo y el carácter de trazado en una burbuja sólida:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; ggplot() +
&gt;   geom_sf(data = ukos) +                                                          # add UK shape to the map
&gt;   geom_sf(data = ukpop,                                                           # add the Populated places
&gt;           aes(size = ukpop$POP_MAX/100000),                       # fix size of points (by area)
&gt;           colour = &#39;red&#39;, alpha = 1/5) +                          # set points colour and transparency
&gt;   coord_sf(crs = 27700, datum= sf::st_crs(27700),         # set a bounding box
&gt;            xlim = st_bbox(ukos[c(1,3)]),                          # for the map
&gt;            ylim = st_bbox(ukos[c(2,4)])
&gt;           ) +
&gt;   ggtitle(&#39;Uk Population centre sizes&#39;) +                         # set the map title
&gt;       theme(legend.position = &#39;bottom&#39;) +                         # Legend position
&gt;           scale_size_area(name = &#39;Population \nin 100K&#39;)  # 0 value means 0 area + legend title
</pre></div>
</div>
<p>y aparece nuestra imagen final:</p>
<img alt="../../_images/r_plot3.png" src="../../_images/r_plot3.png" />
<div class="admonition tip">
<p class="admonition-title">Truco</p>
<p>Para salir de R, escriba <code class="docutils literal notranslate"><span class="pre">q()</span></code> y pulse return. R le preguntará si desea guardar su espacio de trabajo como un archivo de imagen de datos de R. Cuando se inicia R de nuevo desde un directorio con un <code class="docutils literal notranslate"><span class="pre">.RData</span></code> archivo que restaurará todos sus datos desde allí.</p>
</div>
</section>
<section id="vignettes">
<h2><a class="toc-backref" href="#id4">Viñetas</a><a class="headerlink" href="#vignettes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En el pasado, la documentación de los paquetes de R tendía a ser simplemente la página de ayuda para cada función. Ahora, se anima a os autores de paquetes a escribir una “viñeta” como una introducción amistosa al paquete. Si ejecuta la función <code class="docutils literal notranslate"><span class="pre">vignete()</span></code> sin argumentos, obtendrá la lista de todas las viñetas disponibles en el sistema. Pruebe <code class="docutils literal notranslate"><span class="pre">vignette(&quot;sf1&quot;)</span></code> para una introducción ligeramente técnica al paquete espacial R.</p>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id5">¿Qué sigue?</a><a class="headerlink" href="#what-next" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para información general sobre R, consulte la <a class="reference external" href="https://cran.r-project.org/doc/manuals/R-intro.html">Introducción a R</a> o cualquier documentación de la página principal del  <a class="reference external" href="https://www.r-project.org/">Proyecto R</a>.</p>
<p>Para obtener más información sobre los aspectos espaciales de R, el mejor lugar para comenzar es probablemente la <a class="reference external" href="https://cran.r-project.org/web/views/Spatial.html">Vista de Tareas Espaciales de R</a></p>
<p>También puede consultar la página <a class="reference external" href="https://www.rspatial.org">R-Spatial</a> page.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>