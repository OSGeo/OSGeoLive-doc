
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>actinia クイックスタート &#8212; OSGeoLive 14.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="EOxServer" href="../overview/eoxserver_overview.html" />
    <link rel="prev" title="actinia" href="../overview/actinia_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head>
  <body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div> 
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://actinia.mundialis.de/"><img alt="../../_images/logo_actinia.png" class="align-right" src="../../_images/logo_actinia.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="section" id="actinia-quickstart">
<h1>actinia クイックスタート<a class="headerlink" href="#actinia-quickstart" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Actiniaは、地理データのスケーラブルで分散した高パフォーマンス処理のためのオープンソースREST APIであり、計算タスクにGRASS GISを使用します。Actiniaは、衛星画像、時系列衛星画像データ、ベクタデータを処理するREST APIを提供しています。</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction-to-ace-actinia-command-execution" id="id2">ace - actinia コマンド実行の概要</a></li>
<li><a class="reference internal" href="#setup-your-environment" id="id3">環境のセットアップ</a></li>
<li><a class="reference internal" href="#access-sample-data" id="id4">サンプルデータへのアクセス</a><ul>
<li><a class="reference internal" href="#access-data-from-external-sources" id="id5">外部ソースからデータにアクセスする</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inspect-the-rest-call-prior-to-submission" id="id6">送信前にRESTコールを検査する</a></li>
<li><a class="reference internal" href="#display-a-map-map-rendering" id="id7">マップ表示 - マップレンダリング</a></li>
<li><a class="reference internal" href="#script-examples" id="id8">スクリプトの例</a><ul>
<li><a class="reference internal" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" id="id9">例1: 標高モデルからの勾配、アスペクト、および一変量統計の計算</a></li>
<li><a class="reference internal" href="#example-2-orthophoto-image-segmentation-with-export" id="id10">例2: オルソ写真画像のセグメント化とエキスポート</a></li>
<li><a class="reference internal" href="#examples-for-persistent-processing" id="id11">永続処理の例</a></li>
</ul>
</li>
<li><a class="reference internal" href="#things-to-try" id="id12">試してみること</a><ul>
<li><a class="reference internal" href="#create-new-locations" id="id13">新しい場所の作成</a></li>
<li><a class="reference internal" href="#install-grass-gis-addons-extensions" id="id14">GRASS GISアドオン(拡張機能)のインストール</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-next" id="id15">次のステップ</a></li>
</ul>
</div>
<p>Actinia は様々な方法で利用されています。</p>
<ul class="simple">
<li><cite>curl</cite> などのコマンドラインツール</li>
<li>ブラウザ用の <cite>Postman</cite> 拡張</li>
<li>GRASS GISセッションを開き、 <cite>ace</cite> (actiniaコマンド実行: actinia command execution)ツールを使用する</li>
<li>REST APIに対する他のインターフェース</li>
</ul>
<p>このクイックスタートでは、GRASS GISを使用して、セッションから(GRASS GISを使用している) actinia サーバーへのコマンドを便利に起動します。このアイデアは、小さなデータ・セットに対してローカルでワークフローを迅速に開発し、それをサーバー上で実行するというものです。</p>
<div class="section" id="introduction-to-ace-actinia-command-execution">
<h2><a class="toc-backref" href="#id2">ace - actinia コマンド実行の概要</a><a class="headerlink" href="#introduction-to-ace-actinia-command-execution" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal"><span class="pre">ace</span></code> ツール(<a class="reference external" href="https://github.com/mundialis/actinia_core/tree/master/scripts/README.md">詳細</a>) は、単一のGRASS GISコマンドあるいはactinia RESTサービス(<a class="reference external" href="https://actinia.mundialis.de/">https://actinia.mundialis.de/</a>) 上のGRASS GISコマンドのリストの実行を可能にします。さらに、ジョブ管理、ユーザがアクセスできる場所、マップセット、マップレイヤのリスト機能、およびマップセットの作成と削除も提供します。</p>
<p><code class="docutils literal"><span class="pre">ace</span></code> ツールはアクティブなGRASS GISセッションで実行されなければならず、このセッションの現在の場所を使ってactinia サービスにアクセスします。</p>
<p>現在の場所の設定は <code class="docutils literal"><span class="pre">--location</span> <span class="pre">LOCATION_NAME</span></code> オプションで上書きできます。すべてのコマンドは、<strong>ephemeral</strong> データベースでデフォルトごとに実行されます。したがって、生成された出力は、拡張GRASSコマンドを使用してエクスポートする必要があります。</p>
<p>オプション <code class="docutils literal"><span class="pre">--persistent</span> <span class="pre">MAPSET_NAME</span></code> は、 <strong>persistent</strong> ユーザデータベースでコマンドを実行できます。<code class="docutils literal"><span class="pre">--location</span> <span class="pre">LOCATION_NAME</span></code> オプションと併用できます。</p>
</div>
<div class="section" id="setup-your-environment">
<h2><a class="toc-backref" href="#id3">環境のセットアップ</a><a class="headerlink" href="#setup-your-environment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>GRASS GISセッションでは、必ず次のコマンドを実行してください。</p>
<p>ユーザは、次の環境変数を設定して、Actiniaサーバと認証情報を指定する必要があります:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># set credentials and REST server URL</span>
<span class="n">export</span> <span class="n">ACTINIA_USER</span><span class="o">=</span><span class="s1">&#39;demouser&#39;</span>
<span class="n">export</span> <span class="n">ACTINIA_PASSWORD</span><span class="o">=</span><span class="s1">&#39;gu3st!pa55w0rd&#39;</span>
<span class="n">export</span> <span class="n">ACTINIA_URL</span><span class="o">=</span><span class="s1">&#39;https://actinia.mundialis.de/latest&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="access-sample-data">
<h2><a class="toc-backref" href="#id4">サンプルデータへのアクセス</a><a class="headerlink" href="#access-sample-data" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>選択したデータセットはデモユーザが使用できます。アクセスできる場所を一覧表示するには</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="nb">list</span><span class="o">-</span><span class="n">locations</span>
<span class="p">[</span><span class="s1">&#39;latlong_wgs84&#39;</span><span class="p">,</span> <span class="s1">&#39;ECAD&#39;</span><span class="p">,</span> <span class="s1">&#39;nc_spm_08&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>次のコマンドは、アクティブなGRASS GISセッション(nc_spm_08)内の現在位置のマップセットの一覧を表示します:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># running ace in the &quot;nc_spm_08&quot; location</span>
<span class="c1"># (the current location name is propagated to the server):</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlong_wgs84</span> <span class="o">--</span><span class="nb">list</span><span class="o">-</span><span class="n">mapsets</span>
<span class="p">[</span><span class="s1">&#39;PERMANENT&#39;</span><span class="p">,</span> <span class="s1">&#39;landsat&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="access-data-from-external-sources">
<h3><a class="toc-backref" href="#id5">外部ソースからデータにアクセスする</a><a class="headerlink" href="#access-data-from-external-sources" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>actinia 固有の拡張機能で、GRASS GISコマンドは拡張されています。<code class="docutils literal"><span class="pre">+</span></code> 演算子は、入力パラメータに、Webで指定されるリソースを指定したり、出力パラメータのエクスポート先を指定したりできます。</p>
<p>重要なことは、ローカルロケーションとマップセットの名前が、RESTサーバの名前と一致する必要があることです。</p>
<p>現在使用可能なデータセットは次のとおりです(投影によって編成):</p>
<ul class="simple">
<li>ノースカロライナ州のサンプルデータセット(NC State-Plane metric CRS、EPSG:3358):<ul>
<li>ベースのカートグラフィー (<code class="docutils literal"><span class="pre">nc_spm_08/PERMANENT</span></code>; source: <a class="reference external" href="https://grassbook.org/datasets/datasets-3rd-edition/">https://grassbook.org/datasets/datasets-3rd-edition/</a>)</li>
<li>ランドサットのサブシーン (<code class="docutils literal"><span class="pre">nc_spm_08/landsat</span></code>; source: <a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>)</li>
</ul>
</li>
<li>緯度-経度による位置指定 (LatLong WGS84, EPSG:4326):<ul>
<li>空 (<code class="docutils literal"><span class="pre">latlong_wgs84/PERMANENT/</span></code>)</li>
<li>16日間の NDVI, MOD13C1, V006, CMG 0.05 deg res. (<code class="docutils literal"><span class="pre">latlong_wgs84/modis_ndvi_global/</span></code>; source: <a class="reference external" href="https://lpdaac.usgs.gov/products/mod13c1v006/">https://lpdaac.usgs.gov/products/mod13c1v006/</a>)</li>
<li>LST growing degree days asia 2017 (<code class="docutils literal"><span class="pre">latlong_wgs84/asia_gdd_2017/</span></code>;
source: <a class="reference external" href="https://www.mundialis.de/en/temperature-data/">https://www.mundialis.de/en/temperature-data/</a>)</li>
<li>LST tropical days asia 2017 (<code class="docutils literal"><span class="pre">latlong_wgs84/asia_tropical_2017/</span></code>)</li>
<li>LST 日次温度  アジア 2017, 最小、最大、平均を含む (<code class="docutils literal"><span class="pre">latlong_wgs84/asia_lst_daily_2017/</span></code>)</li>
</ul>
</li>
<li>欧州 (EU LAEA CRS, EPSG:3035):<ul>
<li>EU DEM 25m V1.1 (<code class="docutils literal"><span class="pre">eu_laea/PERMANENT/</span></code>; source:
<a class="reference external" href="https://land.copernicus.eu/imagery-in-situ/eu-dem">https://land.copernicus.eu/imagery-in-situ/eu-dem</a>)</li>
<li>CORINE Landcover 2012, g100_clc12_V18_5 (<code class="docutils literal"><span class="pre">eu_laea/corine_2012/</span></code>;
source:
<a class="reference external" href="https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012">https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012</a>)</li>
</ul>
</li>
<li>モルワイデ図法の世界地図 (EPSG 54009):<ul>
<li>GHS_POP_GPW42015_GLOBE_R2015A_54009_250_v1_0
(<code class="docutils literal"><span class="pre">world_mollweide/pop_jrc</span></code>; source:
<a class="reference external" href="https://ghsl.jrc.ec.europa.eu/ghs_pop.php">https://ghsl.jrc.ec.europa.eu/ghs_pop.php</a>)</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="inspect-the-rest-call-prior-to-submission">
<h2><a class="toc-backref" href="#id6">送信前にRESTコールを検査する</a><a class="headerlink" href="#inspect-the-rest-call-prior-to-submission" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>actinia 処理チェインの JSONリクエストを生成するには、単純に–dry-runフラグを追加します:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="n">r</span><span class="o">.</span><span class="n">slope</span><span class="o">.</span><span class="n">aspect</span> <span class="n">elevation</span><span class="o">=</span><span class="n">elevation</span> <span class="n">slope</span><span class="o">=</span><span class="n">myslope</span>
</pre></div>
</div>
</div>
<div class="section" id="display-a-map-map-rendering">
<h2><a class="toc-backref" href="#id7">マップ表示 - マップレンダリング</a><a class="headerlink" href="#display-a-map-map-rendering" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>マップのレンダリングは非常に簡単(かつ高速)です:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># check amount of pixels, just FYI</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlong_wgs84</span> <span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">globcover</span><span class="nd">@globcover</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlong_wgs84</span> <span class="o">--</span><span class="n">render</span><span class="o">-</span><span class="n">raster</span> <span class="n">globcover</span><span class="nd">@globcover</span>
</pre></div>
</div>
<div class="figure" id="id1">
<img alt="ESA Globcover map shown by actinia" src="../../_images/esa_globcover_rendered_by_ace.png" />
<p class="caption"><span class="caption-text">actinia による ESA Globcover map の表示</span></p>
</div>
<p>一時的処理は、actinia のデフォルトの処理方法です。コマンドは、処理後に削除される一時マップセットで実行されます。GRASS GISモジュールの出力を書き出して、計算結果を保存し、ダウンロードしてさらに解析することができます。現在サポートされているエクスポートフォーマットは次のとおりです:</p>
<ul class="simple">
<li>ラスタ: <code class="docutils literal"><span class="pre">COG</span></code>, <code class="docutils literal"><span class="pre">GTiff</span></code></li>
<li>ベクタ: <code class="docutils literal"><span class="pre">ESRI_Shapefile</span></code>, <code class="docutils literal"><span class="pre">GeoJSON</span></code>, <code class="docutils literal"><span class="pre">GML</span></code>, <code class="docutils literal"><span class="pre">GPKG</span></code></li>
<li>表: <code class="docutils literal"><span class="pre">CSV</span></code>, <code class="docutils literal"><span class="pre">TXT</span></code></li>
</ul>
</div>
<div class="section" id="script-examples">
<h2><a class="toc-backref" href="#id8">スクリプトの例</a><a class="headerlink" href="#script-examples" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model">
<h3><a class="toc-backref" href="#id9">例1: 標高モデルからの勾配、アスペクト、および一変量統計の計算</a><a class="headerlink" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>次のコマンド(スクリプトに格納され、 <code class="docutils literal"><span class="pre">ace</span></code> で実行されます)は、インターネットの情報源からラスタレイヤをラスタマップ <code class="docutils literal"><span class="pre">elev</span></code> として読み込み、計算領域をマップに設定し勾配を計算します。ラスタレイヤに関する追加情報は <code class="docutils literal"><span class="pre">r.info</span></code> で要求されます。</p>
<p>次のスクリプトをテキストファイル <code class="docutils literal"><span class="pre">ace_dtm_statistics.sh</span></code> として保存します:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># grass78 ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="n">g</span><span class="o">.</span><span class="n">region</span> <span class="n">raster</span><span class="o">=</span><span class="n">elev</span><span class="nd">@https</span><span class="p">:</span><span class="o">//</span><span class="n">storage</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">graas</span><span class="o">-</span><span class="n">geodata</span><span class="o">/</span><span class="n">elev_ned_30m</span><span class="o">.</span><span class="n">tif</span> <span class="o">-</span><span class="n">ap</span>
<span class="c1"># Compute univariate statistics</span>
<span class="n">r</span><span class="o">.</span><span class="n">univar</span> <span class="nb">map</span><span class="o">=</span><span class="n">elev</span>
<span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">elev</span>
<span class="c1"># Compute the slope of the imported map and mark it for export as a COG file (Cloud Optimized GeoTIFF)</span>
<span class="n">r</span><span class="o">.</span><span class="n">slope</span><span class="o">.</span><span class="n">aspect</span> <span class="n">elevation</span><span class="o">=</span><span class="n">elev</span> <span class="n">slope</span><span class="o">=</span><span class="n">slope_elev</span><span class="o">+</span><span class="n">COG</span>
<span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">slope_elev</span>
</pre></div>
</div>
<p>テキストファイル内のスクリプトを <code class="docutils literal"><span class="pre">/tmp/ace_dtm_statistics.sh</span></code> に保存し、保存したスクリプトを次のように実行します。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">script</span> <span class="n">ace_dtm_statistics</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>結果(メッセージ、統計、ファイル)はRESTリソースとして提供されます。</p>
<p>処理チェーンJSONリクエストを生成するには、–dry-run フラグを追加すればよい</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">script</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ace_dtm_statistics</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>出力は次のようになります:</p>
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;g.region&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;g.region_1804289383&quot;</span><span class="p">,</span>
      <span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="s2">&quot;pa&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;import_descr&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;elev&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;r.univar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;r.univar_1804289383&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;elev&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;percentile&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;90&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;separator&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;pipe&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;r.info&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;elev&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;r.slope.aspect&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;r.slope.aspect_1804289383&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;elevation&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;elev&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;format&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;degrees&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;precision&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;FCELL&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;zscale&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;min_slope&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;export&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;COG&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;raster&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;slope&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;slope_elev&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;r.info&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span>
      <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;map&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;slope_elev&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-2-orthophoto-image-segmentation-with-export">
<h3><a class="toc-backref" href="#id10">例2: オルソ写真画像のセグメント化とエキスポート</a><a class="headerlink" href="#example-2-orthophoto-image-segmentation-with-export" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>次のスクリプトをテキストファイル <code class="docutils literal"><span class="pre">/tmp/ace_segmentation.sh</span></code> として保存してください:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># grass78 ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="c1"># we apply a trick for the import of multi-band GeoTIFFs:</span>
<span class="c1"># install with: g.extension importer url=https://github.com/mundialis/importer</span>
<span class="n">importer</span> <span class="n">raster</span><span class="o">=</span><span class="n">ortho2010</span><span class="nd">@https</span><span class="p">:</span><span class="o">//</span><span class="n">apps</span><span class="o">.</span><span class="n">mundialis</span><span class="o">.</span><span class="n">de</span><span class="o">/</span><span class="n">workshops</span><span class="o">/</span><span class="n">osgeo_ireland2017</span><span class="o">/</span><span class="n">north_carolina</span><span class="o">/</span><span class="n">ortho2010_t792_subset_20cm</span><span class="o">.</span><span class="n">tif</span>
<span class="c1"># The importer has created three new raster maps, one for each band in the geotiff file</span>
<span class="c1"># stored them in an image group</span>
<span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="nb">map</span><span class="o">=</span><span class="n">ortho2010</span><span class="o">.</span><span class="mi">1</span>
<span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="nb">map</span><span class="o">=</span><span class="n">ortho2010</span><span class="o">.</span><span class="mi">2</span>
<span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="nb">map</span><span class="o">=</span><span class="n">ortho2010</span><span class="o">.</span><span class="mi">3</span>
<span class="c1"># Set the region and resolution</span>
<span class="n">g</span><span class="o">.</span><span class="n">region</span> <span class="n">raster</span><span class="o">=</span><span class="n">ortho2010</span><span class="o">.</span><span class="mi">1</span> <span class="n">res</span><span class="o">=</span><span class="mi">1</span> <span class="o">-</span><span class="n">p</span>
<span class="c1"># Note: the RGB bands are organized as a group</span>
<span class="c1"># export as a as COG file (Cloud Optimized GeoTIFF)</span>
<span class="n">i</span><span class="o">.</span><span class="n">segment</span> <span class="n">group</span><span class="o">=</span><span class="n">ortho2010</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.25</span> <span class="n">output</span><span class="o">=</span><span class="n">ortho2010_segment_25</span><span class="o">+</span><span class="n">COG</span> <span class="n">goodness</span><span class="o">=</span><span class="n">ortho2010_seg_25_fit</span><span class="o">+</span><span class="n">COG</span>
<span class="c1"># Finally vectorize segments with r.to.vect and export as a GeoJSON file</span>
<span class="n">r</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">vect</span> <span class="nb">input</span><span class="o">=</span><span class="n">ortho2010_segment_25</span> <span class="nb">type</span><span class="o">=</span><span class="n">area</span> <span class="n">output</span><span class="o">=</span><span class="n">ortho2010_segment_25</span><span class="o">+</span><span class="n">GeoJSON</span>
</pre></div>
</div>
<p>テキストファイルに保存されているスクリプトを次のように実行します</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">script</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ace_segmentation</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>結果(メッセージ、統計、ファイル)はRESTリソースとして提供されます。</p>
</div>
<div class="section" id="examples-for-persistent-processing">
<h3><a class="toc-backref" href="#id11">永続処理の例</a><a class="headerlink" href="#examples-for-persistent-processing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>GRASS GISコマンドは、ユーザ固有の永続データベースで実行できます。ユーザは既存の場所にマップセットを作成する必要があります。このマップセットには <code class="docutils literal"><span class="pre">ace</span></code> を介してアクセスできます。このマップセットで実行されるコマンドのすべての処理結果は、永続的に格納されます。処理後に正しい名前を使用して永続ストレージに移動される一時的なデータベースで処理が実行されることに注意してください。</p>
<p><strong>test_mapset</strong> という名前で <strong>nc_spm_08</strong> という場所に新しいマップセットを作成するには、以下のコマンドを実行する必要があります。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">mapset</span> <span class="n">test_mapset</span>
</pre></div>
</div>
<p>新しい永続マップセット内の統計スクリプトからコマンドを実行します。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">persistent</span> <span class="n">test_mapset</span> <span class="o">--</span><span class="n">script</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ace_dtm_statistics</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>test_mapset 内のスクリプトで作成されたすべてのラスタマップを表示します。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">persistent</span> <span class="n">test_mapset</span> <span class="n">g</span><span class="o">.</span><span class="n">list</span> <span class="nb">type</span><span class="o">=</span><span class="n">raster</span> <span class="n">mapset</span><span class="o">=</span><span class="n">test_mapset</span>
</pre></div>
</div>
<p>ラスタマップの高度と slope_elev に関する情報を表示する</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">persistent</span> <span class="n">test_mapset</span> <span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">elev</span><span class="nd">@test_mapset</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">persistent</span> <span class="n">test_mapset</span> <span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">slope_elev</span><span class="nd">@test_mapset</span>
</pre></div>
</div>
<p>test_mapset を削除します(削除時は常に名前をダブルチェックします)。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">nc_spm_08</span> <span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">mapset</span> <span class="n">test_mapset</span>
</pre></div>
</div>
<p>アクティブなGRASS GISセッションに同一のロケーション/マップセット名がある場合は、エイリアスを使用して、各コマンド呼び出しの永続オプションを回避できます。</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="n">acp</span><span class="o">=</span><span class="s2">&quot;ace --persistent `g.mapset -p`&quot;</span>
</pre></div>
</div>
<p>アクティブなGRASS GISセッションでは、現在の場所は <strong>nc_spm_08</strong> であり、現在のマップセットは <strong>test_mapset</strong> であると仮定します。上記のコマンドは、次のように実行できます:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">ace</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">mapset</span> <span class="n">test_mapset</span>
<span class="n">acp</span> <span class="o">--</span><span class="n">script</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">ace_dtm_statistics</span><span class="o">.</span><span class="n">sh</span>
<span class="n">acp</span> <span class="n">g</span><span class="o">.</span><span class="n">list</span> <span class="nb">type</span><span class="o">=</span><span class="n">raster</span> <span class="n">mapset</span><span class="o">=</span><span class="n">test_mapset</span>
<span class="n">acp</span> <span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">elev</span><span class="nd">@test_mapset</span>
<span class="n">acp</span> <span class="n">r</span><span class="o">.</span><span class="n">info</span> <span class="n">slope_elev</span><span class="nd">@test_mapset</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="things-to-try">
<h2><a class="toc-backref" href="#id12">試してみること</a><a class="headerlink" href="#things-to-try" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="create-new-locations">
<h3><a class="toc-backref" href="#id13">新しい場所の作成</a><a class="headerlink" href="#create-new-locations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># create new location</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">location</span> <span class="n">latlon_test</span> <span class="mi">4326</span>
<span class="c1"># create new mapset within location</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlon_test</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">mapset</span> <span class="n">user1</span>
</pre></div>
</div>
</div>
<div class="section" id="install-grass-gis-addons-extensions">
<h3><a class="toc-backref" href="#id14">GRASS GISアドオン(拡張機能)のインストール</a><a class="headerlink" href="#install-grass-gis-addons-extensions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="c1"># list existing addons, see also</span>
<span class="c1"># https://grass.osgeo.org/grass7/manuals/addons/</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlon_test</span> <span class="n">g</span><span class="o">.</span><span class="n">extension</span> <span class="o">-</span><span class="n">l</span>

<span class="c1"># install machine learning addon r.learn.ml</span>
<span class="n">ace</span> <span class="o">--</span><span class="n">location</span> <span class="n">latlon_test</span> <span class="n">g</span><span class="o">.</span><span class="n">extension</span> <span class="n">r</span><span class="o">.</span><span class="n">learn</span><span class="o">.</span><span class="n">ml</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-next">
<h2><a class="toc-backref" href="#id15">次のステップ</a><a class="headerlink" href="#what-next" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>actinia webサイト: <a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a></li>
<li>actinia チュートリアル: <a class="reference external" href="https://neteler.gitlab.io/actinia-introduction">https://neteler.gitlab.io/actinia-introduction</a></li>
<li>追加文献: Neteler, M., Gebbert, S., Tawalika, C., Bettge, A., Benelcadi, H., Löw, F., Adams, T, Paulsen, H. (2019). Actinia:クラウドベースの地理処理。In Proc. of the 2019 conference on Big Data from Space (BiDS’2019) (pp. 41-44). EUR 29660 EN, Publications Office of the European Union 5, Luxembourg: P. Soille, S. Loekken, and S. Albani (Eds.). (<a class="reference external" href="https://zenodo.org/record/2631917">DOI</a>)</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>