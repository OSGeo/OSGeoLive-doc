
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>actinia クイックスタート &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="EOxServer" href="../overview/eoxserver_overview.html" />
    <link rel="prev" title="actinia" href="../overview/actinia_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://actinia.mundialis.de/"><img alt="../../_images/logo_actinia.png" class="align-right" src="../../_images/logo_actinia.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>このプロジェクトはOSGeoLive仮想マシンディスク(VMDK)にのみ含まれています</p>
</div>
<section id="actinia-quickstart">
<h1>actinia クイックスタート<a class="headerlink" href="#actinia-quickstart" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Actiniaは、地理データのスケーラブルな分散・高性能処理のためのオープンソースのREST APIで、計算タスクには主に <a class="reference external" href="https://grass.osgeo.org/">GRASS GIS</a> を使用します。Actiniaは、衛星画像、時系列衛星画像データ、ベクタデータを処理するREST APIを提供しています。</p>
<div class="contents local topic" id="contents">
<p class="topic-title">目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction-to-ace-actinia-command-execution" id="id2">ace - actinia コマンド実行の概要</a></p></li>
<li><p><a class="reference internal" href="#setup-your-environment" id="id3">環境のセットアップ</a></p></li>
<li><p><a class="reference internal" href="#access-sample-data" id="id4">サンプルデータへのアクセス</a></p>
<ul>
<li><p><a class="reference internal" href="#access-data-from-external-sources" id="id5">外部ソースからデータにアクセスする</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inspect-the-rest-call-prior-to-submission" id="id6">送信前にRESTコールを検査する</a></p></li>
<li><p><a class="reference internal" href="#display-a-map-map-rendering" id="id7">マップ表示 - マップレンダリング</a></p></li>
<li><p><a class="reference internal" href="#script-examples" id="id8">スクリプトの例</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" id="id9">例1: 標高モデルからの勾配、アスペクト、および一変量統計の計算</a></p></li>
<li><p><a class="reference internal" href="#example-2-orthophoto-image-segmentation-with-export" id="id10">例2: オルソ写真画像のセグメント化とエキスポート</a></p></li>
<li><p><a class="reference internal" href="#examples-for-persistent-processing" id="id11">永続処理の例</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#things-to-try" id="id12">試してみること</a></p>
<ul>
<li><p><a class="reference internal" href="#install-on-osgeolive-vm-with-docker-compose" id="id13">Install on OSGeoLive VM with Docker Compose</a></p></li>
<li><p><a class="reference internal" href="#create-new-locations" id="id14">新しい場所の作成</a></p></li>
<li><p><a class="reference internal" href="#install-grass-gis-addons-extensions" id="id15">GRASS GISアドオン(拡張機能)のインストール</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-next" id="id16">次のステップ</a></p></li>
</ul>
</div>
<p>Actinia は様々な方法で利用されています。</p>
<ul class="simple">
<li><p><cite>curl</cite> などのコマンドラインツール</p></li>
<li><p>ブラウザ用の <cite>Postman</cite> または <cite>RESTman</cite> 拡張</p></li>
<li><p>GRASS GISセッションを開き、 <cite>ace</cite> (actiniaコマンド実行: actinia command execution)ツールを使用する</p></li>
<li><p>REST APIに対する他のインターフェース</p></li>
</ul>
<p>このクイックスタートでは、GRASS GISを使用して、セッションから(GRASS GISを使用している) actinia サーバーへのコマンドを便利に起動します。このアイデアは、小さなデータ・セットに対してローカルでワークフローを迅速に開発し、それをサーバー上で実行するというものです。</p>
<section id="introduction-to-ace-actinia-command-execution">
<h2><a class="toc-backref" href="#id2">ace - actinia コマンド実行の概要</a><a class="headerlink" href="#introduction-to-ace-actinia-command-execution" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">ace</span></code> ツール(<a class="reference external" href="https://neteler.gitlab.io/actinia-introduction/#controlling-actinia-from-a-running-grass-gis-session">詳細</a>) は、単一のGRASS GISコマンドあるいはactinia RESTサービス(<a class="reference external" href="https://actinia.mundialis.de/">https://actinia.mundialis.de/</a>) 上のGRASS GISコマンドのリストの実行を可能にします。さらに、ジョブ管理、ユーザがアクセスできる場所、マップセット、マップレイヤのリスト機能、およびマップセットの作成と削除も提供します。</p>
<p><code class="docutils literal notranslate"><span class="pre">ace</span></code> ツールはアクティブなGRASS GISセッションで実行されなければなりません。<code class="docutils literal notranslate"><span class="pre">g.extension</span> <span class="pre">extension=ace</span> <span class="pre">url=https://github.com/mundialis/ace</span></code> でインストールされます。</p>
<p>すべてのコマンドは、<strong>ephemeral</strong> データベースでデフォルトごとに実行されます。したがって、生成された出力は、拡張GRASSコマンドを使用してエクスポートする必要があります。</p>
<p>オプション <code class="docutils literal notranslate"><span class="pre">mapset=MAPSET_NAME</span></code> は、永続的なユーザーデータベースでコマンドを実行できるようにします。これは <code class="docutils literal notranslate"><span class="pre">location=LOCATION_NAME</span></code> オプションと一緒に使用することができます。</p>
</section>
<section id="setup-your-environment">
<h2><a class="toc-backref" href="#id3">環境のセットアップ</a><a class="headerlink" href="#setup-your-environment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>GRASS GISセッションでは、必ず次のコマンドを実行してください。</p>
<p>ユーザは、次の環境変数を設定して、Actiniaサーバと認証情報を指定する必要があります:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># set credentials and REST server URL</span>
<span class="nb">export</span> <span class="nv">ACTINIA_USER</span><span class="o">=</span><span class="s1">&#39;demouser&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_PASSWORD</span><span class="o">=</span><span class="s1">&#39;gu3st!pa55w0rd&#39;</span>
<span class="nb">export</span> <span class="nv">ACTINIA_URL</span><span class="o">=</span><span class="s1">&#39;https://actinia.mundialis.de/latest&#39;</span>
</pre></div>
</div>
</section>
<section id="access-sample-data">
<h2><a class="toc-backref" href="#id4">サンプルデータへのアクセス</a><a class="headerlink" href="#access-sample-data" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>選択したデータセットはデモユーザが使用できます。アクセスできる場所を一覧表示するには</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -l
<span class="o">[</span><span class="s1">&#39;latlong_wgs84&#39;</span>, <span class="s1">&#39;ECAD&#39;</span>, <span class="s1">&#39;nc_spm_08&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>次のコマンドは、アクティブなGRASS GISセッション(nc_spm_08)内の現在位置のマップセットの一覧を表示します:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># running ace in the &quot;nc_spm_08&quot; location</span>
<span class="c1"># (the current location name is propagated to the server):</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> -m
<span class="o">[</span><span class="s1">&#39;PERMANENT&#39;</span>, <span class="s1">&#39;landsat&#39;</span>, <span class="s1">&#39;modis_lst&#39;</span><span class="o">]</span>
</pre></div>
</div>
<section id="access-data-from-external-sources">
<h3><a class="toc-backref" href="#id5">外部ソースからデータにアクセスする</a><a class="headerlink" href="#access-data-from-external-sources" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>actinia 固有の拡張機能で、GRASS GISコマンドは拡張されています。入力パラメータとして <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> オペレータを指定することで、Webにあるリソースをインポートしたり、出力パラメータのエクスポートを指定することができます。</p>
<p>重要なことは、ローカルロケーションとマップセットの名前が、RESTサーバの名前と一致する必要があることです。</p>
<p>現在使用可能なデータセットは次のとおりです(投影法毎に整理):</p>
<ul class="simple">
<li><p>ノースカロライナ州のサンプルデータセット(NC State-Plane metric CRS、EPSG:3358):</p>
<ul>
<li><p>背景地図 (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/PERMANENT</span></code>; ソース: <a class="reference external" href="https://grassbook.org/datasets/datasets-3rd-edition/">https://grassbook.org/datasets/datasets-3rd-edition/</a>)</p></li>
<li><p>ランドサットのサブシーン (<code class="docutils literal notranslate"><span class="pre">nc_spm_08/landsat</span></code>; ソース: <a class="reference external" href="https://grass.osgeo.org/download/data/">https://grass.osgeo.org/download/data/</a>)</p></li>
</ul>
</li>
<li><p>緯度-経度による位置指定 (緯経度 WGS84、EPSG:4326):</p>
<ul>
<li><p>空 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/PERMANENT/</span></code>)</p></li>
<li><p>16日間の NDVI、MOD13C1、V006、CMG 0.05 度解像度(<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/modis_ndvi_global/</span></code>; ソース: <a class="reference external" href="https://lpdaac.usgs.gov/products/mod13c1v006/">https://lpdaac.usgs.gov/products/mod13c1v006/</a>)</p></li>
<li><p>LST 有効積算温度 アジア 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_gdd_2017/</span></code>; ソース: <a class="reference external" href="https://www.mundialis.de/en/temperature-data/">https://www.mundialis.de/en/temperature-data/</a>)</p></li>
<li><p>LST 熱帯日数 アジア 2017 (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_tropical_2017/</span></code>)</p></li>
<li><p>LST 日次温度 アジア 2017、最小、最大、平均を含む (<code class="docutils literal notranslate"><span class="pre">latlong_wgs84/asia_lst_daily_2017/</span></code>)</p></li>
</ul>
</li>
<li><p>欧州 (EU LAEA CRS、EPSG:3035):</p>
<ul>
<li><p>EU DEM 25m V1.1 (<code class="docutils literal notranslate"><span class="pre">eu_laea/PERMANENT/</span></code>; ソース: <a class="reference external" href="https://land.copernicus.eu/imagery-in-situ/eu-dem">https://land.copernicus.eu/imagery-in-situ/eu-dem</a>)</p></li>
<li><p>CORINE 土地被覆 2012、g100_clc12_V18_5 (<code class="docutils literal notranslate"><span class="pre">eu_laea/corine_2012/</span></code>; ソース: <a class="reference external" href="https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012">https://land.copernicus.eu/pan-european/corine-land-cover/clc-2012</a>)</p></li>
</ul>
</li>
<li><p>モルワイデ図法の世界地図 (EPSG 54009):</p>
<ul>
<li><p>GHS_POP_GPW42015_GLOBE_R2015A_54009_250_v1_0 (<code class="docutils literal notranslate"><span class="pre">world_mollweide/pop_jrc</span></code>; ソース: <a class="reference external" href="https://ghsl.jrc.ec.europa.eu/ghs_pop.php">https://ghsl.jrc.ec.europa.eu/ghs_pop.php</a>)</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="inspect-the-rest-call-prior-to-submission">
<h2><a class="toc-backref" href="#id6">送信前にRESTコールを検査する</a><a class="headerlink" href="#inspect-the-rest-call-prior-to-submission" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>actinia 処理チェインのJSONリクエストを生成するには、 <code class="docutils literal notranslate"><span class="pre">-d</span></code> (ドライラン)フラグを追加するだけです:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.slope.aspect elevation=elevation slope=myslope&quot;</span> -d
</pre></div>
</div>
</section>
<section id="display-a-map-map-rendering">
<h2><a class="toc-backref" href="#id7">マップ表示 - マップレンダリング</a><a class="headerlink" href="#display-a-map-map-rendering" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>マップのレンダリングは非常に簡単(かつ高速)です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># check amount of pixels, just FYI</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info globcover@globcover&quot;</span>
<span class="c1"># render the map ... 7 billion pixels</span>
<span class="n">ace</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="n">render_raster</span><span class="o">=</span><span class="s2">&quot;globcover@globcover&quot;</span>
</pre></div>
</div>
<figure class="align-default" id="id1">
<img alt="actinia による ESA Globcover マップの表示" src="../../_images/esa_globcover_rendered_by_ace.png" />
<figcaption>
<p><span class="caption-text">actinia による ESA Globcover マップの表示</span><a class="headerlink" href="#id1" title="この画像へのパーマリンク">¶</a></p>
</figcaption>
</figure>
<p>一時的処理は、actinia のデフォルトの処理方法です。コマンドは、処理後に削除される一時マップセットで実行されます。GRASS GISモジュールの出力を書き出して、計算結果を保存し、ダウンロードしてさらに解析することができます。現在サポートされているエクスポートフォーマットは次のとおりです:</p>
<ul class="simple">
<li><p>ラスタ: <code class="docutils literal notranslate"><span class="pre">COG</span></code>、<code class="docutils literal notranslate"><span class="pre">GTiff</span></code></p></li>
<li><p>ベクタ: <code class="docutils literal notranslate"><span class="pre">GPKG</span></code>、<code class="docutils literal notranslate"><span class="pre">GML</span></code>、<code class="docutils literal notranslate"><span class="pre">GeoJSON</span></code>、<code class="docutils literal notranslate"><span class="pre">ESRI_Shapefile</span></code></p></li>
<li><p>表: <code class="docutils literal notranslate"><span class="pre">CSV</span></code>、<code class="docutils literal notranslate"><span class="pre">TXT</span></code></p></li>
</ul>
</section>
<section id="script-examples">
<h2><a class="toc-backref" href="#id8">スクリプトの例</a><a class="headerlink" href="#script-examples" title="このヘッドラインへのパーマリンク">¶</a></h2>
<section id="example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model">
<h3><a class="toc-backref" href="#id9">例1: 標高モデルからの勾配、アスペクト、および一変量統計の計算</a><a class="headerlink" href="#example-1-computing-slope-and-aspect-and-univariate-statistics-from-an-elevation-model" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>次のコマンド(スクリプトに格納され、 <code class="docutils literal notranslate"><span class="pre">ace</span></code> で実行されます)は、インターネットの情報源からラスタレイヤをラスタマップ <code class="docutils literal notranslate"><span class="pre">elev</span></code> として読み込み、計算領域をマップに設定し勾配を計算します。ラスタレイヤに関する追加情報は <code class="docutils literal notranslate"><span class="pre">r.info</span></code> で要求されます。</p>
<p>次のスクリプトをテキストファイル <code class="docutils literal notranslate"><span class="pre">ace_dtm_statistics.sh</span></code> として保存します:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
g.region <span class="nv">raster</span><span class="o">=</span>elev@https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif -ap
<span class="c1"># Compute univariate statistics</span>
r.univar <span class="nv">map</span><span class="o">=</span>elev
r.info elev
<span class="c1"># Compute the slope of the imported map and mark it for export as a COG file (Cloud Optimized GeoTIFF)</span>
r.slope.aspect <span class="nv">elevation</span><span class="o">=</span>elev <span class="nv">slope</span><span class="o">=</span>slope_elev+COG
r.info slope_elev
</pre></div>
</div>
<p>テキストファイル内のスクリプトを <code class="docutils literal notranslate"><span class="pre">/tmp/ace_dtm_statistics.sh</span></code> に保存し、保存したスクリプトを次のように実行します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace --location nc_spm_08 --script ace_dtm_statistics.sh
</pre></div>
</div>
<p>結果(メッセージ、統計、ファイル)はRESTリソースとして提供されます。</p>
<p>actinia 処理チェインのJSONリクエストを生成するには、 <code class="docutils literal notranslate"><span class="pre">-d</span></code> (ドライラン)フラグを追加するだけです:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace -d <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>出力は次のようになります:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;list&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;g.region_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;flags&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;import_descr&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://storage.googleapis.com/graas-geodata/elev_ned_30m.tif&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.univar_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;percentile&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;90&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;separator&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pipe&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.slope.aspect_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elevation&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;format&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;degrees&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;precision&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FCELL&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;zscale&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;min_slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">],</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;outputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;export&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;COG&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;raster&quot;</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;module&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;r.info_1804289383&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;inputs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;param&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;map&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;slope_elev&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="example-2-orthophoto-image-segmentation-with-export">
<h3><a class="toc-backref" href="#id10">例2: オルソ写真画像のセグメント化とエキスポート</a><a class="headerlink" href="#example-2-orthophoto-image-segmentation-with-export" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>次のスクリプトをテキストファイル <code class="docutils literal notranslate"><span class="pre">/tmp/ace_segmentation.sh</span></code> として保存してください:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># grass ~/grassdata/nc_spm_08/user1/</span>
<span class="c1"># Import the web resource and set the region to the imported map</span>
<span class="c1"># we apply a importer trick for the import of multi-band GeoTIFFs:</span>
<span class="c1"># install with: g.extension importer url=https://github.com/mundialis/importer</span>
importer <span class="nv">raster</span><span class="o">=</span>ortho2010@https://apps.mundialis.de/workshops/osgeo_ireland2017/north_carolina/ortho2010_t792_subset_20cm.tif
<span class="c1"># The importer has created three new raster maps, one for each band in the geotiff file</span>
<span class="c1"># stored them in an image group</span>
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.1
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.2
r.info <span class="nv">map</span><span class="o">=</span>ortho2010.3
<span class="c1"># Set the region and resolution</span>
g.region <span class="nv">raster</span><span class="o">=</span>ortho2010.1 <span class="nv">res</span><span class="o">=</span><span class="m">1</span> -p
<span class="c1"># Note: the RGB bands are organized as a group</span>
<span class="c1"># export as a as COG file (Cloud Optimized GeoTIFF)</span>
i.segment <span class="nv">group</span><span class="o">=</span>ortho2010 <span class="nv">threshold</span><span class="o">=</span><span class="m">0</span>.25 <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+COG <span class="nv">goodness</span><span class="o">=</span>ortho2010_seg_25_fit+COG
<span class="c1"># Finally vectorize segments with r.to.vect and export as a GeoJSON file</span>
r.to.vect <span class="nv">input</span><span class="o">=</span>ortho2010_segment_25 <span class="nv">type</span><span class="o">=</span>area <span class="nv">output</span><span class="o">=</span>ortho2010_segment_25+GeoJSON
</pre></div>
</div>
<p>テキストファイルに保存されているスクリプトを次のように実行します</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/tmp/ace_segmentation.sh&quot;</span>
</pre></div>
</div>
<p>結果(メッセージ、統計、ファイル)はRESTリソースとして提供されます。</p>
</section>
<section id="examples-for-persistent-processing">
<h3><a class="toc-backref" href="#id11">永続処理の例</a><a class="headerlink" href="#examples-for-persistent-processing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>GRASS GISコマンドは、ユーザ固有の永続データベースで実行できます。ユーザは既存の場所にマップセットを作成する必要があります。このマップセットには <code class="docutils literal notranslate"><span class="pre">ace</span></code> を介してアクセスできます。このマップセットで実行されるコマンドのすべての処理結果は、永続的に格納されます。処理後に正しい名前を使用して永続ストレージに移動される一時的なデータベースで処理が実行されることに注意してください。</p>
<p><strong>test_mapset</strong> という名前で <strong>nc_spm_08</strong> という場所に新しいマップセットを作成するには、以下のコマンドを実行する必要があります。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>新しい永続マップセット内の統計スクリプトからコマンドを実行します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
</pre></div>
</div>
<p>test_mapset 内のスクリプトで作成されたすべてのラスタマップを表示します。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_commmand</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
</pre></div>
</div>
<p>ラスタマップの高度と slope_elev に関する情報を表示する</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
<p>test_mapset を削除します(削除時は常に名前をダブルチェックします)。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">delete_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
</pre></div>
</div>
<p>アクティブなGRASS GISセッションに同一のロケーション/マップセット名がある場合は、エイリアスを使用して、各コマンド呼び出しの永続オプションを回避できます。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">alias</span> <span class="nv">acp</span><span class="o">=</span><span class="s2">&quot;ace --persistent `g.mapset -p`&quot;</span>
</pre></div>
</div>
<p>アクティブなGRASS GISセッションでは、現在の場所は <strong>nc_spm_08</strong> であり、現在のマップセットは <strong>test_mapset</strong> であると仮定します。上記のコマンドは、次のように実行できます:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">script</span><span class="o">=</span><span class="s2">&quot;/path/to/ace_dtm_statistics.sh&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.list type=raster mapset=test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info elev@test_mapset&quot;</span>
acp <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;nc_spm_08&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;r.info slope_elev@test_mapset&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id12">試してみること</a><a class="headerlink" href="#things-to-try" title="このヘッドラインへのパーマリンク">¶</a></h2>
<section id="install-on-osgeolive-vm-with-docker-compose">
<h3><a class="toc-backref" href="#id13">Install on OSGeoLive VM with Docker Compose</a><a class="headerlink" href="#install-on-osgeolive-vm-with-docker-compose" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Requirements: docker and docker-compose (already available in OSGeoLive VM version)</p>
<p>To build and deploy actinia, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mundialis/actinia_core.git
<span class="nb">cd</span> actinia_core
docker-compose -f docker/docker-compose.yml up
</pre></div>
</div>
<p>Now you have a running actinia instance locally! Check with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl http://127.0.0.1:8088/api/v3/version
</pre></div>
</div>
</section>
<section id="create-new-locations">
<h3><a class="toc-backref" href="#id14">新しい場所の作成</a><a class="headerlink" href="#create-new-locations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (note: the &quot;demouser&quot; is not enabled for this)</span>
<span class="c1">#</span>
<span class="c1"># create new location</span>
ace <span class="nv">create_location</span><span class="o">=</span><span class="s2">&quot;mylatlon 4326&quot;</span>
<span class="c1"># create new mapset within location</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;mylatlon&quot;</span> <span class="nv">create_mapset</span><span class="o">=</span><span class="s2">&quot;user1&quot;</span>
</pre></div>
</div>
</section>
<section id="install-grass-gis-addons-extensions">
<h3><a class="toc-backref" href="#id15">GRASS GISアドオン(拡張機能)のインストール</a><a class="headerlink" href="#install-grass-gis-addons-extensions" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># (requires elevated user privileges)</span>
<span class="c1">#</span>
<span class="c1"># list existing addons, see also</span>
<span class="c1"># https://grass.osgeo.org/grass-stable/manuals/addons/</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension -l&quot;</span>

<span class="c1"># install machine learning addon r.learn.ml2</span>
ace <span class="nv">location</span><span class="o">=</span><span class="s2">&quot;latlong_wgs84&quot;</span> <span class="nv">grass_command</span><span class="o">=</span><span class="s2">&quot;g.extension extension=\&quot;r.learn.ml2\&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id16">次のステップ</a><a class="headerlink" href="#what-next" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>actinia webサイト: <a class="reference external" href="https://actinia.mundialis.de">https://actinia.mundialis.de</a></p></li>
<li><p>actinia チュートリアル: <a class="reference external" href="https://neteler.gitlab.io/actinia-introduction">https://neteler.gitlab.io/actinia-introduction</a></p></li>
<li><p>追加文献: Neteler, M., Gebbert, S., Tawalika, C., Bettge, A., Benelcadi, H., Löw, F., Adams, T, Paulsen, H. (2019). Actinia:cloud based geoprocessing. In Proc. of the 2019 conference on Big Data from Space (BiDS'2019) (pp. 41-44). EUR 29660 EN, Publications Office of the European Union 5, Luxembourg: P. Soille, S. Loekken, and S. Albani (Eds.). (<a class="reference external" href="https://zenodo.org/record/2631917">DOI</a>)</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>