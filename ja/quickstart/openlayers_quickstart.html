
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>OpenLayersクイックスタート &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="GeoStyler" href="../overview/geostyler_overview.html" />
    <link rel="prev" title="OpenLayers" href="../overview/openlayers_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div> 
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://openlayers.org/"><img alt="../../_images/logo_openlayers.png" class="align-right" src="../../_images/logo_openlayers.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_project.png" class="align-right" src="../../_images/OSGeo_project.png" /></a>
<section id="openlayers-quickstart">
<h1>OpenLayersクイックスタート<a class="headerlink" href="#openlayers-quickstart" title="Permalink to this heading">¶</a></h1>
<p>このクイックスタートでは、OpenLayersをはじめて使うときの基本的な手順について説明します。基本的なマップの作成、ラスタレイヤとベクタレイヤの追加、地物のスタイリングです。</p>
<p>OpenLayersを使用すると、任意のWebページに動的な地図を簡単に配置できます。任意のソースから地図タイル、ベクタデータやマーカーをロードして表示可能です。OpenLayers はすべての種類の地理情報のさらなる利用のために開発されてきました。完全にフリーなオープンソース JavaScript で、2条項 BSD ライセンス (FreeBSD ライセンスとしても知られています) でリリースされています。</p>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#core-concepts" id="id1">主な概念</a></p></li>
<li><p><a class="reference internal" href="#create-a-basic-map" id="id2">基本マップを作成する</a></p></li>
<li><p><a class="reference internal" href="#add-raster-layers" id="id3">ラスタレイヤ追加する</a></p></li>
<li><p><a class="reference internal" href="#add-vector-layers" id="id4">ベクタレイヤを追加する</a></p></li>
<li><p><a class="reference internal" href="#apply-style-to-features" id="id5">フィーチャにスタイルを適用する</a></p></li>
<li><p><a class="reference internal" href="#work-with-events" id="id6">イベントの操作</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id7">次のステップ</a></p></li>
</ul>
</nav>
<section id="core-concepts">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">主な概念</a><a class="headerlink" href="#core-concepts" title="Permalink to this heading">¶</a></h2>
<p>OpenLayersで作業を始める前に、OpenLayersの主な概念を理解しておくとよいでしょう。</p>
<dl class="simple">
<dt><strong>マップ</strong></dt><dd><p><em>マップ</em> はOpenLayersの主要な要素です。<em>マップ</em> をレンダリングするには、 <em>ビュー</em> 、1つまたは複数の <em>レイヤ</em> 、およびターゲットコンテナが必要です。</p>
</dd>
<dt><strong>ビュー</strong></dt><dd><p><em>ビュー</em> はmapのレンダリング方法を決定します。解像度や中心位置などを設定します。これはマップの内容を見るためのカメラのようなものです。</p>
</dd>
<dt><strong>レイヤ</strong></dt><dd><p><em>レイヤ</em> はスタック順にマップに追加できます。レイヤは、 <em>ラスタレイヤ</em> (イメージ)または <em>ベクタレイヤ</em> (点/線分/ポリゴン)のいずれかです。</p>
</dd>
<dt><strong>ソース</strong></dt><dd><p>各レイヤには、レイヤコンテンツのロード方法を知っている <em>ソース</em> があります。<em>ベクタレイヤ</em> の場合、そのソースは <em>フォーマット</em> クラス(例えばGeoJSONやKML)を使ってベクタデータを読み込み、一連の <em>フィーチャー</em> をレイヤに提供します。</p>
</dd>
<dt><strong>フィーチャー</strong></dt><dd><p><em>フィーチャー</em> は現実世界のものを表し、特定の <em>スタイル</em> を使用して、さまざまな <em>ジオメトリ</em> (点、線、ポリゴンなど)を使用してレンダリングできます。これにより、外観(線の思考、塗り潰し色など)が決まります。</p>
</dd>
</dl>
</section>
<section id="create-a-basic-map">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">基本マップを作成する</a><a class="headerlink" href="#create-a-basic-map" title="Permalink to this heading">¶</a></h2>
<p>/home/user/でbasic-map.htmlという名前のファイルを作成して、次の内容を記入します。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Basic map<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width&quot;</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- OpenLayers CSS --&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://localhost/openlayers/dist/ol.css&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- Custom styles --&gt;</span>
        <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">          </span><span class="p">#</span><span class="nn">map</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Basic map<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- OpenLayers JS--&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://localhost/openlayers/dist/ol.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

        <span class="cm">&lt;!-- App code --&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">          </span><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w"></span>
<span class="w">            </span><span class="nx">target</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;map&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nx">layers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span><span class="w"></span>
<span class="w">                </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span><span class="w"></span>
<span class="w">              </span><span class="p">})</span><span class="w"></span>
<span class="w">            </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nx">view</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span><span class="w"></span>
<span class="w">              </span><span class="nx">center</span><span class="o">:</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">fromLonLat</span><span class="p">([</span><span class="mf">2.1833</span><span class="p">,</span><span class="w"> </span><span class="mf">41.3833</span><span class="p">]),</span><span class="w"></span>
<span class="w">              </span><span class="nx">zoom</span><span class="o">:</span><span class="w"> </span><span class="mf">6</span><span class="w"></span>
<span class="w">            </span><span class="p">})</span><span class="w"></span>
<span class="w">          </span><span class="p">});</span><span class="w"></span>
<span class="w">        </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Webブラウザから[ファイル]-&gt;[ファイルを開く]を使用して、basic-map.htmlを開いてみます。次のように表示されるはずです。</p>
<a class="reference internal image-reference" href="../../_images/openlayers-basic-map.png"><img alt="../../_images/openlayers-basic-map.png" src="../../_images/openlayers-basic-map.png" style="width: 711.0px; height: 620.0px;" /></a>
<p>注意：</p>
<ul class="simple">
<li><p>このコードは、JavaSciptコードをhtmlファイルの最後にロードするというベスト・プラクティスに従います。</p></li>
<li><p>OpenLayersマップはHTML DOM要素にアタッチする必要があるため、 <em>map</em> idで識別される <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> 要素を作成しました。</p></li>
<li><p>マップは <code class="docutils literal notranslate"><span class="pre">ol.Map</span></code> クラスで表されます。 <strong>target</strong> プロパティーを使用して、マップをレンダリングするDOM要素を指定します。</p></li>
<li><p>OpenLayersでは、キャンバスとWebGLという2つの異なるメカニズムを使用したマップレンダリングが可能です。デフォルトのレンダラは <em>canvas</em> です。</p></li>
<li><p>レイヤ内にマップのデータを表示するため、 <code class="docutils literal notranslate"><span class="pre">ol.source.OSM</span></code> ソースクラスを使用してOpenStreetMapプロジェクトからコンテンツをロードするようにしたタイルレイヤの <code class="docutils literal notranslate"><span class="pre">ol.layer.Tile</span></code> クラスを作成しました。</p></li>
<li><p>最後に、 <code class="docutils literal notranslate"><span class="pre">ol.View</span></code> クラスを使用して <em>camera</em> の初期位置を設定し、初期ズームレベルと中心位置を設定します。</p></li>
</ul>
</section>
<section id="add-raster-layers">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">ラスタレイヤ追加する</a><a class="headerlink" href="#add-raster-layers" title="Permalink to this heading">¶</a></h2>
<p>OpenStreetMap、Stamen、Bingなどによって提供されるタイルレイヤが、最も使用されるラスタレイヤです。タイルレイヤは <code class="docutils literal notranslate"><span class="pre">ol.layer.Tile</span></code> クラスで表され、 <code class="docutils literal notranslate"><span class="pre">ol.source.OSM</span></code> または <code class="docutils literal notranslate"><span class="pre">ol.source.Stamen</span></code> のように、特定のプロバイダからタイルをロードする方法を知っているソースを使用する必要があります。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">osm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="kd">var</span><span class="w"> </span><span class="nx">stamen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">Stamen</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">layer</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;watercolor&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
<p>レイヤは、次の2つの方法でマップに追加できます。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ol.Map</span></code> を作成する場合は、 <code class="docutils literal notranslate"><span class="pre">layers</span></code> プロパティを使用します。</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="nx">layers</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">osm</span><span class="p">,</span><span class="w"> </span><span class="nx">stamen</span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.addLayer()</span></code> メソッドを使って手動で追加します。</p>
<blockquote>
<div><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">osm</span><span class="p">);</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">stamen</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="add-vector-layers">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">ベクタレイヤを追加する</a><a class="headerlink" href="#add-vector-layers" title="Permalink to this heading">¶</a></h2>
<p>ベクタレイヤは <code class="docutils literal notranslate"><span class="pre">ol.layer.Vector</span></code> クラスで表され、 <code class="docutils literal notranslate"><span class="pre">ol.source.GeoJSON</span></code> 、 <code class="docutils literal notranslate"><span class="pre">ol.source.KML</span></code> 、 <code class="docutils literal notranslate"><span class="pre">ol.source.TopoJSON</span></code> など、ベクタフォーマットの読み込みに適したソースを使用する必要があります。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">vectorLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">GeoJSON</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;url_to_geojson_file&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="c1">// Add Vector layer to map</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">vectorLayer</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/openlayers-vector.png"><img alt="../../_images/openlayers-vector.png" src="../../_images/openlayers-vector.png" style="width: 518.0px; height: 277.0px;" /></a>
<p>前のコードでは、サーバに置かれた有効なGeoJSONファイルを指すように <code class="docutils literal notranslate"><span class="pre">url_to_file</span></code> を変更する必要があることに注意してください。Javascriptセキュリティでは、異なるドメイン/ポート上の外部URLからデータセットを取得することができないことに注意してください。(aka. 同一発信元ポリシー)。</p>
<p>フィーチャーは手動で作成することもできます。この場合、フィーチャーを表すジオメトリを作成する必要があります。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Geometries</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">point</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="mf">50</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">)</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">Circle</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">([</span><span class="mf">2.1833</span><span class="p">,</span><span class="w"> </span><span class="mf">41.3833</span><span class="p">],</span><span class="w"> </span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="mf">1000000</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="c1">// Features</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">pointFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="nx">point</span><span class="p">);</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">circleFeature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">Feature</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Source</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">vectorSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">projection</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;EPSG:4326&#39;</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
<span class="nx">vectorSource</span><span class="p">.</span><span class="nx">addFeatures</span><span class="p">([</span><span class="nx">pointFeature</span><span class="p">,</span><span class="w"> </span><span class="nx">circleFeature</span><span class="p">]);</span><span class="w"></span>

<span class="c1">// Vector layer</span><span class="w"></span>
<span class="kd">var</span><span class="w"> </span><span class="nx">vectorLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="nx">vectorSource</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="c1">// Add Vector layer to map</span><span class="w"></span>
<span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">vectorLayer</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="apply-style-to-features">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">フィーチャにスタイルを適用する</a><a class="headerlink" href="#apply-style-to-features" title="Permalink to this heading">¶</a></h2>
<p>ベクタレイヤ内のフィーチャにスタイルを設定できます。スタイルは、塗り、線、テキスト、イメージの組み合わせによって決まります。これらはすべて任意の設定項目です。さらに、レイヤにスタイルを適用して、含まれているすべてのフィーチャのスタイルを決定したり、個々のフィーチャにスタイルを適用することもできます。</p>
<p>スタイルは、 <code class="docutils literal notranslate"><span class="pre">ol.style.Style</span></code> クラスによって表され、このクラスは、適用される <code class="docutils literal notranslate"><span class="pre">fill</span></code> 、 <code class="docutils literal notranslate"><span class="pre">stroke</span></code> 、 <code class="docutils literal notranslate"><span class="pre">text</span></code> および <code class="docutils literal notranslate"><span class="pre">image</span></code> を設定するプロパティを有する。次の例は、緑の塗りと線を使用するようにスタイル設定された世界の行政区界データセットを示しています。</p>
<a class="reference internal image-reference" href="../../_images/openlayers-styling.png"><img alt="../../_images/openlayers-styling.png" src="../../_images/openlayers-styling.png" style="width: 555.0px; height: 283.0px;" /></a>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">limitsLayer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span><span class="w"></span>
<span class="w">  </span><span class="nx">source</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;data/world_limits.json&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">format</span><span class="p">.</span><span class="nx">TopoJSON</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="nx">projection</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;EPSG:3857&#39;</span><span class="w"></span>
<span class="w">  </span><span class="p">}),</span><span class="w"></span>
<span class="w">  </span><span class="nx">style</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Style</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Fill</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;rgba(55, 155, 55, 0.3)&#39;</span><span class="w"></span>
<span class="w">    </span><span class="p">}),</span><span class="w"></span>
<span class="w">    </span><span class="nx">stroke</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Stroke</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;rgba(55, 155, 55, 0.8)&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="w"></span>
<span class="w">    </span><span class="p">}),</span><span class="w"></span>
<span class="w">    </span><span class="nx">image</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Circle</span><span class="p">({</span><span class="w"></span>
<span class="w">      </span><span class="nx">radius</span><span class="o">:</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nx">fill</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">Fill</span><span class="p">({</span><span class="w"></span>
<span class="w">        </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;rgba(55, 155, 55, 0.5)&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="p">})</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="w">  </span><span class="p">})</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
<p>このコードでは、TopoJSONファイルをロードし、 <code class="docutils literal notranslate"><span class="pre">style</span></code> プロパティーを使ってスタイルを設定しています。ラインとポリゴンに必要な <code class="docutils literal notranslate"><span class="pre">fill</span></code> と <code class="docutils literal notranslate"><span class="pre">stroke</span></code> 、およびポイントフィーチャに使用する <code class="docutils literal notranslate"><span class="pre">image</span></code> (この場合は円)を設定しました。</p>
</section>
<section id="work-with-events">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">イベントの操作</a><a class="headerlink" href="#work-with-events" title="Permalink to this heading">¶</a></h2>
<p>ほとんどの(マップ、レイヤ、コントロールなどの)要素は、イベントをトリガして変更を通知します。たとえば、マウスがマップ上を移動するたびに通知されたり、フィーチャがベクタレイヤに追加されるたびに通知されたりします。</p>
<p>イベントは <code class="docutils literal notranslate"><span class="pre">on()</span></code> メソッドでオブジェクトに簡単に登録でき、 <code class="docutils literal notranslate"><span class="pre">un()</span></code> で登録解除できます。</p>
<p>次のコードでは、マップのインスタンスにイベントを登録し、ポインタが移動するたびに通知されます。コールバック関数内では、ポインタの座標を取得し、ブラウザコンソールに2つの異なる投影法で出力します。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">map</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pointermove&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">coord3857</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">coordinate</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">coord4326</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ol</span><span class="p">.</span><span class="nx">proj</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">coord3857</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">coord3857</span><span class="p">,</span><span class="w"> </span><span class="nx">coord4326</span><span class="p">);</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">次のステップ</a><a class="headerlink" href="#what-next" title="Permalink to this heading">¶</a></h2>
<p>OpenLayersの動作を理解するための最も簡単な方法は、サンプルとそのソースコードを調べることです。OpenLayersの詳細については、以下を参照してください。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://localhost/openlayers/apidoc/">API Docs</a></p></li>
<li><p><a class="reference external" href="https://localhost/openlayers/examples/">Examples</a></p></li>
<li><p><a class="reference external" href="https://openlayers.org/">OpenLayers.org Webサイト</a></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>