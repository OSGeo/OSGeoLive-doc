
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Spatialiteクイックスタート &#8212; OSGeoLive 14.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="Marble" href="../overview/marble_overview.html" />
    <link rel="prev" title="SpatiaLite" href="../overview/spatialite_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head>
  <body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div> 
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="http://www.gaia-gis.it/gaia-sins/"><img alt="../../_images/logo_spatialite.png" class="align-right" src="../../_images/logo_spatialite.png" /></a>
<div class="section" id="spatialite-quickstart">
<h1>Spatialiteクイックスタート<a class="headerlink" href="#spatialite-quickstart" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>SpatiaLite は空間を扱う関数を追加した SQLite データベースエンジンです。</p>
<p>SQLite は動作が軽く、シンプルで堅牢、簡単に使える人気のあるデータベース管理システム (DBMS) です。それぞれのデータベースは一つのファイルに格納されます。コピー、圧縮や、Windows、Linux、MacOS などのOS間の移行も簡単にできます。</p>
<p>このクイックスタートでは、GUIアプリケーションとコマンドラインの両方からspatialiteデータベースを開く方法について説明します。いくつかのサンプルSQLクエリも示します。</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#start-spatialite-and-load-a-database" id="id1">Spatialiteを起動してデータベースを読み込む</a></li>
<li><a class="reference internal" href="#run-an-sql-query" id="id2">SQLクエリを実行する</a></li>
<li><a class="reference internal" href="#run-spatialite-from-the-command-line" id="id3">コマンドラインからspatialiteを実行する</a></li>
<li><a class="reference internal" href="#create-a-new-spatialite-database-and-load-a-shapefile" id="id4">新しいspatialiteデータベースを作成し、シェープファイルを読み込む</a></li>
<li><a class="reference internal" href="#things-to-try" id="id5">試してみること</a></li>
<li><a class="reference internal" href="#what-next" id="id6">次のステップ</a></li>
</ul>
</div>
<div class="section" id="start-spatialite-and-load-a-database">
<h2><a class="toc-backref" href="#id1">Spatialiteを起動してデータベースを読み込む</a><a class="headerlink" href="#start-spatialite-and-load-a-database" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Spatialite-guiは、spatialiteデータベースを表示および維持するためのビジュアルインタフェースを提供します。ポイント・アンド・クリック機能を使用すると、テーブルとデータコンテンツの構造を簡単に確認できます。その多くは一般的なSQLクエリーを構築したり、独自のSQLクエリーを作成したりします。</p>
<ol class="arabic">
<li><p class="first"><span class="menuselection">Geospatial-&gt;Databases-&gt;Spatialite GUI</span> を選択して、Spatialite GUIを開きます。</p>
</li>
<li><p class="first"><span class="menuselection">File-&gt;Connecting an existing SQLite DB</span> を選択します。</p>
</li>
<li><p class="first"><code class="file docutils literal"><span class="pre">/home/user/data/spatialite</span></code> ディレクトリにブラウズし、 <code class="file docutils literal"><span class="pre">trento.sqlite</span></code> を選択します。</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-trento.png"><img alt="../../_images/spatialite-gui-trento.png" src="../../_images/spatialite-gui-trento.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
<li><p class="first">MunicipalHallsViewテーブルを右クリックして、 「Show Columns」 を選択します。</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-columns.png"><img alt="../../_images/spatialite-gui-columns.png" src="../../_images/spatialite-gui-columns.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
<li><p class="first">表示が3つの領域に分割されていることがわかります。</p>
<ul class="simple">
<li>左側のパネルには、テーブルのリストやテーブル内のカラムなど、データベースの階層が表示されます。左側のパネルの要素を右クリックして、一般的なデータベースアクションのリストから選択します。</li>
<li>右上のパネルには、選択したアクションのSQLが表示されます。このパネルには、独自にカスタマイズしたSQLを入力できます。</li>
<li>右下のパネルには、SQLクエリの結果が表示されます。</li>
</ul>
</li>
<li><p class="first">MunicipalHallsテーブルを右クリックして、」Edit table rows」を選択します。右上のペインに作成されたSQLクエリが表示され、結果が右下に表示されます。:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">ROWID</span><span class="p">,</span> <span class="s2">&quot;PK_UID&quot;</span><span class="p">,</span> <span class="s2">&quot;AREA&quot;</span><span class="p">,</span> <span class="s2">&quot;PERIMETER&quot;</span><span class="p">,</span> <span class="s2">&quot;COMU&quot;</span><span class="p">,</span> <span class="s2">&quot;Geometry&quot;</span>
    <span class="n">FROM</span> <span class="s2">&quot;MunicipalHalls&quot;</span>
    <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">ROWID</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="run-an-sql-query">
<h2><a class="toc-backref" href="#id2">SQLクエリを実行する</a><a class="headerlink" href="#run-an-sql-query" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol class="arabic">
<li><p class="first">次に、このSQL文を調整して、NOME_PROVフィールドだけのNOMEと(Lat,Long)を取得してみましょう。NOME_PROVフィールドには」BRESCIA」が含まれます。今度はMunicipalHallsViewを使用します。右上のSQLペインで、次のように入力します:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">NOME</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">Geometry</span><span class="p">)</span> <span class="n">AS</span> <span class="n">Longitude</span><span class="p">,</span> <span class="n">Y</span><span class="p">(</span><span class="n">Geometry</span><span class="p">)</span> <span class="n">AS</span> <span class="n">Latitude</span>
    <span class="n">FROM</span> <span class="s2">&quot;MunicipalHallsView&quot;</span>
    <span class="n">WHERE</span> <span class="n">NOME_PROV</span> <span class="n">LIKE</span> <span class="s2">&quot;BRESCIA&quot;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">右側の」Execute SQL」ボタンをクリックすると、右下のペインに結果が表示されます。</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-select.png"><img alt="../../_images/spatialite-gui-select.png" src="../../_images/spatialite-gui-select.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
</ol>
</div>
<div class="section" id="run-spatialite-from-the-command-line">
<h2><a class="toc-backref" href="#id3">コマンドラインからspatialiteを実行する</a><a class="headerlink" href="#run-spatialite-from-the-command-line" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>スクリプトを使用したりクエリを自動化したりする必要があるユーザは、コマンドラインインタフェースからspatialiteデータベースを操作する利点を学習します。この例では、シェープファイルをロードし、highway 42の近くにある学校を検索します。</p>
<ol class="arabic">
<li><p class="first">コマンドラインから作業する前に、ターミナルウィンドウ: <span class="menuselection">System Tools -&gt; LXTerminal</span> を開いてください。</p>
</li>
<li><p class="first">ターミナルで、次のように入力して <strong>spatialite</strong> でサンプルデータベースを開きます:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spatialite</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">spatialite</span><span class="o">/</span><span class="n">trento</span><span class="o">.</span><span class="n">sqlite</span>
</pre></div>
</div>
<p>コマンドラインからの便利なコマンド:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">help</span>
<span class="o">.</span><span class="n">tables</span>
<span class="o">.</span><span class="n">quit</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="create-a-new-spatialite-database-and-load-a-shapefile">
<h2><a class="toc-backref" href="#id4">新しいspatialiteデータベースを作成し、シェープファイルを読み込む</a><a class="headerlink" href="#create-a-new-spatialite-database-and-load-a-shapefile" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ol class="arabic">
<li><p class="first">新しい空のspatialiteデータベースを作成し、north_carolinaデータセットから2つのシェープファイルをロードしてみましょう:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>user@osgeo-6:~$ spatialite test.sqlite
SpatiaLite version ..: 3.1.0-RC2      Supported Extensions:
     - &#39;VirtualShape&#39;        [direct Shapefile access]
     - &#39;VirtualDbf&#39;          [direct DBF access]
     - &#39;VirtualXL&#39;           [direct XLS access]
     - &#39;VirtualText&#39;         [direct CSV/TXT access]
     - &#39;VirtualNetwork&#39;      [Dijkstra shortest path]
     - &#39;RTree&#39;               [Spatial Index - R*Tree]
     - &#39;MbrCache&#39;            [Spatial Index - MBR cache]
     - &#39;VirtualSpatialIndex&#39; [R*Tree metahandler]
     - &#39;VirtualFDO&#39;          [FDO-OGR interoperability]
     - &#39;SpatiaLite&#39;          [Spatial SQL - OGC]
PROJ.4 version ......: Rel. 4.8.0, 6 March 2012
GEOS version ........: 3.3.3-CAPI-1.7.4
SQLite version ......: 3.7.9
Enter &quot;.help&quot; for instructions
spatialite&gt;
spatialite&gt; .loadshp data/north_carolina/shape/schools_wake schools utf-8 3358
spatialite&gt; .loadshp data/north_carolina/shape/roadsmajor roads utf-8 3358
</pre></div>
</div>
<p>loadshpコマンドの形式に注意してください: 最初は.shp拡張子のないシェープファイル、次に新しいspatialiteテーブルの名前、次に文字コード、最後にシェープファイルのCRSのEPSGコードです。</p>
</li>
<li><p class="first">次に、ハイウェイ42に近い学校を検索します:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spatialite</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="o">.</span><span class="n">NAMESHORT</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRNUMBER</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRROOT</span>
     <span class="o">...&gt;</span> <span class="n">FROM</span> <span class="n">schools</span> <span class="n">AS</span> <span class="n">s</span><span class="p">,</span> <span class="n">roads</span> <span class="n">AS</span> <span class="n">r</span>
     <span class="o">...&gt;</span> <span class="n">WHERE</span> <span class="n">r</span><span class="o">.</span><span class="n">ROAD_NAME</span> <span class="o">=</span> <span class="s2">&quot;NC-42&quot;</span> <span class="n">AND</span>
     <span class="o">...&gt;</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">Geometry</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span>
<span class="n">FUQUAY</span><span class="o">-</span><span class="n">VARINA</span><span class="o">|</span><span class="mi">6600</span><span class="o">|</span><span class="n">Johnson</span> <span class="n">Pond</span> <span class="n">Rd</span>
<span class="n">WILLOW</span> <span class="n">SPRINGS</span><span class="o">|</span><span class="mi">6800</span><span class="o">|</span><span class="n">Dwight</span> <span class="n">Rowland</span> <span class="n">Rd</span>
<span class="n">FUQUAY</span><span class="o">-</span><span class="n">VARINA</span><span class="o">|</span><span class="mi">109</span><span class="o">|</span><span class="n">N</span> <span class="n">Ennis</span> <span class="n">St</span>
<span class="n">LINCOLN</span> <span class="n">HEIGHTS</span><span class="o">|</span><span class="mi">307</span><span class="o">|</span><span class="n">Bridge</span> <span class="n">St</span>
</pre></div>
</div>
</li>
<li><p class="first">最後に、次のコマンドを使用して、クエリを 「カンマ区切り」 のテキストファイル 「schools_rt42.txt」 に出力します:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">spatialite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">mode</span> <span class="n">csv</span>
<span class="n">spatialite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">output</span> <span class="s2">&quot;schools_rt42.txt&quot;</span>
<span class="n">spatialite</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="o">.</span><span class="n">NAMESHORT</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRNUMBER</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRROOT</span>
    <span class="o">...&gt;</span> <span class="n">FROM</span> <span class="n">schools</span> <span class="n">AS</span> <span class="n">s</span><span class="p">,</span> <span class="n">roads</span> <span class="n">AS</span> <span class="n">r</span>
    <span class="o">...&gt;</span> <span class="n">WHERE</span> <span class="n">r</span><span class="o">.</span><span class="n">ROAD_NAME</span> <span class="o">=</span> <span class="s2">&quot;NC-42&quot;</span> <span class="n">AND</span>
    <span class="o">...&gt;</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">Geometry</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span>
<span class="n">spatialite</span><span class="o">&gt;.</span><span class="n">q</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="things-to-try">
<h2><a class="toc-backref" href="#id5">試してみること</a><a class="headerlink" href="#things-to-try" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>次に、試すべき追加の課題をいくつか示します。</p>
<ul class="simple">
<li>spatialite-guiを使用してジオメトリを検査する</li>
<li>QGISでSpatialiteレイヤを開いて編集する</li>
</ul>
</div>
<div class="section" id="what-next">
<h2><a class="toc-backref" href="#id6">次のステップ</a><a class="headerlink" href="#what-next" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Spatialiteの詳細については、 <a class="reference external" href="https://www.gaia-gis.it/fossil/libspatialite/index">Spatialite project page</a> を参照してください。</p>
<p>チュートリアル <a class="reference external" href="http://www.gaia-gis.it/gaia-sins/spatialite-cookbook/index.html">Spatialite cookbook</a> を必ず参照してください。</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>