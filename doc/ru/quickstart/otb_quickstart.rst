:Author: OSGeo-Live
:Author: Manuel Grizonnet
:Version: osgeo-live4.0
:License: Creative Commons Attribution-ShareAlike 3.0 Unported  (CC BY-SA 3.0)

.. image:: ../../images/project_logos/logo-otb.png
  :scale: 80 %
  :alt: Лого проекта
  :align: right

********************************************************************************
OTB: начало работы
********************************************************************************

Библиотека ORFEO Toolbox (OTB) — это высокопроизводительная библеотека для
обработки данных дистанционного зондирования.

Этот документ описывает, как:

  * просматривать метаданные изображения;
  * выполнять арифметические операции с каналами изображения;
  * открывать растры в программе Monteverdi, выполнять сегментацию и отображать результат.

Пакет OTB-Applications предоставляет ряд интересных инструментов для обработки изображений. 
Все инструменты доступны в виде:

  * CLI : консольных приложений
  * Qt GUI : приложений с графическим интерфейсом
  * QGIS plugin : модулей Quantum GIS

Демонстрационный набор данных, используемый в этом документе, можно взять здесь:
  * http://www.orfeo-toolbox.org/packages/OTB-Data-Examples.tgz

Просмотр метаданных изображения
================================================================================

Получить метаданные изображения можно при помощи команды : `otbReadImageInfo-cli`
Единственным обязательным параметром является имя файла, например : `otbReadImageInfo-cli -in qb_RoadExtract.tif`

Растровая арифметика
================================================================================

`otbBandMath-cli` является эффективным инструментом для выполнения арифметических
операций над одноканальными изображениями.

Синтаксис достаточно прост, например вычитание двух каналов для анализа
изменений в изображениях *SpotBefore.tif* и *SpotAfter.tif* выполняется
командой::

  otbBandMath-cli -ims SpotBefore.tif SpotAfter.tif -out difference.tif -exp "im1b1-im2b1"

Приложение также может выполнять сложные операции, такие, как порог и
логарифмический пересчёт.
Растровый калькулятор также содержит ряд специальных функций, позволяющих вычислять
целые выражения. Например, можно получить значения различных индексов, таких,
как NDVI (нормализованный разностный вегетационный индекс) для растительности.
Чтобы рассчитать NDVI для многоканальных изображений, достаточно выполнить::

  otbBandMath-cli -ims qb_RoadExtract.tif -out ndvi.tif -exp "ndvi(im1b3,im1b4)"


Сегментация в Monteverdi
================================================================================

* Запустите программу Monteverdi, используя иконку в папке "Spatial Tools" на рабочем столе
* Выберите растр :menuselection:`File --> Open Dataset --> /home/user/otb/qb_RoadExtract.tif`
* В меню выберите :menuselection:`Filtering --> Mean Shift clustering`
* В окне выбора исходных данных укажите растр (Reader0)
* Убедитесь, что можете менять параметры сегментации и наблюдать результат
  этих действий на области интереса, нажав на "Run"
* Нажмите "Close", когда добъётесь нужного результата
* В главном окне вызовите контекстное меню на элементе "Clustered Image"
  итогового набора данных "MeanShift0" и выберите "Display in viewer".

  .. image:: ../../images/screenshots/800x600/otb-mean_shift.jpg
     :scale: 100 %

SVM-классификация в Monteverdi
================================================================================

* Запустите Monteverdi, используя иконку в папке "Spatial Tools" на рабочем столе
* Выберите растр :menuselection:`File --> Open Dataset --> /home/user/otb/qb_RoadExtract.tif`
* В меню выберите :menuselection:`Learning --> SVM classification`
* В окне выбора исходных данных укажите растр (Reader0)
* Теперь можно добавлять классы (кнопка `Add Class`) и задавать обучающие
  элементы, рисуя полигоны на изображении
* Настройте параметры алгоритма в меню :menuselection:`Setup --> SVM`
* Нажмите кнопку `Learn`, чтобы создать модель на основе исходных классов
* Нажмите кнопку `Display`, чтобы отобразить результат классификация всего
  изображения.

  .. image:: ../../images/screenshots/800x600/otb-svm.jpg
     :scale: 100 %

С развёрнутым примером можно ознакомиться в `статье`_.

.. _`статье`: http://www.orfeo-toolbox.org/otb/monteverdi.html


Что дальше?
================================================================================

* Руководство OTB

  Основным источником информации является Руководство OTB. Это полное
  описание объемом примерно в 600 страниц, в котором подробно описаны
  шаги, необходимые для установки и использования OTB. Описания большинства
  классов сопровождаются иллюстрациями с результатами обработки реальных
  данных.

  * `OTBSoftwareGuide.pdf <http://orfeo-toolbox.org/packages/OTBSoftwareGuide.pdf>`_
  * `Онлайн HTML версия <http://orfeo-toolbox.org/SoftwareGuide/>`_

* "Поваренная книга" OTB

  Также доступно руководство по OTB-Applications и Monteverdi для не-разработчиков.
  Этот документ содержит краткое описание OTB-Applications и Monteverdi,
  сопровождаемое советами по выполнению наиболее часто встречающихся операций
  с использованием этих программ.

  * `OTBCookBook.pdf <http://orfeo-toolbox.org/packages/OTBCookBook.pdf>`_

* Учебники OTB

  Узнать больше об OTB можно и из учебников_.

.. _учебников: http://www.orfeo-toolbox.org/SoftwareGuide/SoftwareGuidepa2.html#x17-49000II

* Документация на DVD

  Также смотрите документацию_ на этом DVD.

.. _документацию: ../../otb/
