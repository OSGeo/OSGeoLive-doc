
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guide de démarrage avec pycsw &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="PyWPS" href="../overview/pywps_overview.html" />
    <link rel="prev" title="pycsw" href="../overview/pycsw_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://pycsw.org/"><img alt="../../_images/logo_pycsw.png" class="align-right" src="../../_images/logo_pycsw.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_project.png" class="align-right" src="../../_images/OSGeo_project.png" /></a>
<section id="pycsw-quickstart">
<h1>Guide de démarrage avec pycsw<a class="headerlink" href="#pycsw-quickstart" title="Lien permanent vers ce titre">¶</a></h1>
<p>pycsw est une implémentation de serveur OGC CSW écrite en <a class="reference external" href="https://www.python.org">Python</a>. pycsw permet la publication et la découverte de métadonnées géospatiales.  Les dépôts existants de métadonnées géospatiales peuvent être exposés via OGC:CSW 2.0.2 ou OGC:CSW 3.0.0.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenu</p>
<ul class="simple">
<li><p><a class="reference internal" href="#run-the-tester-application" id="id2">Exécuter l’application test</a></p></li>
<li><p><a class="reference internal" href="#understand-capabilities-and-configuration" id="id3">Comprendre les capacités et la configuration</a></p></li>
<li><p><a class="reference internal" href="#create-metadata" id="id4">Créer des métadonnées</a></p></li>
<li><p><a class="reference internal" href="#load-metadata" id="id5">Charger des métadonnées</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-new-database" id="id6">Créer une nouvelle base de données</a></p></li>
<li><p><a class="reference internal" href="#import-metadata" id="id7">Importer des métadonnées</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#data-discovery-through-qgis-metasearch-plugin" id="id8">Découverte de données via le plugin QGIS MetaSearch</a></p></li>
<li><p><a class="reference internal" href="#things-to-try" id="id9">Choses à essayer</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id10">Ensuite ?</a></p></li>
</ul>
</div>
<section id="run-the-tester-application">
<h2><a class="toc-backref" href="#id2">Exécuter l’application test</a><a class="headerlink" href="#run-the-tester-application" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic">
<li><p>Sur le bureau, accédez à <cite>Web Services –&gt; pycsw</cite> ou ouvrez Firefox et naviguez vers <code class="docutils literal notranslate"><span class="pre">http://localhost/pycsw/tests/index.html</span></code>:</p>
<a class="reference internal image-reference" href="../../_images/pycsw_tester_startup.png"><img alt="../../_images/pycsw_tester_startup.png" src="../../_images/pycsw_tester_startup.png" style="width: 481.5px; height: 378.0px;" /></a>
</li>
</ol>
<blockquote>
<div><p>En sélectionnant la liste de déroulante gauche, l’utilisateur peut voir diverses demandes POST prédéfinies, codées sous le nom de XML, qui peuvent être envoyées à pycsw.</p>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>Sélectionnez « apiso/DescribeRecord » et appuyez sur le bouton « Send ». Une description de l’enregistrement du profil de demande ISO est présentée sur le panneau droit.</p>
<a class="reference internal image-reference" href="../../_images/pycsw_tester_describe_apiso_record.png"><img alt="../../_images/pycsw_tester_describe_apiso_record.png" src="../../_images/pycsw_tester_describe_apiso_record.png" style="width: 746.25px; height: 408.75px;" /></a>
</li>
<li><p>Sélectionnez « GetCapabilities-SOAP »  et appuyez sur le bouton « Send ». Une demande SOAP est envoyée au serveur pour annoncer ses capacités de service Web.</p>
<a class="reference internal image-reference" href="../../_images/pycsw_tester_soap_capabillities.png"><img alt="../../_images/pycsw_tester_soap_capabillities.png" src="../../_images/pycsw_tester_soap_capabillities.png" style="width: 746.25px; height: 408.0px;" /></a>
</li>
<li><p>Vous pouvez rechercher des enregistrements de données effectuant une requête de boîte englobante, en sélectionnant « GetRecords-filter-bbox » et en modifiant les coordonnées de la demande XML.</p>
<a class="reference internal image-reference" href="../../_images/pycsw_tester_getrecords_bbox_filter.png"><img alt="../../_images/pycsw_tester_getrecords_bbox_filter.png" src="../../_images/pycsw_tester_getrecords_bbox_filter.png" style="width: 749.25px; height: 399.0px;" /></a>
</li>
</ol>
<p>Vous pouvez parcourir toutes les demandes disponibles et effectuer diverses demandes à partir de cette application de test.</p>
</section>
<section id="understand-capabilities-and-configuration">
<h2><a class="toc-backref" href="#id3">Comprendre les capacités et la configuration</a><a class="headerlink" href="#understand-capabilities-and-configuration" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les capacités de l’installation pycsw peuvent être trouvées à <code class="docutils literal notranslate"><span class="pre">http://localhost/pycsw?service=CSW&amp;version=2.0.2&amp;request=GetCapabilities</span></code>. Si vous utilisez simplement <code class="docutils literal notranslate"><span class="pre">http://localhost/pycsw</span></code> vous obtiendrez le document de fonctionnalités pour CSW 3.0.0, puisque c’est la dernière version prise en charge.</p>
<p>Pour modifier les métadonnées du service Web, incluses dans le document de fonctionnalités, vous pouvez modifier le fichier <code class="docutils literal notranslate"><span class="pre">/etc/pycsw/default.cfg</span></code>  sous l’étiquette <code class="docutils literal notranslate"><span class="pre">[metadata:main]</span></code>.</p>
<p>Si vous souhaitez activer le support du INSPIRE Discovery Service, remplissez les métadonnées sous l’étiquette <code class="docutils literal notranslate"><span class="pre">[metadata:inspire]</span></code> et réglez la propriété <code class="docutils literal notranslate"><span class="pre">enabled</span></code> à <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>Pour toutes les fonctionnalités et options de configuration, veuillez consulter la <a class="reference external" href="https://pycsw.org/docs/">documentation</a> sur le site Web de pycsw.</p>
</section>
<section id="create-metadata">
<h2><a class="toc-backref" href="#id4">Créer des métadonnées</a><a class="headerlink" href="#create-metadata" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les fichiers de métadonnées pour un ensemble de données spatiales ou un service Web spatial peuvent être créés grâce à la mise en œuvre open source d’une directive INSPIRE pour les métadonnées, l’European Open Source Metadata Editor (EUOSME). Cette application peut être trouvée à <code class="docutils literal notranslate"><span class="pre">http://inspire-geoportal.ec.europa.eu/editor/</span></code>. Le code source est disponible à <code class="docutils literal notranslate"><span class="pre">https://joinup.ec.europa.eu/svn/euosme/trunk</span></code></p>
<p>Vous pouvez remplir les champs de métadonnées obligatoires en passant par les onglets d’application, en ajoutant des informations comme le nom du propriétaire de données, mots clés, emplacement des ressources sur le Web, emplacement géographique (utilisation d’une boîte englobante ou le nom d’un pays), etc.</p>
<a class="reference internal image-reference" href="../../_images/pycsw_euosme_metadata_input.png"><img alt="../../_images/pycsw_euosme_metadata_input.png" src="../../_images/pycsw_euosme_metadata_input.png" style="width: 831.75px; height: 485.25px;" /></a>
<p>Une fois que vous avez ajouté toutes les informations disponibles, pressez le bouton  <span class="guilabel">validation</span> en haut de la page pour vérifier la cohérence avec la directive INSPIRE.</p>
<a class="reference internal image-reference" href="../../_images/pycsw_euosme_save_metadata.png"><img alt="../../_images/pycsw_euosme_save_metadata.png" src="../../_images/pycsw_euosme_save_metadata.png" style="width: 830.25px; height: 485.25px;" /></a>
<p>Après une validation réussie, le fichier XML peut être enregistré sur le disque local et visualisé via un éditeur de texte ou un navigateur.</p>
</section>
<section id="load-metadata">
<h2><a class="toc-backref" href="#id5">Charger des métadonnées</a><a class="headerlink" href="#load-metadata" title="Lien permanent vers ce titre">¶</a></h2>
<p>pycsw prend en charge les bases de données suivantes :</p>
<ul class="simple">
<li><p>SQLite3</p></li>
<li><p>PostgreSQL (PostGIS facultatif)</p></li>
<li><p>MySQL</p></li>
</ul>
<p>Dans OSGeoLive, une configuration SQLite simple a été implémentée. La base de données se trouve dans <code class="docutils literal notranslate"><span class="pre">/usr/share/pycsw/tests/suites/cite/data/records.db</span></code></p>
<section id="create-a-new-database">
<h3><a class="toc-backref" href="#id6">Créer une nouvelle base de données</a><a class="headerlink" href="#create-a-new-database" title="Lien permanent vers ce titre">¶</a></h3>
<p>Afin de créer une nouvelle base de données SQLite, nous devons :</p>
<ol class="arabic">
<li><p>Editer <code class="docutils literal notranslate"><span class="pre">/etc/pycsw/default.cfg</span></code>:</p>
<p><strong>[repository]</strong></p>
<ul class="simple">
<li><p><strong>base de données</strong>: chemin d’accès complet à la base de données de métadonnées, au format URL de la base de données (voir <a class="reference external" href="https://docs.sqlalchemy.org/en/latest/core/engines.html#database-urls">https://docs.sqlalchemy.org/en/latest/core/engines.html#database-urls</a>)</p></li>
<li><p><strong>table</strong>: le nom de la table pour les enregistrements de métadonnées (le paramètre par défaut est <code class="docutils literal notranslate"><span class="pre">records</span></code>)</p></li>
</ul>
</li>
<li><p>Configurer la base de données :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo pycsw-admin -c setup_db -f /etc/pycsw/default.cfg
</pre></div>
</div>
</li>
</ol>
<p>Cela créera les tables et les valeurs nécessaires pour le dépôt.</p>
<p>La base de données créée est une base de données conforme <a class="reference external" href="https://www.ogc.org/standards/sfs">Simple Feature Access (SFS)</a>, et peut être utilisée avec n’importe quel logiciel l’implémentant.  Par exemple, pour l’utiliser avec  <a class="reference external" href="https://gdal.org/ogrinfo.html">OGR</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ogrinfo /path/to/records.db
INFO: Open of <span class="s1">&#39;records.db&#39;</span>
using driver <span class="s1">&#39;SQLite&#39;</span> successful.
<span class="m">1</span>: records <span class="o">(</span>Polygon<span class="o">)</span>
$ ogrinfo -al /path/to/records.db
<span class="c1"># lots of output</span>
</pre></div>
</div>
</section>
<section id="import-metadata">
<h3><a class="toc-backref" href="#id7">Importer des métadonnées</a><a class="headerlink" href="#import-metadata" title="Lien permanent vers ce titre">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo pycsw-admin -c load_records -f /etc/pycsw/default.cfg -p /path/to/records -r
</pre></div>
</div>
<p>Cela permettra d’importer tous les enregistrements <code class="docutils literal notranslate"><span class="pre">*.xml</span></code> de <code class="docutils literal notranslate"><span class="pre">/chemin/vers/les/enregistrements</span></code> dans la nouvelle base de données et de configurer le dépôt pour exposer les requêtes selon la table 53 d’OGC:CSW.</p>
</section>
</section>
<section id="data-discovery-through-qgis-metasearch-plugin">
<h2><a class="toc-backref" href="#id8">Découverte de données via le plugin QGIS MetaSearch</a><a class="headerlink" href="#data-discovery-through-qgis-metasearch-plugin" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic simple">
<li><p>Sur le bureau, rendez-vous sur <cite>Desktop GIS –&gt; QGIS</cite> pour démarrer QGIS, puis cliquez sur le bouton  <span class="guilabel">MetaSearch</span> (icône CSW)</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/pycsw_qgis_metasearch_open.png"><img alt="../../_images/pycsw_qgis_metasearch_open.png" src="../../_images/pycsw_qgis_metasearch_open.png" style="width: 501.75px; height: 466.5px;" /></a>
<ol class="arabic simple" start="2">
<li><p>Ajoutez le serveur pycsw en appuyant sur le bouton <span class="guilabel">New</span> et tapez <code class="docutils literal notranslate"><span class="pre">http://localhost/pycsw/</span></code></p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/pycsw_qgis_metasearch_add.png"><img alt="../../_images/pycsw_qgis_metasearch_add.png" src="../../_images/pycsw_qgis_metasearch_add.png" style="width: 489.75px; height: 432.0px;" /></a>
<ol class="arabic simple" start="3">
<li><p>Ajoutez quelques serveurs par défaut à l’aide du bouton <span class="guilabel">Add default servers</span> et obtenez également les fonctionnalités du serveur à l’aide du bouton  <span class="guilabel">Server info</span></p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/pycsw_qgis_metasearch_server_info.png"><img alt="../../_images/pycsw_qgis_metasearch_server_info.png" src="../../_images/pycsw_qgis_metasearch_server_info.png" style="width: 490.5px; height: 432.0px;" /></a>
<ol class="arabic simple" start="4">
<li><p>Effectuez une recherche à l’aide du catalogue, soit avec une chaîne de caractères, soit avec une boîte englobante</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/pycsw_qgis_metasearch_search.png"><img alt="../../_images/pycsw_qgis_metasearch_search.png" src="../../_images/pycsw_qgis_metasearch_search.png" style="width: 490.5px; height: 434.25px;" /></a>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id9">Choses à essayer</a><a class="headerlink" href="#things-to-try" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Essayez de découvrir des données via l’application Tester en passant en paramètre les demandes appropriées,  par exemple toute recherche de texte avec la chaîne « imagery » conduit à découvrir les données xml créées précédemment par EUOSME</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/pycsw_tester_discovery.png"><img alt="../../_images/pycsw_tester_discovery.png" src="../../_images/pycsw_tester_discovery.png" style="width: 786.75px; height: 342.0px;" /></a>
<ul class="simple">
<li><p>Essayez de découvrir des données via l’interface Python <a class="reference external" href="https://geopython.github.io/OWSLib/#csw">OWSLib CSW</a> .</p></li>
<li><p>Essayez de découvrir les données de GeoNode, qui est également inclus dans OSGeoLive et utilise pycsw comme moteur CSW par défaut.</p></li>
</ul>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id10">Ensuite ?</a><a class="headerlink" href="#what-next" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour plus d’informations sur pycsw, s’il vous plaît consultez la <a class="reference external" href="https://pycsw.org/docs/">documentation</a> sur le site web pycsw.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>