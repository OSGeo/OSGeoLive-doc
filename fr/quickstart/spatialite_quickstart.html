
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guide de démarrage avec SpatiaLite &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Marble" href="../overview/marble_overview.html" />
    <link rel="prev" title="SpatiaLite" href="../overview/spatialite_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="http://www.gaia-gis.it/gaia-sins/"><img alt="../../_images/logo_spatialite.png" class="align-right" src="../../_images/logo_spatialite.png" /></a>
<section id="spatialite-quickstart">
<h1>Guide de démarrage avec SpatiaLite<a class="headerlink" href="#spatialite-quickstart" title="Lien permanent vers ce titre">¶</a></h1>
<p>SpatiaLite est un moteur de base de données SQLite avec des fonctions spatiales ajoutées.</p>
<p>SQLite est un système de gestion de base de données (SGBD) qui est simple, robuste, facile à utiliser et très léger. Chaque base de données SQLite est simplement un fichier. Vous pouvez librement le copier, le compresser, et l’échanger entre Windows, Linux, MacOs etc.</p>
<p>Ce guide de démarrage rapide décrit comment ouvrir une base de données spatialite à partir d’applications et de la ligne de commande. Certains exemples de requêtes SQL sont affichés.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenu</p>
<ul class="simple">
<li><p><a class="reference internal" href="#start-spatialite-and-load-a-database" id="id1">Démarrer spatialite et charger une base de données</a></p></li>
<li><p><a class="reference internal" href="#run-an-sql-query" id="id2">Exécuter une requête SQL</a></p></li>
<li><p><a class="reference internal" href="#run-spatialite-from-the-command-line" id="id3">Exécuter la spatialite à partir de la ligne de commande</a></p></li>
<li><p><a class="reference internal" href="#create-a-new-spatialite-database-and-load-a-shapefile" id="id4">Créer une nouvelle base de données spatialite et charger un shapefile</a></p></li>
<li><p><a class="reference internal" href="#things-to-try" id="id5">Choses à essayer</a></p></li>
<li><p><a class="reference internal" href="#what-next" id="id6">Ensuite ?</a></p></li>
</ul>
</div>
<section id="start-spatialite-and-load-a-database">
<h2><a class="toc-backref" href="#id1">Démarrer spatialite et charger une base de données</a><a class="headerlink" href="#start-spatialite-and-load-a-database" title="Lien permanent vers ce titre">¶</a></h2>
<p>Spatialite-gui fournit une interface visuelle pour la visualisation et la maintenance d’une base de données spatialite. Vous pouvez facilement voir la structure des tables et du contenu des données à l’aide de fonctions point et clic, dont beaucoup construisent des requêtes SQL communes, ou créez vos propres requêtes SQL.</p>
<ol class="arabic">
<li><p>Ouvrez l’interface graphique spatialite en sélectionnant <span class="menuselection">Geospatial-&gt;Databases-&gt;Spatialite GUI</span>.</p>
</li>
<li><p>Sélectionnez <span class="menuselection">File-&gt;Connecting an existing SQLite DB</span></p></li>
<li><p>Parcourez le répertoire <code class="file docutils literal notranslate"><span class="pre">/home/user/data/spatialite</span></code> et choisissez <code class="file docutils literal notranslate"><span class="pre">trento.sqlite</span></code>.</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-trento.png"><img alt="../../_images/spatialite-gui-trento.png" src="../../_images/spatialite-gui-trento.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
<li><p>Cliquez à droite sur la table MunicipalHallsView et sélectionnez « Show Columns »</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-columns.png"><img alt="../../_images/spatialite-gui-columns.png" src="../../_images/spatialite-gui-columns.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
<li><p>Vous remarquerez l’affichage divisé en 3 zones :</p>
<ul class="simple">
<li><p>Le panneau gauche affiche la hiérarchie de base de données, comme une liste de tables et de colonnes dans la table. Cliquez à droite sur les éléments du panneau gauche pour sélectionner à partir d’une liste d’actions de base de données courantes.</p></li>
<li><p>Le panneau en haut à droite affiche SQL pour l’action sélectionnée. Vous pouvez entrer votre propre SQL personnalisé dans ce panneau.</p></li>
<li><p>Le panneau en bas à droite affiche les résultats de la requête SQL.</p></li>
</ul>
</li>
<li><p>Cliquez à droite sur la table MunicipalHalls et sélectionnez »Edit table rows ». Remarquez que la requête SQL a été créée pour vous dans le volet supérieur droit, et les résultats sont en bas à droite.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">ROWID</span><span class="p">,</span> <span class="s2">&quot;PK_UID&quot;</span><span class="p">,</span> <span class="s2">&quot;AREA&quot;</span><span class="p">,</span> <span class="s2">&quot;PERIMETER&quot;</span><span class="p">,</span> <span class="s2">&quot;COMU&quot;</span><span class="p">,</span> <span class="s2">&quot;Geometry&quot;</span>
    <span class="n">FROM</span> <span class="s2">&quot;MunicipalHalls&quot;</span>
    <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">ROWID</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="run-an-sql-query">
<h2><a class="toc-backref" href="#id2">Exécuter une requête SQL</a><a class="headerlink" href="#run-an-sql-query" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic">
<li><p>Maintenant, essayons de peaufiner cette instruction SQL pour obtenir NOME et (Lat,Long) pour seulement les entités dont le champ NOME_PROV contient « BRESCIA », cette fois en utilisant la table MunicipalHallsView.  Dans le type de volet SQL supérieur droit</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">NOME</span><span class="p">,</span> <span class="n">X</span><span class="p">(</span><span class="n">Geometry</span><span class="p">)</span> <span class="n">AS</span> <span class="n">Longitude</span><span class="p">,</span> <span class="n">Y</span><span class="p">(</span><span class="n">Geometry</span><span class="p">)</span> <span class="n">AS</span> <span class="n">Latitude</span>
    <span class="n">FROM</span> <span class="s2">&quot;MunicipalHallsView&quot;</span>
    <span class="n">WHERE</span> <span class="n">NOME_PROV</span> <span class="n">LIKE</span> <span class="s2">&quot;BRESCIA&quot;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>Cliquez sur le bouton « Execute SQL » à droite, et voir les résultats dans le volet inférieur droit.</p>
<a class="reference internal image-reference" href="../../_images/spatialite-gui-select.png"><img alt="../../_images/spatialite-gui-select.png" src="../../_images/spatialite-gui-select.png" style="width: 560.0px; height: 433.29999999999995px;" /></a>
</li>
</ol>
</section>
<section id="run-spatialite-from-the-command-line">
<h2><a class="toc-backref" href="#id3">Exécuter la spatialite à partir de la ligne de commande</a><a class="headerlink" href="#run-spatialite-from-the-command-line" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les utilisateurs qui ont besoin de scripter ou d’automatiser des requêtes apprendront les avantages de travailler avec une base de données spatialite à partir de l’interface de la ligne de commande. Dans cet exemple, nous allons charger un shapefile, et la recherche d’écoles qui sont près de l’autoroute 42.</p>
<ol class="arabic">
<li><p>Avant de travailler à partir de la ligne de commande, nous devons ouvrir une fenêtre terminale : <span class="menuselection">System Tools -&gt; LXTerminal</span>.</p></li>
<li><p>Dans le terminal ouvrir une base de données d’exemple avec <strong>spatialite</strong> en tapant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spatialite</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">spatialite</span><span class="o">/</span><span class="n">trento</span><span class="o">.</span><span class="n">sqlite</span>
</pre></div>
</div>
<p>Commandes utiles de la ligne de commande:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">help</span>
<span class="o">.</span><span class="n">tables</span>
<span class="o">.</span><span class="n">quit</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="create-a-new-spatialite-database-and-load-a-shapefile">
<h2><a class="toc-backref" href="#id4">Créer une nouvelle base de données spatialite et charger un shapefile</a><a class="headerlink" href="#create-a-new-spatialite-database-and-load-a-shapefile" title="Lien permanent vers ce titre">¶</a></h2>
<ol class="arabic">
<li><p>Créons une nouvelle base de données spatialite vide et chargeons deux shapefiles à partir du jeu de données north_carolina :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>user@osgeo-6:~$ spatialite test.sqlite
SpatiaLite version ..: 5.0.0    Supported Extensions:
    - &#39;VirtualShape&#39;        [direct Shapefile access]
    - &#39;VirtualDbf&#39;          [direct DBF access]
    - &#39;VirtualText&#39;         [direct CSV/TXT access]
    - &#39;VirtualGeoJSON&#39;              [direct GeoJSON access]
    - &#39;VirtualXL&#39;           [direct XLS access]
    - &#39;VirtualNetwork&#39;      [Dijkstra shortest path - obsolete]
    - &#39;RTree&#39;               [Spatial Index - R*Tree]
    - &#39;MbrCache&#39;            [Spatial Index - MBR cache]
    - &#39;VirtualFDO&#39;          [FDO-OGR interoperability]
    - &#39;VirtualBBox&#39;         [BoundingBox tables]
    - &#39;VirtualSpatialIndex&#39; [R*Tree metahandler]
    - &#39;VirtualElementary&#39;   [ElemGeoms metahandler]
    - &#39;VirtualRouting&#39;      [Dijkstra shortest path - advanced]
    - &#39;VirtualKNN&#39;  [K-Nearest Neighbors metahandler]
    - &#39;VirtualGPKG&#39; [OGC GeoPackage interoperability]
    - &#39;SpatiaLite&#39;          [Spatial SQL - OGC]
    - &#39;VirtualXPath&#39;        [XML Path Language - XPath]
PROJ version ........: Rel. 6.3.1, February 10th, 2020
GEOS version ........: 3.9.0-CAPI-1.16.2
RTTOPO version ......: 1.1.0
TARGET CPU ..........: x86_64-linux-gnu
the SPATIAL_REF_SYS table already contains some row(s)
SQLite version ......: 3.31.1
Enter &quot;.help&quot; for instructions
SQLite version 3.31.1 2020-01-27 19:55:54
Enter &quot;.help&quot; for instructions
Enter SQL statements terminated with a &quot;;&quot;
spatialite&gt;
spatialite&gt; .loadshp data/north_carolina/shape/schools_wake schools utf-8 3358
spatialite&gt; .loadshp data/north_carolina/shape/roadsmajor roads utf-8 3358
</pre></div>
</div>
<p>Notez le format de la commande .loadshp : d’abord le shapefile sans l’extension .shp, puis le nom de la nouvelle table spatialite, ensuite l’encodage des caractères, et enfin le code EPSG du CRS du shapefile.</p>
</li>
<li><p>Maintenant, nous allons interroger pour les écoles près de l’autoroute 42.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spatialite</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="o">.</span><span class="n">NAMESHORT</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRNUMBER</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRROOT</span>
     <span class="o">...&gt;</span> <span class="n">FROM</span> <span class="n">schools</span> <span class="n">AS</span> <span class="n">s</span><span class="p">,</span> <span class="n">roads</span> <span class="n">AS</span> <span class="n">r</span>
     <span class="o">...&gt;</span> <span class="n">WHERE</span> <span class="n">r</span><span class="o">.</span><span class="n">ROAD_NAME</span> <span class="o">=</span> <span class="s2">&quot;NC-42&quot;</span> <span class="n">AND</span>
     <span class="o">...&gt;</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">Geometry</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span>
<span class="n">FUQUAY</span><span class="o">-</span><span class="n">VARINA</span><span class="o">|</span><span class="mi">6600</span><span class="o">|</span><span class="n">Johnson</span> <span class="n">Pond</span> <span class="n">Rd</span>
<span class="n">WILLOW</span> <span class="n">SPRINGS</span><span class="o">|</span><span class="mi">6800</span><span class="o">|</span><span class="n">Dwight</span> <span class="n">Rowland</span> <span class="n">Rd</span>
<span class="n">FUQUAY</span><span class="o">-</span><span class="n">VARINA</span><span class="o">|</span><span class="mi">109</span><span class="o">|</span><span class="n">N</span> <span class="n">Ennis</span> <span class="n">St</span>
<span class="n">LINCOLN</span> <span class="n">HEIGHTS</span><span class="o">|</span><span class="mi">307</span><span class="o">|</span><span class="n">Bridge</span> <span class="n">St</span>
</pre></div>
</div>
</li>
<li><p>Enfin, nous extrayons le résultat de la requête vers un fichier texte »comma separated values (CSV) » « schools_rt42.txt » avec les commandes suivantes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spatialite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">mode</span> <span class="n">csv</span>
<span class="n">spatialite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">output</span> <span class="s2">&quot;schools_rt42.txt&quot;</span>
<span class="n">spatialite</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">s</span><span class="o">.</span><span class="n">NAMESHORT</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRNUMBER</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">ADDRROOT</span>
    <span class="o">...&gt;</span> <span class="n">FROM</span> <span class="n">schools</span> <span class="n">AS</span> <span class="n">s</span><span class="p">,</span> <span class="n">roads</span> <span class="n">AS</span> <span class="n">r</span>
    <span class="o">...&gt;</span> <span class="n">WHERE</span> <span class="n">r</span><span class="o">.</span><span class="n">ROAD_NAME</span> <span class="o">=</span> <span class="s2">&quot;NC-42&quot;</span> <span class="n">AND</span>
    <span class="o">...&gt;</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">Geometry</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">Geometry</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span>
<span class="n">spatialite</span><span class="o">&gt;.</span><span class="n">q</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="things-to-try">
<h2><a class="toc-backref" href="#id5">Choses à essayer</a><a class="headerlink" href="#things-to-try" title="Lien permanent vers ce titre">¶</a></h2>
<p>Voici quelques défis supplémentaires que vous pouvez relever :</p>
<ul class="simple">
<li><p>Inspecter les géométries avec spatialite-gui</p></li>
<li><p>Ouvrez et modifiez les couches SpatiaLite dans QGIS</p></li>
</ul>
</section>
<section id="what-next">
<h2><a class="toc-backref" href="#id6">Ensuite ?</a><a class="headerlink" href="#what-next" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour en savoir plus sur SpatiaLite, un point de départ est la <a class="reference external" href="https://www.gaia-gis.it/fossil/libspatialite/index">page du projet SpatiaLite</a>.</p>
<p>N’oubliez pas de visiter le tutoriel <a class="reference external" href="http://www.gaia-gis.it/gaia-sins/spatialite-cookbook/index.html">Spatialite cookbook</a></p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>