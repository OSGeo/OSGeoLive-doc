
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Guide de démarrage avec pygeoapi &#8212; OSGeoLive 15.0 Documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/overview.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/../_themes/overview/static/overview.css" />
    <script data-url_root="../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Zoo Project" href="../overview/zoo-project_overview.html" />
    <link rel="prev" title="pygeoapi" href="../overview/pygeoapi_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head><body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/osgeolive-banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div>
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>

  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://pygeoapi.io/"><img alt="../../_images/logo_pygeoapi.png" class="align-right" src="../../_images/logo_pygeoapi.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<section id="pygeoapi-quickstart">
<h1>Guide de démarrage avec pygeoapi<a class="headerlink" href="#pygeoapi-quickstart" title="Lien permanent vers ce titre">¶</a></h1>
<p>pygeoapi est un outil pour publier rapidement et facilement les services OPEN API OGC sur le web. Il est construit sur les puissantes bibliothèques open-source de la communauté (géo)python.</p>
<p>Dans ce guide de démarrage, nous vous guiderons dans la mise en place du logiciel et l’utiliserons pour certains cas spécifiques. Le long de la route, nous allons nous engager avec certains logiciels connexes, parce que pygeoapi est un produit qui est généralement combiné avec d’autres composants pour répondre à un besoin commercial.</p>
<section id="prior-knowledge">
<h2>Connaissances préalables<a class="headerlink" href="#prior-knowledge" title="Lien permanent vers ce titre">¶</a></h2>
<p>pygeoapi est une application Web Python pour le domaine spatial, vous devez donc être conscient des concepts d’applications Web et les aspects géospatiaux tels que les formats raster et vectoriels, les normes OGC et les systèmes de projection. La connaissance de Python est recommandée, bien que vous puissiez vous en passer en exécutant l’application à partir d’OSGeoLive.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenu</p>
<ul class="simple">
<li><p><a class="reference internal" href="#configure-and-start-the-service" id="id1">Configurer et démarrer le service</a></p></li>
<li><p><a class="reference internal" href="#configure-new-service" id="id2">Configurer un nouveau service</a></p></li>
<li><p><a class="reference internal" href="#using-a-web-browser-to-query-the-api" id="id3">Utilisation d’un navigateur Web pour interroger l’API</a></p></li>
<li><p><a class="reference internal" href="#using-oapi-features-in-desktop-gis" id="id4">Utilisation d’OAPI-Features dans un SIG de bureau</a></p></li>
</ul>
</div>
<section id="configure-and-start-the-service">
<h3><a class="toc-backref" href="#id1">Configurer et démarrer le service</a><a class="headerlink" href="#configure-and-start-the-service" title="Lien permanent vers ce titre">¶</a></h3>
<ol class="arabic">
<li><p>À partir du menu Démarrer, sélectionnez  <span class="menuselection">Structure ‣ osgeolive ‣ appmenupath ‣ pygeoapi</span>. L’application ouvrira une page Web à l’adresse <a class="reference external" href="http://localhost:5000">http://localhost:5000</a></p></li>
<li><p>naviguer dans le dossier utilisateur <code class="docutils literal notranslate"><span class="pre">/usr/local/share/pygeoapi</span></code> et localiser un fichier <code class="docutils literal notranslate"><span class="pre">pygeoapi-config.yml</span></code>. Ce fichier contient la configuration du service.</p></li>
<li><p>Ouvrez le fichier avec la commande <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">nano</span> <span class="pre">pygeoapi-config.yml</span></code>.</p></li>
<li><p>Mettez à jour certains paramètres du fichier, tels que le titre et l’auteur. Et enregistrez le fichier.</p></li>
<li><p>Redémarrez le service, par exemple en fermant le terminal et en redémarrer le service</p>
<a class="reference internal image-reference" href="../../_images/pygeoapi_screenshot.png"><img alt="../../_images/pygeoapi_screenshot.png" src="../../_images/pygeoapi_screenshot.png" style="width: 280.0px; height: 138.6px;" /></a>
</li>
</ol>
</section>
<section id="configure-new-service">
<h3><a class="toc-backref" href="#id2">Configurer un nouveau service</a><a class="headerlink" href="#configure-new-service" title="Lien permanent vers ce titre">¶</a></h3>
<p>Vous allez maintenant déployer un ensemble de données vectorielles dans pygeoapi et exposer ses fonctionnalités en tant qu’API OGC - Features. OGC API - Features est une norme d’OGC pour exposer les entités vectorielles en tant que service Web. OGC API - Features est l’alternative OpenAPI à WFS.</p>
<p>pygeoapi prend en charge un large éventail de backends à utiliser comme source vectorielle, par exemple géopackage, PostGIS, Elasticsearch, WFS, etc. Via le fournisseur GDAL OGR, un ensemble presque illimité d’autres sources vectorielles peut être ajouté.</p>
<p>Les ensembles de données intéressants à exposer en tant qu’OAPI-Features se composent de données du monde réel ayant de multiples attributs et liens vers d’autres ressources. OSGeoLive contient un certain nombre d’ensembles de données que nous pouvons utiliser. Un exemple est <code class="docutils literal notranslate"><span class="pre">/var/www/html/openlayers/examples/data/geojson/countries.geojson</span></code>. Vous pouvez le configurer en pygeoapi à l’aide du fournisseur GeoJSON.</p>
<ol class="arabic simple">
<li><p>Téléchargez le fichier GeoJSON et placez-le dans le dossier tests/données.</p></li>
<li><p>Mettez à jour pygeoapi-config.yml pour ajouter <code class="docutils literal notranslate"><span class="pre">countries</span></code> comme une nouvelle collection au pygeoapi (insérer l’extrait ci-dessous entre les autres collections. Attention à l’indentation, l’indentation est importante dans la syntaxe YAML).</p></li>
<li><p>Redémarrer pygeoapi</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">countries</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span><span class="w"></span>
<span class="w">   </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Countries</span><span class="w"></span>
<span class="w">   </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Countries of the world</span><span class="w"></span>
<span class="w">   </span><span class="nt">keywords</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">industry</span><span class="w"></span>
<span class="w">   </span><span class="nt">links</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">text/html</span><span class="w"></span>
<span class="w">        </span><span class="nt">rel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canonical</span><span class="w"></span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">information</span><span class="w"></span>
<span class="w">        </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://openlayers.org</span><span class="w"></span>
<span class="w">        </span><span class="nt">hreflang</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en-US</span><span class="w"></span>
<span class="w">   </span><span class="nt">extents</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">spatial</span><span class="p">:</span><span class="w"></span>
<span class="w">         </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-180</span><span class="p p-Indicator">,</span><span class="nv">-90</span><span class="p p-Indicator">,</span><span class="nv">180</span><span class="p p-Indicator">,</span><span class="nv">90</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">   </span><span class="nt">providers</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GeoJSON</span><span class="w"></span>
<span class="w">        </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/var/www/html/openlayers/examples/data/geojson/countries.geojson</span><span class="w"></span>
<span class="w">        </span><span class="nt">id_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="w"></span>
</pre></div>
</div>
<p>Vérifiez que la collection est disponible via votre navigateur à l’adresse <a class="reference external" href="http://localhost:5000/collections/countries">http://localhost:5000/collections/countries</a></p>
</section>
<section id="using-a-web-browser-to-query-the-api">
<h3><a class="toc-backref" href="#id3">Utilisation d’un navigateur Web pour interroger l’API</a><a class="headerlink" href="#using-a-web-browser-to-query-the-api" title="Lien permanent vers ce titre">¶</a></h3>
<p>Maintenant que nous avons le service disponible, nous pouvons l’interroger à l’aide de divers outils clients. Chacune des entités de la collection est disponible dans des formats communs, tels que HTML, GeoJSON et GML. Pour démarrer, nous pouvons utiliser un navigateur Web pour naviguer à travers le service. De <a class="reference external" href="http://localhost:5000/collections/countries">http://localhost:5000/collections/countries</a>, creuser jusqu’aux entités individuelles. Le service détecte automatiquement (accepter l’en-tête) que vous utilisez un navigateur Web et retournera la représentation HTML des entités. Remarquez dans le coin supérieur droit des liens explicites pour remplacer l’en-tête d’acception et demander des représentations spécifiques de l’entité (?f=geojson).</p>
<p>Chaque Open API dispose d’une page de documentation interactive <a class="reference external" href="http://localhost:5000/openapi">http://localhost:5000/openapi</a>. Dans cette page Web interactive, vous pouvez lire sur les différentes méthodes du service, mais aussi interagir directement avec eux via des formulaires Web.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/openapidoc.png"><img alt="../../_images/openapidoc.png" src="../../_images/openapidoc.png" style="width: 1009.4px; height: 368.2px;" /></a>
</div></blockquote>
<p>L’OGC API a été développée avec les <a class="reference external" href="https://w3c.github.io/sdw/bp/#bp-summary">données spatiales sur les meilleures pratiques web</a> à l’esprit. Un aspect important de ces meilleures pratiques est l’optimisation des moteurs de recherche. Pygeoapi ajoute quelques optimisations d’exploration en plus des exigences des normes Open API; Les métadonnées de collecte peuvent être analysées par les moteurs de recherche de manière structurée, dans le but de rendre les collections détectables dans des outils comme Google Dataset Search. Pour évaluer les capacités de données structurées, vous pouvez utiliser les outils de test de données structurés de Yandex ou Google. Copiez la source html de la page de collecte des pays (ou l’url d’une page de collecte d’une instance pygeoapi en ligne) en un outil structuré de test de données et évaluez les données structurées que l’outil est capable d’en extraire. Le moteur de recherche utilisera ces informations dans son index de jeu de données.</p>
</section>
<section id="using-oapi-features-in-desktop-gis">
<h3><a class="toc-backref" href="#id4">Utilisation d’OAPI-Features dans un SIG de bureau</a><a class="headerlink" href="#using-oapi-features-in-desktop-gis" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans ce guide de démarrage, nous utilisons QGIS pour interroger le service, mais un flux de travail similaire est possible dans d’autres outils SIG, par exemple ArcGIS, FME, OpenLayers.</p>
<p>À partir de QGIS 3.14, vous pouvez ajouter une couche OAPI-Features comme couche vectorielle. Dans le menu <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">layer</span></code>  sélectionnez <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">WFS</span> <span class="pre">/</span> <span class="pre">OAPI-Features</span> <span class="pre">layer</span></code>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/qgis-wfs.png"><img alt="../../_images/qgis-wfs.png" src="../../_images/qgis-wfs.png" style="width: 277.9px; height: 243.6px;" /></a>
</div></blockquote>
<p>Sur la fenêtre qui s’ouvre, créez une nouvelle connexion, entrez l’url au service <a class="reference external" href="http://localhost:5000">http://localhost:5000</a>.</p>
<p>Cliquez sur Ok, puis <code class="docutils literal notranslate"><span class="pre">connect</span></code> pour charger les collections disponibles dans le service.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/qgis-layers.png"><img alt="../../_images/qgis-layers.png" src="../../_images/qgis-layers.png" style="width: 280.0px; height: 139.29999999999998px;" /></a>
</div></blockquote>
<p>Sélectionnez la collection <code class="docutils literal notranslate"><span class="pre">countries</span></code> et cliquez sur ‘Add’ pour ajouter la couche dans la carte QGIS.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>