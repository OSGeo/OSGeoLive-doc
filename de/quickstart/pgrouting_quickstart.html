
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pgRouting Quickstart &#8212; OSGeoLive 14.0 Documentation</title>
    <link rel="stylesheet" href="../../_static/overview.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="GpsPrune" href="../overview/gpsprune_overview.html" />
    <link rel="prev" title="pgRouting" href="../overview/pgrouting_overview.html" />
	<script type="text/javascript" src="../../_static/osgeolive.js"></script>


  </head>
  <body>

        
        
    <div class="header">
	<div class="banner"><a href="http://live.osgeo.org/"><img src="../../_images/banner.png"></a></div>
        <div class="nowrap">
            <ul id="top-nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../overview/overview.html">Contents</a></li>
              <li><a href="../download.html">Download</a></li>
              <li><a href="../metrics.html">Metrics</a></li>
              <li><a href="../sponsors.html">Sponsors</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
        </div>
    </div>
    </div> 
        


    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <a class="reference external image-reference" href="https://pgrouting.org/"><img alt="../../_images/logo_pgrouting.png" class="align-right" src="../../_images/logo_pgrouting.png" /></a>
<a class="reference external image-reference" href="https://www.osgeo.org"><img alt="../../_images/OSGeo_community.png" class="align-right" src="../../_images/OSGeo_community.png" /></a>
<div class="section" id="pgrouting-quickstart">
<h1>pgRouting Quickstart<a class="headerlink" href="#pgrouting-quickstart" title="Link zu dieser Überschrift">¶</a></h1>
<p>pgRouting ist eine Erweiterung, die Routing und andere Netzwerkanalysefunktionen zu  <a class="reference internal" href="../overview/postgis_overview.html"><span class="doc">PostGIS</span></a>/<a class="reference external" href="https://www.postgresql.org">PostgreSQL</a> -Datenbanken hinzufügt.</p>
<p>In diesem Quickstart wird beschrieben, wie Sie pgrouting in einer PostgreSQL-Datenbank aktivieren, Daten mit osm2pgrouting laden und eine grundlegende Abfrage mit dem kürzesten Pfad mit den Beispieltestdaten ausführen.</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#enabling-pgrouting-in-a-database" id="id1">Aktivieren von pgRouting in einer Datenbank</a></li>
<li><a class="reference internal" href="#loading-osm-data-with-osm2pgrouting" id="id2">OSM-Daten mit osm2pgrouting laden</a></li>
<li><a class="reference internal" href="#running-pgrouting" id="id3">Ausführen von pgRouting</a></li>
<li><a class="reference internal" href="#what-next" id="id4">Was kommt als Nächstes?</a></li>
</ul>
</div>
<div class="section" id="enabling-pgrouting-in-a-database">
<h2><a class="toc-backref" href="#id1">Aktivieren von pgRouting in einer Datenbank</a><a class="headerlink" href="#enabling-pgrouting-in-a-database" title="Link zu dieser Überschrift">¶</a></h2>
<p>In diesem Beispiel erstellen wir eine Datenbank mit dem Namen ‚city_routing‘ und aktivieren pgRouting in der Datenbank.</p>
<ul class="simple">
<li>Öffnen Sie ein Terminal über :menuselection:‘System Tools –&gt; LXTerminal‘ und öffnen Sie psql: (psql ist ein kommandozeilen basierter Datenbankclient, der mit PostgreSQL gepackt ist)</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">psql</span>
</pre></div>
</div>
<p>Rufen Sie über psql Folgendes auf:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">city_routing</span><span class="p">;</span>
\<span class="n">connect</span> <span class="n">city_routing</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span> <span class="n">postgis</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">EXTENSION</span> <span class="n">pgrouting</span><span class="p">;</span>
</pre></div>
</div>
<p>Wenn Sie PostgreSQL 9.6+ nutzen, können Sie die PostGIS-Zeile überspringen und :‘CREATE EXTENSION pgrouting CASCADE;‘ aufrufen.</p>
<p>Sie können Ihre Installation überprüfen, indem Sie Folgendes ausführen:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span>  <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_version</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">version</span> <span class="o">|</span>  <span class="n">tag</span>   <span class="o">|</span>   <span class="nb">hash</span>    <span class="o">|</span> <span class="n">branch</span> <span class="o">|</span> <span class="n">boost</span>
<span class="o">---------+--------+-----------+--------+--------</span>
 <span class="mf">2.3</span><span class="o">.</span><span class="mi">2</span>   <span class="o">|</span> <span class="n">v2</span><span class="o">.</span><span class="mf">3.2</span> <span class="o">|</span> <span class="mi">1</span><span class="n">f2af3c52</span> <span class="o">|</span> <span class="n">master</span> <span class="o">|</span> <span class="mf">1.58</span><span class="o">.</span><span class="mi">0</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>Ihre Version sollte 2.1.0 oder höher sein, um Beispiele in dieser Anleitung ausführen zu können.</p>
</div>
<div class="section" id="loading-osm-data-with-osm2pgrouting">
<h2><a class="toc-backref" href="#id2">OSM-Daten mit osm2pgrouting laden</a><a class="headerlink" href="#loading-osm-data-with-osm2pgrouting" title="Link zu dieser Überschrift">¶</a></h2>
<p>osm2pgrouting ist ein Befehlszeilenwerkzeug zum Laden von .osm-Dateien in das pgRouting-kompatible Format. Sie sehen nun wie Sie osm2pgrouting Version 2.1.0+ verwenden.</p>
<p>Öffnen Sie ein neues Terminalfenster, um die installierte Version von osm2pgrouting zu überprüfen. Diese sollte 2.1 oder höher sein.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">osm2pgrouting</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>Die Ausgabe zeigt:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="ow">is</span> <span class="n">osm2pgrouting</span> <span class="n">Version</span> <span class="mf">2.2</span>
</pre></div>
</div>
<p>Laden Sie nun die Daten aus der osm-Datei:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span>
<span class="n">bzcat</span> <span class="n">data</span><span class="o">/</span><span class="n">osm</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span><span class="o">.</span><span class="n">bz2</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span>
<span class="n">osm2pgrouting</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span> <span class="o">-</span><span class="n">h</span> <span class="n">localhost</span> <span class="o">-</span><span class="n">U</span> <span class="n">user</span> <span class="o">-</span><span class="n">d</span> <span class="n">city_routing</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5432</span> <span class="o">-</span><span class="n">W</span> <span class="n">user</span> <span class="o">--</span><span class="n">conf</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">osm2pgrouting</span><span class="o">/</span><span class="n">mapconfig_for_cars</span><span class="o">.</span><span class="n">xml</span>
<span class="n">rm</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">feature_city</span><span class="o">.</span><span class="n">osm</span>
</pre></div>
</div>
<p>Die Ausgabe sollte ungefähr wie folgt aussehen:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Export</span> <span class="n">Ways</span> <span class="o">...</span>
    <span class="n">Processing</span> <span class="mi">45383</span> <span class="n">ways</span><span class="p">:</span>
<span class="p">[</span><span class="o">*************************************************|</span> <span class="p">]</span> <span class="p">(</span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>    <span class="n">Ways</span> <span class="n">Processed</span><span class="p">:</span> <span class="mi">45383</span>        <span class="n">Split</span> <span class="n">Ways</span> <span class="n">generated</span><span class="p">:</span> <span class="mi">10483</span> <span class="n">Vertices</span> <span class="n">inserted</span> <span class="mi">9165</span> <span class="n">Inserted</span> <span class="mi">10483</span> <span class="n">split</span> <span class="n">ways</span>
<span class="n">Creating</span> <span class="n">Foreign</span> <span class="n">Keys</span> <span class="o">...</span>
<span class="n">Foreign</span> <span class="n">keys</span> <span class="k">for</span> <span class="n">osm_way_classes</span> <span class="n">table</span> <span class="n">created</span>
<span class="n">Foreign</span> <span class="n">keys</span> <span class="k">for</span> <span class="n">relations_ways</span> <span class="n">table</span> <span class="n">created</span>
<span class="n">Foreign</span> <span class="n">keys</span> <span class="k">for</span> <span class="n">Ways</span> <span class="n">table</span> <span class="n">created</span>
<span class="c1">#########################</span>
<span class="n">size</span> <span class="n">of</span> <span class="n">streets</span><span class="p">:</span> <span class="mi">45383</span>
<span class="c1">#########################</span>
</pre></div>
</div>
</div>
<div class="section" id="running-pgrouting">
<h2><a class="toc-backref" href="#id3">Ausführen von pgRouting</a><a class="headerlink" href="#running-pgrouting" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li>Öffnen Sie einen Terminal über :menuselection:‘System Tools –&gt; LXTerminal‘, und stellen Sie eine Verbindung mit der ‚city_routing‘‘-Datenbank her:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="n">city_routing</span>
</pre></div>
</div>
<ul class="simple">
<li>Der Befehl  <strong class="command">\d</strong>  listet alle verfügbaren Tabellen auf:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>                    <span class="n">List</span> <span class="n">of</span> <span class="n">relations</span>
 <span class="n">Schema</span> <span class="o">|</span>           <span class="n">Name</span>           <span class="o">|</span>   <span class="n">Type</span>   <span class="o">|</span>  <span class="n">Owner</span>
<span class="o">--------+--------------------------+----------+----------</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">geography_columns</span>        <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">geometry_columns</span>         <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_nodes</span>                <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_nodes_node_id_seq</span>    <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_relations</span>            <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_way_classes</span>          <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">osm_way_types</span>            <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">raster_columns</span>           <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">raster_overviews</span>         <span class="o">|</span> <span class="n">view</span>     <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">relations_ways</span>           <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">spatial_ref_sys</span>          <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways</span>                     <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_gid_seq</span>             <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_vertices_pgr</span>        <span class="o">|</span> <span class="n">table</span>    <span class="o">|</span> <span class="n">postgres</span>
 <span class="n">public</span> <span class="o">|</span> <span class="n">ways_vertices_pgr_id_seq</span> <span class="o">|</span> <span class="n">sequence</span> <span class="o">|</span> <span class="n">postgres</span>
<span class="p">(</span><span class="mi">15</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>Führen Sie die Dijkstra Shortest Path-Funktion unter der Annahme ungerichteter Fahrten aus:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
        <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
                <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span>
                        <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">false</span>
        <span class="p">);</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>         <span class="n">cost</span>
<span class="o">-----+------+-------+-----------------------</span>
   <span class="mi">1</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span>  <span class="mf">0.000106201177015572</span>
   <span class="mi">2</span> <span class="o">|</span> <span class="mi">3603</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span>  <span class="mf">0.000171096610136435</span>
   <span class="mi">3</span> <span class="o">|</span> <span class="mi">8284</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span>  <span class="mf">0.000101401380664492</span>
 <span class="o">...</span> <span class="o">|</span>  <span class="o">...</span> <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                 <span class="o">...</span>
  <span class="mi">37</span> <span class="o">|</span> <span class="mi">3461</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span>   <span class="mf">0.00121559903339768</span>
  <span class="mi">38</span> <span class="o">|</span> <span class="mi">1761</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span>   <span class="mf">0.00307553090376563</span>
  <span class="mi">39</span> <span class="o">|</span> <span class="mi">5981</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span>  <span class="mf">0.000158813884783759</span>
  <span class="mi">40</span> <span class="o">|</span>  <span class="mi">600</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                     <span class="mi">0</span>
<span class="p">(</span><span class="mi">40</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>pgr_dijkstra unterstützt auch bigints für Knoten und Kanten, und osm2pgrouting lädt auch die osm_ids, sodass Sie alternativ die osm_id anstelle der automatisch generierten source- und target-ids für Knoten verwendet werden können. Um die entsprechenden osm_ids für unsere Knoten zu suchen, verwenden wir diese Abfrage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">osm_id</span>
        <span class="n">FROM</span> <span class="n">ways_vertices_pgr</span> <span class="n">where</span> <span class="nb">id</span> <span class="n">IN</span><span class="p">(</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
</pre></div>
</div>
<p>Führt zu Ausgabe von:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="nb">id</span>  <span class="o">|</span>   <span class="n">osm_id</span>
<span class="o">-----+------------</span>
 <span class="mi">100</span> <span class="o">|</span> <span class="mi">1896068597</span>
 <span class="mi">600</span> <span class="o">|</span>   <span class="mi">31369798</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>Dazu ändern Sie Ihre Abfrage in:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
        <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source_osm</span> <span class="n">AS</span> <span class="n">source</span><span class="p">,</span> <span class="n">target_osm</span> <span class="n">AS</span> <span class="n">target</span><span class="p">,</span>
                <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
        <span class="mi">1896068597</span><span class="p">,</span> <span class="mi">31369798</span><span class="p">,</span> <span class="n">false</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Hinweis: Die SQL-Anweisung muss immer die Feldnamen <cite>id, source, target, and cost</cite> haben. Da wir die Felder ‚source_osm‘ und ‚target_osm‘ verwenden, müssen wir einen Alias vergeben, so dass die resultierenden pgr_dijkstra-Abfragespalten source und target heißen.</p>
<p>Die Ausgabe ist:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span>    <span class="n">node</span>    <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>         <span class="n">cost</span>
<span class="o">-----+------------+-------+-----------------------</span>
   <span class="mi">1</span> <span class="o">|</span> <span class="mi">1896068597</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span>  <span class="mf">0.000106201177015572</span>
   <span class="mi">2</span> <span class="o">|</span>  <span class="mi">471372588</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span>  <span class="mf">0.000171096610136435</span>
   <span class="mi">3</span> <span class="o">|</span>  <span class="mi">471372583</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span>  <span class="mf">0.000101401380664492</span>
   <span class="p">:</span>
   <span class="p">:</span>
  <span class="o">...|</span>  <span class="o">...</span>       <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                 <span class="o">...</span>
  <span class="mi">37</span> <span class="o">|</span> <span class="mi">1370351630</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span>   <span class="mf">0.00121559903339768</span>
  <span class="mi">38</span> <span class="o">|</span>   <span class="mi">30812815</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span>   <span class="mf">0.00307553090376563</span>
  <span class="mi">39</span> <span class="o">|</span> <span class="mi">3214028631</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span>  <span class="mf">0.000158813884783759</span>
  <span class="mi">40</span> <span class="o">|</span>   <span class="mi">31369798</span> <span class="o">|</span>    <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                     <span class="mi">0</span>
<span class="p">(</span><span class="mi">40</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<p>Da wir weiterhin automatisch generierte Knoten-IDs verwenden, sind unsere Kantennummern die gleichen wie in unserer vorherigen Abfrage, aber die Knoten sind die osm-Knoten-IDs.</p>
<p>Der Vorteil der Verwendung der osm_ids anstelle der automatisch generierten IDs besteht darin, dass Ihre Ergebnisse zwischen verschiedenen Datenbanken konsistent sind, wenn sie einen gemeinsamen Satz von osm-IDs verwenden.  Nicht alle pgRouting-Funktionen wurden geändert, um bigints zu unterstützen, sodass osm_ids nicht mit allen Funktionen verwendet werden können.</p>
<ul class="simple">
<li>Um die Routengeometrie auszugeben, verknüpfen Sie das Ergebnis mit den Straßengeometrien:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">rpad</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">the_geom</span><span class="p">::</span><span class="n">text</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="n">AS</span> <span class="s2">&quot;the_geom (truncated)&quot;</span>
        <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
                <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span>
                        <span class="n">length</span> <span class="k">as</span> <span class="n">cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">false</span>
        <span class="p">)</span> <span class="n">a</span> <span class="n">INNER</span> <span class="n">JOIN</span> <span class="n">ways</span> <span class="n">b</span> <span class="n">ON</span> <span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">edge</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">gid</span><span class="p">)</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">seq</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">seq</span> <span class="o">|</span> <span class="n">edge</span>  <span class="o">|</span>                     <span class="n">the_geom</span> <span class="p">(</span><span class="n">truncated</span><span class="p">)</span>
<span class="o">-----+-------+--------------------------------------------------------------</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">148</span> <span class="o">|</span> <span class="mf">0102000020E61000000200000035</span><span class="n">BEE5A03A641C40BC98C1734A5E4940F4</span>
   <span class="mi">2</span> <span class="o">|</span>  <span class="mi">4118</span> <span class="o">|</span> <span class="mf">0102000020E610000002000000</span><span class="n">F4CE577F3A641C402B5CA0EE4D5E494058</span>
   <span class="mi">3</span> <span class="o">|</span>  <span class="mi">9429</span> <span class="o">|</span> <span class="mf">0102000020E61000000200000058</span><span class="n">BCA2A53C641C40C3503D88535E4940F5</span>
 <span class="o">...</span> <span class="o">|</span>   <span class="o">...</span> <span class="o">|</span>                                                          <span class="o">...</span>
  <span class="mi">36</span> <span class="o">|</span>  <span class="mi">6538</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000002999</span><span class="n">F7938C6F1C409DD843FB585D49405C</span>
  <span class="mi">37</span> <span class="o">|</span>  <span class="mi">3964</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000005</span><span class="n">CAE7E6C926F1C40E55C2FF2575D494088</span>
  <span class="mi">38</span> <span class="o">|</span>  <span class="mi">2013</span> <span class="o">|</span> <span class="mf">0102000020E6100000020000008849</span><span class="n">B89047701C406DF7BC2C375D4940E8</span>
  <span class="mi">39</span> <span class="o">|</span>  <span class="mi">6801</span> <span class="o">|</span> <span class="mf">0102000020E610000002000000</span><span class="n">E82E89B322721C40A85890C1E55C494059</span>
<span class="p">(</span><span class="mi">39</span> <span class="n">rows</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>Sie können die Routen mit einem Desktop GIS anzeigen</dt>
<dd>beispielsweise mit <a class="reference internal" href="../overview/openjump_overview.html"><span class="doc">OpenJump</span></a> oder mit <a class="reference internal" href="../overview/qgis_overview.html"><span class="doc">QGIS</span></a> mit der DbManager-Erweiterung.</dd>
</dl>
</li>
</ul>
<p>Um die DbManager-Erweiterung von QGIS zu verwenden, öffnen Sie QGIS und gehen Sie dann zu <code class="docutils literal"><span class="pre">Database</span> <span class="pre">-&gt;</span> <span class="pre">DB</span> <span class="pre">Manager</span> <span class="pre">-&gt;</span> <span class="pre">DB</span> <span class="pre">Manager</span></code>. Wählen Sie das SQL-Fenster-Symbol aus, und fügen Sie die obige pgRouting-Abfrage ein.</p>
<ul class="simple">
<li>Führen Sie die Dijkstra Shortest Path-Funktion mit unter Berücksichtigung der Richtung aus.</li>
</ul>
<p>In den vorangegangenen Beispielen gingen wir davon aus, dass Straßen in beide Richtungen gleich viel Kosten haben. In Fällen, in denen Sie auf beiden Fahrspuren eine Richtung oder unterschiedliche Geschwindigkeitsbegrenzungen haben, können die Kosten für eine Richtung einer Straße anders sein als in die andere Richtung. In diesen Fällen müssen Sie Ihrer Abfrage ‚reverse_cost‘ eine zusätzliche Spalte hinzufügen.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">seq</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">cost</span>
        <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;</span>
                <span class="n">SELECT</span> <span class="n">gid</span> <span class="k">as</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span>
                        <span class="n">cost_s</span> <span class="n">As</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost_s</span> <span class="n">AS</span> <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">ways</span><span class="s1">&#39;,</span>
                <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="n">true</span>
        <span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>Über den Befehl <strong class="command">\q</strong> können Sie psql verlassen.</li>
</ul>
</div>
<div class="section" id="what-next">
<h2><a class="toc-backref" href="#id4">Was kommt als Nächstes?</a><a class="headerlink" href="#what-next" title="Link zu dieser Überschrift">¶</a></h2>
<ul class="simple">
<li><strong>pgRouting-Webseite</strong> - Besuchen Sie die Projektwebseite <a class="reference external" href="https://pgrouting.org">https://pgrouting.org</a>, um mehr über pgRouting zu erfahren.</li>
<li><strong>pgRouting Dokumentation</strong> - Sie finden die aktuellste Dokumentation unter <a class="reference external" href="https://docs.pgrouting.org">https://docs.pgrouting.org</a>.</li>
<li><strong>pgRouting Workshop</strong> - Der Workshop ‚„FOSS4G routing with pgRouting tools and OpenStreetMap road data“‘ ist verfügbar unter: <a class="reference external" href="https://workshop.pgrouting.org">https://workshop.pgrouting.org</a>.</li>
<li><strong>osm2pgRouting</strong> - <a class="reference external" href="https://github.com/pgRouting/osm2pgrouting/wiki/Documentation-for-osm2pgrouting-v2.1">https://github.com/pgRouting/osm2pgrouting/wiki/Documentation-for-osm2pgrouting-v2.1</a></li>
<li><strong>QGIS pgRouting Layer Plugin</strong> - <a class="reference external" href="https://plugins.qgis.org/plugins/pgRoutingLayer/">https://plugins.qgis.org/plugins/pgRoutingLayer/</a> bietet eine grafische Oberfläche für pgRouting-Funktionen und interagiert mit der Karte, so dass Sie kein SQL schreiben müssen.</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="related">
	<font size="-2">
		<div id="translations">
		<!-- alphabetical order -->
              <a href="javascript:defaultRedirect('en')">English</a> |   <a href="javascript:defaultRedirect('de')">Deutsch</a> |   <a href="javascript:defaultRedirect('es')">Español</a> |   <a href="javascript:defaultRedirect('fi')">Suomen kieli</a> |   <a href="javascript:defaultRedirect('fr')">Français</a> |   <a href="javascript:defaultRedirect('it')">Italiano</a> |   <a href="javascript:defaultRedirect('ja')">日本語</a> |   <a href="javascript:defaultRedirect('hu')">Hungarian</a>
		</div>
	</font>
    </div>



        
        
<span style="font-size:85%;"><i><a href="../copyright.html">Copyright & Disclaimer</a></i></span>
        


  </body>
</html>